{"ast":null,"code":"import _objectSpread from\"C:/Users/sungh/Desktop/chat_work/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _taggedTemplateLiteral from\"C:/Users/sungh/Desktop/chat_work/frontend/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js\";var _templateObject,_templateObject2,_templateObject3,_templateObject4,_templateObject5,_templateObject6;import React,{useState,useRef,useEffect}from'react';import styled from'styled-components';import MessageInput from'../../shared/components/MessageInput';import Message from'../../shared/components/Message';import SelectableMessage from'./SelectableMessage';import FloatingActionButton from'../../shared/components/FloatingActionButton';import LoadingMessage from'../../shared/components/LoadingMessage';import{chatApi}from'../../shared/api/chatApi';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Container=styled.div(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n  display: flex;\\n  flex-direction: column;\\n  height: 100%;\\n  background: white;\\n\"])));const ChatSection=styled.div(_templateObject2||(_templateObject2=_taggedTemplateLiteral([\"\\n  flex: 1;\\n  display: flex;\\n  flex-direction: column;\\n  overflow: hidden;\\n\"])));const ChatMessages=styled.div(_templateObject3||(_templateObject3=_taggedTemplateLiteral([\"\\n  flex: 1;\\n  overflow-y: auto;\\n  padding: 20px;\\n  display: flex;\\n  flex-direction: column;\\n  gap: 16px;\\n\"])));const ChatInputSection=styled.div(_templateObject4||(_templateObject4=_taggedTemplateLiteral([\"\\n  padding: 16px 20px;\\n  border-top: none;\\n  background: #ffffff;\\n\"])));const EmptyChat=styled.div(_templateObject5||(_templateObject5=_taggedTemplateLiteral([\"\\n  flex: 1;\\n  display: flex;\\n  flex-direction: column;\\n  justify-content: center;\\n  align-items: center;\\n  color: #999;\\n  font-size: 14px;\\n  text-align: center;\\n\"])));// ÌÜ†Ïä§Ìä∏ Ïä§ÌÉÄÏùº Ïª¥Ìè¨ÎÑåÌä∏ Ï∂îÍ∞Ä\nconst Toast=styled.div(_templateObject6||(_templateObject6=_taggedTemplateLiteral([\"\\n  position: fixed;\\n  top: 20px;\\n  right: 20px;\\n  background: #6c757d;\\n  color: white;\\n  padding: 12px 20px;\\n  border-radius: 8px;\\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);\\n  z-index: 1000;\\n  transform: \",\";\\n  transition: transform 0.3s ease;\\n  font-size: 14px;\\n  font-weight: 500;\\n\"])),props=>props.show?'translateX(0)':'translateX(120%)');const SentenceView=_ref=>{let{personaId,personaName,sentenceContent,threads,onThreadUpdate,onSwitchToMode,onGenerateNewInterpretation,selectedThread:propSelectedThread}=_ref;const[selectedThread,setSelectedThread]=useState(propSelectedThread||null);const[isLoading,setIsLoading]=useState(false);const[localThreads,setLocalThreads]=useState(threads);const chatMessagesRef=useRef(null);const messageInputRef=useRef(null);const[showToast,setShowToast]=useState(false);const[toastMessage,setToastMessage]=useState('');// Î¨∏Ïû• ÏÑ†ÌÉù Í¥ÄÎ†® ÏÉÅÌÉú\nconst[selectedSentences,setSelectedSentences]=useState(new Set());const[highlightedSentences,setHighlightedSentences]=useState(new Set());const[memos,setMemos]=useState({});const[isSentenceModeActive,setIsSentenceModeActive]=useState(false);const[editingMessageIndex,setEditingMessageIndex]=useState(null);// Î¨∏Ïû• ÌÉÄÏûÖÏùò Ïä§Î†àÎìúÎßå ÌïÑÌÑ∞ÎßÅ\nconst sentenceThreads=localThreads.filter(thread=>thread.thread_type==='sentence');useEffect(()=>{setLocalThreads(threads);},[threads]);// propSelectedThreadÍ∞Ä Î≥ÄÍ≤ΩÎêòÎ©¥ ÏÑ†ÌÉùÎêú Ïä§Î†àÎìú ÏóÖÎç∞Ïù¥Ìä∏\nuseEffect(()=>{if(propSelectedThread){setSelectedThread(propSelectedThread);}else{// Ï≤´ Î≤àÏß∏ Î¨∏Ïû• Ïä§Î†àÎìúÎ•º ÏûêÎèô ÏÑ†ÌÉù\nconst firstSentenceThread=threads.find(t=>t.thread_type==='sentence');if(firstSentenceThread&&!selectedThread){setSelectedThread(firstSentenceThread);}}},[propSelectedThread,threads]);useEffect(()=>{if(chatMessagesRef.current){chatMessagesRef.current.scrollTop=chatMessagesRef.current.scrollHeight;}},[selectedThread===null||selectedThread===void 0?void 0:selectedThread.messages]);const handleSendMessage=async message=>{if(!selectedThread)return false;setIsLoading(true);try{const response=await chatApi.chatWithThread({thread_id:selectedThread.id,user_message:message});if(response.data&&response.data.response){// Ïä§Î†àÎìú ÏóÖÎç∞Ïù¥Ìä∏\nconst updatedThreads=localThreads.map(t=>t.id===selectedThread.id?_objectSpread(_objectSpread({},t),{},{messages:[...t.messages,{role:'user',content:message,timestamp:new Date().toISOString()},response.data.response],updated_at:new Date().toISOString()}):t);setLocalThreads(updatedThreads);onThreadUpdate(updatedThreads);// ÏÑ†ÌÉùÎêú Ïä§Î†àÎìú ÏóÖÎç∞Ïù¥Ìä∏\nconst updatedThread=updatedThreads.find(t=>t.id===selectedThread.id);if(updatedThread){setSelectedThread(updatedThread);}setIsLoading(false);return true;}else{setIsLoading(false);return false;}}catch(error){console.error('Î¨∏Ïû• Ï±ÑÌåÖ Ïò§Î•ò:',error);setIsLoading(false);return false;}};const formatTime=timestamp=>{return new Date(timestamp).toLocaleTimeString('ko-KR',{hour:'2-digit',minute:'2-digit'});};// ÌÜ†Ïä§Ìä∏ Î©îÏãúÏßÄ ÌëúÏãú Ìï®Ïàò\nconst showCopyToast=message=>{setToastMessage(message);setShowToast(true);setTimeout(()=>setShowToast(false),3000);};// ÌÖçÏä§Ìä∏ Î≥µÏÇ¨ Ïú†Ìã∏Î¶¨Ìã∞ Ìï®Ïàò\nconst copyToClipboard=async(text,successMessage)=>{try{await navigator.clipboard.writeText(text);showCopyToast(successMessage);}catch(error){console.error('Î≥µÏÇ¨ Ïã§Ìå®:',error);showCopyToast('Î≥µÏÇ¨ Ïã§Ìå®');}};// Î©îÏãúÏßÄ Î≥µÏÇ¨ Í∏∞Îä•\nconst handleCopyMessage=async messageContent=>{await copyToClipboard(messageContent,'Î©îÏãúÏßÄÍ∞Ä Î≥µÏÇ¨ÎêòÏóàÏäµÎãàÎã§');};// Î©îÏãúÏßÄ ÏàòÏ†ï Í¥ÄÎ†® Ìï®ÏàòÎì§\nconst handleStartEdit=messageIndex=>{setEditingMessageIndex(messageIndex);};const handleEditMessage=async(messageIndex,newContent)=>{// Î©îÏãúÏßÄ ÏàòÏ†ï Í∏∞Îä• Íµ¨ÌòÑ ÏòàÏ†ï\nsetEditingMessageIndex(null);showCopyToast('Î©îÏãúÏßÄÍ∞Ä ÏàòÏ†ïÎêòÏóàÏäµÎãàÎã§');return true;};const handleCancelEdit=()=>{setEditingMessageIndex(null);};// Î¨∏Ïû• ÏÑ†ÌÉù Í¥ÄÎ†® Ìï®ÏàòÎì§\nconst handleToggleSelect=sentenceId=>{setSelectedSentences(prev=>{const newSet=new Set(prev);if(newSet.has(sentenceId)){newSet.delete(sentenceId);}else{newSet.add(sentenceId);}return newSet;});};const handleMemoChange=async(sentenceId,memo)=>{setMemos(prev=>_objectSpread(_objectSpread({},prev),{},{[sentenceId]:memo}));};const handleDeleteMemo=async sentenceId=>{setMemos(prev=>{const newMemos=_objectSpread({},prev);delete newMemos[sentenceId];return newMemos;});};// Ïï°ÏÖò Ìï∏Îì§Îü¨Îì§\nconst handleSunAction=async()=>{if(onGenerateNewInterpretation){onGenerateNewInterpretation();}};const handlePersonAction=async()=>{if(onSwitchToMode){onSwitchToMode('proceed');}};const handleDocumentAction=async()=>{// ÏÉàÎ°úÏö¥ Î¨∏Ïû• ÏÉùÏÑ±\nif(!selectedThread||selectedThread.messages.length===0)return;setIsLoading(true);try{// ÌòÑÏû¨ Ïä§Î†àÎìúÏùò ÏµúÏã† assistant Î©îÏãúÏßÄÎ•º Í∏∞Î∞òÏúºÎ°ú ÏÉàÎ°úÏö¥ Î¨∏Ïû• ÏÉùÏÑ±\nconst latestAssistantMessage=[...selectedThread.messages].reverse().find(msg=>msg.role==='assistant');if(latestAssistantMessage){const response=await chatApi.generateSentence({persona_id:personaId,interpretation_content:latestAssistantMessage.content});if(response.data&&response.data.sentence_content){showCopyToast('ÏÉàÎ°úÏö¥ Î¨∏Ïû•Ïù¥ ÏÉùÏÑ±ÎêòÏóàÏäµÎãàÎã§');// Ïä§Î†àÎìú Î™©Î°ù ÏÉàÎ°úÍ≥†Ïπ®\ntry{const threadsResponse=await chatApi.getPersonaThreads(personaId);if(threadsResponse.data){const updatedThreads=threadsResponse.data;setLocalThreads(updatedThreads);onThreadUpdate(updatedThreads);// ÏÉàÎ°ú ÏÉùÏÑ±Îêú Î¨∏Ïû• Ïä§Î†àÎìú ÏÑ†ÌÉù\nconst newSentenceThread=updatedThreads.filter(t=>t.thread_type==='sentence').sort((a,b)=>new Date(b.created_at).getTime()-new Date(a.created_at).getTime())[0];if(newSentenceThread){setSelectedThread(newSentenceThread);}}}catch(refreshError){console.error('Ïä§Î†àÎìú ÏÉàÎ°úÍ≥†Ïπ® Ïã§Ìå®:',refreshError);}}else{showCopyToast('Î¨∏Ïû• ÏÉùÏÑ±Ïóê Ïã§Ìå®ÌñàÏäµÎãàÎã§');}}}catch(error){console.error('Î¨∏Ïû• ÏÉùÏÑ± Ïò§Î•ò:',error);showCopyToast('Î¨∏Ïû• ÏÉùÏÑ± Ï§ë Ïò§Î•òÍ∞Ä Î∞úÏÉùÌñàÏäµÎãàÎã§');}finally{setIsLoading(false);}};// FloatingActionButton Î©îÎâ¥ Ïï°ÏÖò Ï≤òÎ¶¨\nconst handleMenuAction=async action=>{showCopyToast(\"\".concat(action,\" \\uAE30\\uB2A5\\uC774 \\uC2E4\\uD589\\uB418\\uC5C8\\uC2B5\\uB2C8\\uB2E4\"));};// Î¨∏Ïû•ÏÑ†ÌÉù Î™®Îìú ÌÜ†Í∏Ä\nconst handleToggleSentenceMode=()=>{setIsSentenceModeActive(prev=>!prev);};return/*#__PURE__*/_jsxs(Container,{children:[/*#__PURE__*/_jsx(Toast,{show:showToast,children:toastMessage}),/*#__PURE__*/_jsxs(ChatSection,{children:[/*#__PURE__*/_jsxs(ChatMessages,{ref:chatMessagesRef,children:[!selectedThread||selectedThread.messages.length===0?/*#__PURE__*/_jsxs(EmptyChat,{children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'24px',marginBottom:'8px'},children:\"\\uD83D\\uDCDD\"}),/*#__PURE__*/_jsx(\"div\",{children:\"\\uBB38\\uC7A5\\uC5D0 \\uB300\\uD574 \\uB354 \\uC790\\uC138\\uD788 \\uC9C8\\uBB38\\uD574\\uBCF4\\uC138\\uC694\"}),/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:'12px',marginTop:'4px'},children:[personaName,\"\\uC640 \\uB300\\uD654\\uB97C \\uB098\\uB20C \\uC218 \\uC788\\uC2B5\\uB2C8\\uB2E4\"]})]}):selectedThread.messages.map((message,index)=>message.role==='user'?/*#__PURE__*/_jsx(Message,{message:_objectSpread(_objectSpread({},message),{},{persona_id:undefined,persona_name:undefined}),personas:{},showActionButtons:true,onCopy:()=>handleCopyMessage(message.content),onEdit:()=>handleStartEdit(index),isEditing:editingMessageIndex===index,onEditSave:newContent=>handleEditMessage(index,newContent),onEditCancel:handleCancelEdit},\"sentence_\".concat(index)):/*#__PURE__*/_jsx(SelectableMessage,{message:_objectSpread(_objectSpread({},message),{},{persona_id:'current_persona',persona_name:personaName}),personas:{current_persona:{name:personaName,description:'',color:'#4caf50',prompt:'',category:'',subcategory:''}},selectedSentences:isSentenceModeActive?selectedSentences:new Set(),highlightedSentences:highlightedSentences,memos:memos,onToggleSelect:isSentenceModeActive?handleToggleSelect:()=>{},onMemoChange:handleMemoChange,onDeleteMemo:handleDeleteMemo,showSentenceSelector:isSentenceModeActive,showActionButtons:true,onCopy:()=>handleCopyMessage(message.content),onSunAction:handleSunAction,onPersonAction:handlePersonAction,onDocumentAction:handleDocumentAction},\"sentence_\".concat(index))),isLoading&&/*#__PURE__*/_jsx(LoadingMessage,{personaName:personaName,personaColor:\"#4caf50\",customMessage:\"\\uBB38\\uC7A5\\uC744 \\uC0DD\\uC131\\uC911...\"})]}),/*#__PURE__*/_jsx(ChatInputSection,{children:/*#__PURE__*/_jsx(MessageInput,{ref:messageInputRef,onSendMessage:handleSendMessage,disabled:isLoading||!selectedThread,placeholder:\"\".concat(personaName,\"\\uC5D0\\uAC8C \\uBB38\\uC7A5\\uC5D0 \\uB300\\uD574 \\uC9C8\\uBB38\\uD574\\uBCF4\\uC138\\uC694...\"),onToggleSentenceMode:handleToggleSentenceMode,isSentenceModeActive:isSentenceModeActive,hasSelectedSentences:selectedSentences.size>0,currentInterpretation:(selectedThread===null||selectedThread===void 0?void 0:selectedThread.content)||sentenceContent,personaId:personaId,onGenerateProceed:handlePersonAction,onGenerateSentence:handleDocumentAction})})]}),/*#__PURE__*/_jsx(FloatingActionButton,{show:isSentenceModeActive&&selectedSentences.size>0,onMenuAction:handleMenuAction,personaId:personaId,currentInterpretation:sentenceContent})]});};export default SentenceView;","map":{"version":3,"names":["React","useState","useRef","useEffect","styled","MessageInput","Message","SelectableMessage","FloatingActionButton","LoadingMessage","chatApi","jsx","_jsx","jsxs","_jsxs","Container","div","_templateObject","_taggedTemplateLiteral","ChatSection","_templateObject2","ChatMessages","_templateObject3","ChatInputSection","_templateObject4","EmptyChat","_templateObject5","Toast","_templateObject6","props","show","SentenceView","_ref","personaId","personaName","sentenceContent","threads","onThreadUpdate","onSwitchToMode","onGenerateNewInterpretation","selectedThread","propSelectedThread","setSelectedThread","isLoading","setIsLoading","localThreads","setLocalThreads","chatMessagesRef","messageInputRef","showToast","setShowToast","toastMessage","setToastMessage","selectedSentences","setSelectedSentences","Set","highlightedSentences","setHighlightedSentences","memos","setMemos","isSentenceModeActive","setIsSentenceModeActive","editingMessageIndex","setEditingMessageIndex","sentenceThreads","filter","thread","thread_type","firstSentenceThread","find","t","current","scrollTop","scrollHeight","messages","handleSendMessage","message","response","chatWithThread","thread_id","id","user_message","data","updatedThreads","map","_objectSpread","role","content","timestamp","Date","toISOString","updated_at","updatedThread","error","console","formatTime","toLocaleTimeString","hour","minute","showCopyToast","setTimeout","copyToClipboard","text","successMessage","navigator","clipboard","writeText","handleCopyMessage","messageContent","handleStartEdit","messageIndex","handleEditMessage","newContent","handleCancelEdit","handleToggleSelect","sentenceId","prev","newSet","has","delete","add","handleMemoChange","memo","handleDeleteMemo","newMemos","handleSunAction","handlePersonAction","handleDocumentAction","length","latestAssistantMessage","reverse","msg","generateSentence","persona_id","interpretation_content","sentence_content","threadsResponse","getPersonaThreads","newSentenceThread","sort","a","b","created_at","getTime","refreshError","handleMenuAction","action","concat","handleToggleSentenceMode","children","ref","style","fontSize","marginBottom","marginTop","index","undefined","persona_name","personas","showActionButtons","onCopy","onEdit","isEditing","onEditSave","onEditCancel","current_persona","name","description","color","prompt","category","subcategory","onToggleSelect","onMemoChange","onDeleteMemo","showSentenceSelector","onSunAction","onPersonAction","onDocumentAction","personaColor","customMessage","onSendMessage","disabled","placeholder","onToggleSentenceMode","hasSelectedSentences","size","currentInterpretation","onGenerateProceed","onGenerateSentence","onMenuAction"],"sources":["C:/Users/sungh/Desktop/chat_work/frontend/src/features/training/components/SentenceView.tsx"],"sourcesContent":["import React, { useState, useRef, useEffect } from 'react';\nimport styled from 'styled-components';\nimport MessageInput, { MessageInputRef } from '../../shared/components/MessageInput';\nimport Message from '../../shared/components/Message';\nimport SelectableMessage from './SelectableMessage';\nimport FloatingActionButton from '../../shared/components/FloatingActionButton';\nimport LoadingMessage from '../../shared/components/LoadingMessage';\nimport { chatApi } from '../../shared/api/chatApi';\nimport { TrainingThread } from '../../shared/types';\nimport { sentenceApi } from '../api/sentenceApi';\n\ninterface SentenceViewProps {\n  personaId: string;\n  personaName: string;\n  sentenceContent: string;\n  threads: TrainingThread[];\n  onThreadUpdate: (threads: TrainingThread[]) => void;\n  onSwitchToMode?: (mode: 'interpretation' | 'proceed') => void;\n  onGenerateNewInterpretation?: () => void;\n  selectedThread?: TrainingThread | null;\n}\n\nconst Container = styled.div`\n  display: flex;\n  flex-direction: column;\n  height: 100%;\n  background: white;\n`;\n\nconst ChatSection = styled.div`\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  overflow: hidden;\n`;\n\nconst ChatMessages = styled.div`\n  flex: 1;\n  overflow-y: auto;\n  padding: 20px;\n  display: flex;\n  flex-direction: column;\n  gap: 16px;\n`;\n\nconst ChatInputSection = styled.div`\n  padding: 16px 20px;\n  border-top: none;\n  background: #ffffff;\n`;\n\nconst EmptyChat = styled.div`\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  color: #999;\n  font-size: 14px;\n  text-align: center;\n`;\n\n// ÌÜ†Ïä§Ìä∏ Ïä§ÌÉÄÏùº Ïª¥Ìè¨ÎÑåÌä∏ Ï∂îÍ∞Ä\nconst Toast = styled.div<{ show: boolean }>`\n  position: fixed;\n  top: 20px;\n  right: 20px;\n  background: #6c757d;\n  color: white;\n  padding: 12px 20px;\n  border-radius: 8px;\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);\n  z-index: 1000;\n  transform: ${props => props.show ? 'translateX(0)' : 'translateX(120%)'};\n  transition: transform 0.3s ease;\n  font-size: 14px;\n  font-weight: 500;\n`;\n\nconst SentenceView: React.FC<SentenceViewProps> = ({\n  personaId,\n  personaName,\n  sentenceContent,\n  threads,\n  onThreadUpdate,\n  onSwitchToMode,\n  onGenerateNewInterpretation,\n  selectedThread: propSelectedThread,\n}) => {\n  const [selectedThread, setSelectedThread] = useState<TrainingThread | null>(propSelectedThread || null);\n  const [isLoading, setIsLoading] = useState(false);\n  const [localThreads, setLocalThreads] = useState<TrainingThread[]>(threads);\n  const chatMessagesRef = useRef<HTMLDivElement>(null);\n  const messageInputRef = useRef<MessageInputRef>(null);\n  const [showToast, setShowToast] = useState(false);\n  const [toastMessage, setToastMessage] = useState('');\n  \n  // Î¨∏Ïû• ÏÑ†ÌÉù Í¥ÄÎ†® ÏÉÅÌÉú\n  const [selectedSentences, setSelectedSentences] = useState<Set<string>>(new Set());\n  const [highlightedSentences, setHighlightedSentences] = useState<Set<string>>(new Set());\n  const [memos, setMemos] = useState<Record<string, string>>({});\n  const [isSentenceModeActive, setIsSentenceModeActive] = useState(false);\n  const [editingMessageIndex, setEditingMessageIndex] = useState<number | null>(null);\n\n  // Î¨∏Ïû• ÌÉÄÏûÖÏùò Ïä§Î†àÎìúÎßå ÌïÑÌÑ∞ÎßÅ\n  const sentenceThreads = localThreads.filter(thread => thread.thread_type === 'sentence');\n\n  useEffect(() => {\n    setLocalThreads(threads);\n  }, [threads]);\n\n  // propSelectedThreadÍ∞Ä Î≥ÄÍ≤ΩÎêòÎ©¥ ÏÑ†ÌÉùÎêú Ïä§Î†àÎìú ÏóÖÎç∞Ïù¥Ìä∏\n  useEffect(() => {\n    if (propSelectedThread) {\n      setSelectedThread(propSelectedThread);\n    } else {\n      // Ï≤´ Î≤àÏß∏ Î¨∏Ïû• Ïä§Î†àÎìúÎ•º ÏûêÎèô ÏÑ†ÌÉù\n      const firstSentenceThread = threads.find(t => t.thread_type === 'sentence');\n      if (firstSentenceThread && !selectedThread) {\n        setSelectedThread(firstSentenceThread);\n      }\n    }\n  }, [propSelectedThread, threads]);\n\n  useEffect(() => {\n    if (chatMessagesRef.current) {\n      chatMessagesRef.current.scrollTop = chatMessagesRef.current.scrollHeight;\n    }\n  }, [selectedThread?.messages]);\n\n  const handleSendMessage = async (message: string): Promise<boolean> => {\n    if (!selectedThread) return false;\n\n    setIsLoading(true);\n    try {\n      const response = await chatApi.chatWithThread({\n        thread_id: selectedThread.id,\n        user_message: message\n      });\n\n      if (response.data && response.data.response) {\n        // Ïä§Î†àÎìú ÏóÖÎç∞Ïù¥Ìä∏\n        const updatedThreads = localThreads.map(t => \n          t.id === selectedThread.id \n            ? {\n                ...t,\n                messages: [...t.messages, \n                  {\n                    role: 'user' as const,\n                    content: message,\n                    timestamp: new Date().toISOString()\n                  },\n                  response.data!.response\n                ],\n                updated_at: new Date().toISOString()\n              }\n            : t\n        );\n        \n        setLocalThreads(updatedThreads);\n        onThreadUpdate(updatedThreads);\n        \n        // ÏÑ†ÌÉùÎêú Ïä§Î†àÎìú ÏóÖÎç∞Ïù¥Ìä∏\n        const updatedThread = updatedThreads.find(t => t.id === selectedThread.id);\n        if (updatedThread) {\n          setSelectedThread(updatedThread);\n        }\n        \n        setIsLoading(false);\n        return true;\n      } else {\n        setIsLoading(false);\n        return false;\n      }\n    } catch (error) {\n      console.error('Î¨∏Ïû• Ï±ÑÌåÖ Ïò§Î•ò:', error);\n      setIsLoading(false);\n      return false;\n    }\n  };\n\n  const formatTime = (timestamp: string) => {\n    return new Date(timestamp).toLocaleTimeString('ko-KR', {\n      hour: '2-digit',\n      minute: '2-digit',\n    });\n  };\n\n  // ÌÜ†Ïä§Ìä∏ Î©îÏãúÏßÄ ÌëúÏãú Ìï®Ïàò\n  const showCopyToast = (message: string) => {\n    setToastMessage(message);\n    setShowToast(true);\n    setTimeout(() => setShowToast(false), 3000);\n  };\n\n  // ÌÖçÏä§Ìä∏ Î≥µÏÇ¨ Ïú†Ìã∏Î¶¨Ìã∞ Ìï®Ïàò\n  const copyToClipboard = async (text: string, successMessage: string) => {\n    try {\n      await navigator.clipboard.writeText(text);\n      showCopyToast(successMessage);\n    } catch (error) {\n      console.error('Î≥µÏÇ¨ Ïã§Ìå®:', error);\n      showCopyToast('Î≥µÏÇ¨ Ïã§Ìå®');\n    }\n  };\n\n  // Î©îÏãúÏßÄ Î≥µÏÇ¨ Í∏∞Îä•\n  const handleCopyMessage = async (messageContent: string) => {\n    await copyToClipboard(messageContent, 'Î©îÏãúÏßÄÍ∞Ä Î≥µÏÇ¨ÎêòÏóàÏäµÎãàÎã§');\n  };\n\n  // Î©îÏãúÏßÄ ÏàòÏ†ï Í¥ÄÎ†® Ìï®ÏàòÎì§\n  const handleStartEdit = (messageIndex: number) => {\n    setEditingMessageIndex(messageIndex);\n  };\n\n  const handleEditMessage = async (messageIndex: number, newContent: string) => {\n    // Î©îÏãúÏßÄ ÏàòÏ†ï Í∏∞Îä• Íµ¨ÌòÑ ÏòàÏ†ï\n    setEditingMessageIndex(null);\n    showCopyToast('Î©îÏãúÏßÄÍ∞Ä ÏàòÏ†ïÎêòÏóàÏäµÎãàÎã§');\n    return true;\n  };\n\n  const handleCancelEdit = () => {\n    setEditingMessageIndex(null);\n  };\n\n  // Î¨∏Ïû• ÏÑ†ÌÉù Í¥ÄÎ†® Ìï®ÏàòÎì§\n  const handleToggleSelect = (sentenceId: string) => {\n    setSelectedSentences(prev => {\n      const newSet = new Set(prev);\n      if (newSet.has(sentenceId)) {\n        newSet.delete(sentenceId);\n      } else {\n        newSet.add(sentenceId);\n      }\n      return newSet;\n    });\n  };\n\n  const handleMemoChange = async (sentenceId: string, memo: string) => {\n    setMemos(prev => ({ ...prev, [sentenceId]: memo }));\n  };\n\n  const handleDeleteMemo = async (sentenceId: string) => {\n    setMemos(prev => {\n      const newMemos = { ...prev };\n      delete newMemos[sentenceId];\n      return newMemos;\n    });\n  };\n\n  // Ïï°ÏÖò Ìï∏Îì§Îü¨Îì§\n  const handleSunAction = async () => {\n    if (onGenerateNewInterpretation) {\n      onGenerateNewInterpretation();\n    }\n  };\n\n  const handlePersonAction = async () => {\n    if (onSwitchToMode) {\n      onSwitchToMode('proceed');\n    }\n  };\n\n  const handleDocumentAction = async () => {\n    // ÏÉàÎ°úÏö¥ Î¨∏Ïû• ÏÉùÏÑ±\n    if (!selectedThread || selectedThread.messages.length === 0) return;\n    \n    setIsLoading(true);\n    try {\n      // ÌòÑÏû¨ Ïä§Î†àÎìúÏùò ÏµúÏã† assistant Î©îÏãúÏßÄÎ•º Í∏∞Î∞òÏúºÎ°ú ÏÉàÎ°úÏö¥ Î¨∏Ïû• ÏÉùÏÑ±\n      const latestAssistantMessage = [...selectedThread.messages]\n        .reverse()\n        .find(msg => msg.role === 'assistant');\n      \n      if (latestAssistantMessage) {\n        const response = await chatApi.generateSentence({\n          persona_id: personaId,\n          interpretation_content: latestAssistantMessage.content\n        });\n\n        if (response.data && response.data.sentence_content) {\n          showCopyToast('ÏÉàÎ°úÏö¥ Î¨∏Ïû•Ïù¥ ÏÉùÏÑ±ÎêòÏóàÏäµÎãàÎã§');\n          \n          // Ïä§Î†àÎìú Î™©Î°ù ÏÉàÎ°úÍ≥†Ïπ®\n          try {\n            const threadsResponse = await chatApi.getPersonaThreads(personaId);\n            if (threadsResponse.data) {\n              const updatedThreads = threadsResponse.data;\n              setLocalThreads(updatedThreads);\n              onThreadUpdate(updatedThreads);\n              \n              // ÏÉàÎ°ú ÏÉùÏÑ±Îêú Î¨∏Ïû• Ïä§Î†àÎìú ÏÑ†ÌÉù\n              const newSentenceThread = updatedThreads\n                .filter(t => t.thread_type === 'sentence')\n                .sort((a, b) => new Date(b.created_at).getTime() - new Date(a.created_at).getTime())[0];\n              \n              if (newSentenceThread) {\n                setSelectedThread(newSentenceThread);\n              }\n            }\n          } catch (refreshError) {\n            console.error('Ïä§Î†àÎìú ÏÉàÎ°úÍ≥†Ïπ® Ïã§Ìå®:', refreshError);\n          }\n        } else {\n          showCopyToast('Î¨∏Ïû• ÏÉùÏÑ±Ïóê Ïã§Ìå®ÌñàÏäµÎãàÎã§');\n        }\n      }\n    } catch (error) {\n      console.error('Î¨∏Ïû• ÏÉùÏÑ± Ïò§Î•ò:', error);\n      showCopyToast('Î¨∏Ïû• ÏÉùÏÑ± Ï§ë Ïò§Î•òÍ∞Ä Î∞úÏÉùÌñàÏäµÎãàÎã§');\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  // FloatingActionButton Î©îÎâ¥ Ïï°ÏÖò Ï≤òÎ¶¨\n  const handleMenuAction = async (action: 'sendToInput' | 'saveToVault' | 'addMemo' | 'highlight' | 'copy' | 'generateProceed' | 'generateSentence') => {\n    showCopyToast(`${action} Í∏∞Îä•Ïù¥ Ïã§ÌñâÎêòÏóàÏäµÎãàÎã§`);\n  };\n\n  // Î¨∏Ïû•ÏÑ†ÌÉù Î™®Îìú ÌÜ†Í∏Ä\n  const handleToggleSentenceMode = () => {\n    setIsSentenceModeActive(prev => !prev);\n  };\n\n  return (\n    <Container>\n      <Toast show={showToast}>\n        {toastMessage}\n      </Toast>\n      \n      <ChatSection>\n        <ChatMessages ref={chatMessagesRef}>\n          {!selectedThread || selectedThread.messages.length === 0 ? (\n            <EmptyChat>\n              <div style={{ fontSize: '24px', marginBottom: '8px' }}>üìù</div>\n              <div>Î¨∏Ïû•Ïóê ÎåÄÌï¥ Îçî ÏûêÏÑ∏Ìûà ÏßàÎ¨∏Ìï¥Î≥¥ÏÑ∏Ïöî</div>\n              <div style={{ fontSize: '12px', marginTop: '4px' }}>\n                {personaName}ÏôÄ ÎåÄÌôîÎ•º ÎÇòÎàå Ïàò ÏûàÏäµÎãàÎã§\n              </div>\n            </EmptyChat>\n          ) : (\n            selectedThread.messages.map((message, index) => \n              message.role === 'user' ? (\n                <Message\n                  key={`sentence_${index}`}\n                  message={{\n                    ...message,\n                    persona_id: undefined,\n                    persona_name: undefined,\n                  }}\n                  personas={{}}\n                  showActionButtons={true}\n                  onCopy={() => handleCopyMessage(message.content)}\n                  onEdit={() => handleStartEdit(index)}\n                  isEditing={editingMessageIndex === index}\n                  onEditSave={(newContent) => handleEditMessage(index, newContent)}\n                  onEditCancel={handleCancelEdit}\n                />\n              ) : (\n                <SelectableMessage\n                  key={`sentence_${index}`}\n                  message={{\n                    ...message,\n                    persona_id: 'current_persona',\n                    persona_name: personaName,\n                  }}\n                  personas={{\n                    current_persona: {\n                      name: personaName,\n                      description: '',\n                      color: '#4caf50',\n                      prompt: '',\n                      category: '',\n                      subcategory: ''\n                    }\n                  }}\n                  selectedSentences={isSentenceModeActive ? selectedSentences : new Set()}\n                  highlightedSentences={highlightedSentences}\n                  memos={memos}\n                  onToggleSelect={isSentenceModeActive ? handleToggleSelect : () => {}}\n                  onMemoChange={handleMemoChange}\n                  onDeleteMemo={handleDeleteMemo}\n                  showSentenceSelector={isSentenceModeActive}\n                  showActionButtons={true}\n                  onCopy={() => handleCopyMessage(message.content)}\n                  onSunAction={handleSunAction}\n                  onPersonAction={handlePersonAction}\n                  onDocumentAction={handleDocumentAction}\n                />\n              )\n            )\n          )}\n          \n          {isLoading && (\n            <LoadingMessage \n              personaName={personaName}\n              personaColor=\"#4caf50\"\n              customMessage=\"Î¨∏Ïû•ÏùÑ ÏÉùÏÑ±Ï§ë...\"\n            />\n          )}\n        </ChatMessages>\n\n        <ChatInputSection>\n          <MessageInput\n            ref={messageInputRef}\n            onSendMessage={handleSendMessage}\n            disabled={isLoading || !selectedThread}\n            placeholder={`${personaName}ÏóêÍ≤å Î¨∏Ïû•Ïóê ÎåÄÌï¥ ÏßàÎ¨∏Ìï¥Î≥¥ÏÑ∏Ïöî...`}\n            onToggleSentenceMode={handleToggleSentenceMode}\n            isSentenceModeActive={isSentenceModeActive}\n            hasSelectedSentences={selectedSentences.size > 0}\n            currentInterpretation={selectedThread?.content || sentenceContent}\n            personaId={personaId}\n            onGenerateProceed={handlePersonAction}\n            onGenerateSentence={handleDocumentAction}\n          />\n        </ChatInputSection>\n      </ChatSection>\n      \n      <FloatingActionButton\n        show={isSentenceModeActive && selectedSentences.size > 0}\n        onMenuAction={handleMenuAction}\n        personaId={personaId}\n        currentInterpretation={sentenceContent}\n      />\n    </Container>\n  );\n};\n\nexport default SentenceView; "],"mappings":"sXAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,MAAM,CAAEC,SAAS,KAAQ,OAAO,CAC1D,MAAO,CAAAC,MAAM,KAAM,mBAAmB,CACtC,MAAO,CAAAC,YAAY,KAA2B,sCAAsC,CACpF,MAAO,CAAAC,OAAO,KAAM,iCAAiC,CACrD,MAAO,CAAAC,iBAAiB,KAAM,qBAAqB,CACnD,MAAO,CAAAC,oBAAoB,KAAM,8CAA8C,CAC/E,MAAO,CAAAC,cAAc,KAAM,wCAAwC,CACnE,OAASC,OAAO,KAAQ,0BAA0B,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAenD,KAAM,CAAAC,SAAS,CAAGX,MAAM,CAACY,GAAG,CAAAC,eAAA,GAAAA,eAAA,CAAAC,sBAAA,8FAK3B,CAED,KAAM,CAAAC,WAAW,CAAGf,MAAM,CAACY,GAAG,CAAAI,gBAAA,GAAAA,gBAAA,CAAAF,sBAAA,wFAK7B,CAED,KAAM,CAAAG,YAAY,CAAGjB,MAAM,CAACY,GAAG,CAAAM,gBAAA,GAAAA,gBAAA,CAAAJ,sBAAA,wHAO9B,CAED,KAAM,CAAAK,gBAAgB,CAAGnB,MAAM,CAACY,GAAG,CAAAQ,gBAAA,GAAAA,gBAAA,CAAAN,sBAAA,8EAIlC,CAED,KAAM,CAAAO,SAAS,CAAGrB,MAAM,CAACY,GAAG,CAAAU,gBAAA,GAAAA,gBAAA,CAAAR,sBAAA,kLAS3B,CAED;AACA,KAAM,CAAAS,KAAK,CAAGvB,MAAM,CAACY,GAAG,CAAAY,gBAAA,GAAAA,gBAAA,CAAAV,sBAAA,mTAUTW,KAAK,EAAIA,KAAK,CAACC,IAAI,CAAG,eAAe,CAAG,kBAAkB,CAIxE,CAED,KAAM,CAAAC,YAAyC,CAAGC,IAAA,EAS5C,IAT6C,CACjDC,SAAS,CACTC,WAAW,CACXC,eAAe,CACfC,OAAO,CACPC,cAAc,CACdC,cAAc,CACdC,2BAA2B,CAC3BC,cAAc,CAAEC,kBAClB,CAAC,CAAAT,IAAA,CACC,KAAM,CAACQ,cAAc,CAAEE,iBAAiB,CAAC,CAAGzC,QAAQ,CAAwBwC,kBAAkB,EAAI,IAAI,CAAC,CACvG,KAAM,CAACE,SAAS,CAAEC,YAAY,CAAC,CAAG3C,QAAQ,CAAC,KAAK,CAAC,CACjD,KAAM,CAAC4C,YAAY,CAAEC,eAAe,CAAC,CAAG7C,QAAQ,CAAmBmC,OAAO,CAAC,CAC3E,KAAM,CAAAW,eAAe,CAAG7C,MAAM,CAAiB,IAAI,CAAC,CACpD,KAAM,CAAA8C,eAAe,CAAG9C,MAAM,CAAkB,IAAI,CAAC,CACrD,KAAM,CAAC+C,SAAS,CAAEC,YAAY,CAAC,CAAGjD,QAAQ,CAAC,KAAK,CAAC,CACjD,KAAM,CAACkD,YAAY,CAAEC,eAAe,CAAC,CAAGnD,QAAQ,CAAC,EAAE,CAAC,CAEpD;AACA,KAAM,CAACoD,iBAAiB,CAAEC,oBAAoB,CAAC,CAAGrD,QAAQ,CAAc,GAAI,CAAAsD,GAAG,CAAC,CAAC,CAAC,CAClF,KAAM,CAACC,oBAAoB,CAAEC,uBAAuB,CAAC,CAAGxD,QAAQ,CAAc,GAAI,CAAAsD,GAAG,CAAC,CAAC,CAAC,CACxF,KAAM,CAACG,KAAK,CAAEC,QAAQ,CAAC,CAAG1D,QAAQ,CAAyB,CAAC,CAAC,CAAC,CAC9D,KAAM,CAAC2D,oBAAoB,CAAEC,uBAAuB,CAAC,CAAG5D,QAAQ,CAAC,KAAK,CAAC,CACvE,KAAM,CAAC6D,mBAAmB,CAAEC,sBAAsB,CAAC,CAAG9D,QAAQ,CAAgB,IAAI,CAAC,CAEnF;AACA,KAAM,CAAA+D,eAAe,CAAGnB,YAAY,CAACoB,MAAM,CAACC,MAAM,EAAIA,MAAM,CAACC,WAAW,GAAK,UAAU,CAAC,CAExFhE,SAAS,CAAC,IAAM,CACd2C,eAAe,CAACV,OAAO,CAAC,CAC1B,CAAC,CAAE,CAACA,OAAO,CAAC,CAAC,CAEb;AACAjC,SAAS,CAAC,IAAM,CACd,GAAIsC,kBAAkB,CAAE,CACtBC,iBAAiB,CAACD,kBAAkB,CAAC,CACvC,CAAC,IAAM,CACL;AACA,KAAM,CAAA2B,mBAAmB,CAAGhC,OAAO,CAACiC,IAAI,CAACC,CAAC,EAAIA,CAAC,CAACH,WAAW,GAAK,UAAU,CAAC,CAC3E,GAAIC,mBAAmB,EAAI,CAAC5B,cAAc,CAAE,CAC1CE,iBAAiB,CAAC0B,mBAAmB,CAAC,CACxC,CACF,CACF,CAAC,CAAE,CAAC3B,kBAAkB,CAAEL,OAAO,CAAC,CAAC,CAEjCjC,SAAS,CAAC,IAAM,CACd,GAAI4C,eAAe,CAACwB,OAAO,CAAE,CAC3BxB,eAAe,CAACwB,OAAO,CAACC,SAAS,CAAGzB,eAAe,CAACwB,OAAO,CAACE,YAAY,CAC1E,CACF,CAAC,CAAE,CAACjC,cAAc,SAAdA,cAAc,iBAAdA,cAAc,CAAEkC,QAAQ,CAAC,CAAC,CAE9B,KAAM,CAAAC,iBAAiB,CAAG,KAAO,CAAAC,OAAe,EAAuB,CACrE,GAAI,CAACpC,cAAc,CAAE,MAAO,MAAK,CAEjCI,YAAY,CAAC,IAAI,CAAC,CAClB,GAAI,CACF,KAAM,CAAAiC,QAAQ,CAAG,KAAM,CAAAnE,OAAO,CAACoE,cAAc,CAAC,CAC5CC,SAAS,CAAEvC,cAAc,CAACwC,EAAE,CAC5BC,YAAY,CAAEL,OAChB,CAAC,CAAC,CAEF,GAAIC,QAAQ,CAACK,IAAI,EAAIL,QAAQ,CAACK,IAAI,CAACL,QAAQ,CAAE,CAC3C;AACA,KAAM,CAAAM,cAAc,CAAGtC,YAAY,CAACuC,GAAG,CAACd,CAAC,EACvCA,CAAC,CAACU,EAAE,GAAKxC,cAAc,CAACwC,EAAE,CAAAK,aAAA,CAAAA,aAAA,IAEjBf,CAAC,MACJI,QAAQ,CAAE,CAAC,GAAGJ,CAAC,CAACI,QAAQ,CACtB,CACEY,IAAI,CAAE,MAAe,CACrBC,OAAO,CAAEX,OAAO,CAChBY,SAAS,CAAE,GAAI,CAAAC,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC,CACpC,CAAC,CACDb,QAAQ,CAACK,IAAI,CAAEL,QAAQ,CACxB,CACDc,UAAU,CAAE,GAAI,CAAAF,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC,GAEtCpB,CACN,CAAC,CAEDxB,eAAe,CAACqC,cAAc,CAAC,CAC/B9C,cAAc,CAAC8C,cAAc,CAAC,CAE9B;AACA,KAAM,CAAAS,aAAa,CAAGT,cAAc,CAACd,IAAI,CAACC,CAAC,EAAIA,CAAC,CAACU,EAAE,GAAKxC,cAAc,CAACwC,EAAE,CAAC,CAC1E,GAAIY,aAAa,CAAE,CACjBlD,iBAAiB,CAACkD,aAAa,CAAC,CAClC,CAEAhD,YAAY,CAAC,KAAK,CAAC,CACnB,MAAO,KAAI,CACb,CAAC,IAAM,CACLA,YAAY,CAAC,KAAK,CAAC,CACnB,MAAO,MAAK,CACd,CACF,CAAE,MAAOiD,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAAC,WAAW,CAAEA,KAAK,CAAC,CACjCjD,YAAY,CAAC,KAAK,CAAC,CACnB,MAAO,MAAK,CACd,CACF,CAAC,CAED,KAAM,CAAAmD,UAAU,CAAIP,SAAiB,EAAK,CACxC,MAAO,IAAI,CAAAC,IAAI,CAACD,SAAS,CAAC,CAACQ,kBAAkB,CAAC,OAAO,CAAE,CACrDC,IAAI,CAAE,SAAS,CACfC,MAAM,CAAE,SACV,CAAC,CAAC,CACJ,CAAC,CAED;AACA,KAAM,CAAAC,aAAa,CAAIvB,OAAe,EAAK,CACzCxB,eAAe,CAACwB,OAAO,CAAC,CACxB1B,YAAY,CAAC,IAAI,CAAC,CAClBkD,UAAU,CAAC,IAAMlD,YAAY,CAAC,KAAK,CAAC,CAAE,IAAI,CAAC,CAC7C,CAAC,CAED;AACA,KAAM,CAAAmD,eAAe,CAAG,KAAAA,CAAOC,IAAY,CAAEC,cAAsB,GAAK,CACtE,GAAI,CACF,KAAM,CAAAC,SAAS,CAACC,SAAS,CAACC,SAAS,CAACJ,IAAI,CAAC,CACzCH,aAAa,CAACI,cAAc,CAAC,CAC/B,CAAE,MAAOV,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAAC,QAAQ,CAAEA,KAAK,CAAC,CAC9BM,aAAa,CAAC,OAAO,CAAC,CACxB,CACF,CAAC,CAED;AACA,KAAM,CAAAQ,iBAAiB,CAAG,KAAO,CAAAC,cAAsB,EAAK,CAC1D,KAAM,CAAAP,eAAe,CAACO,cAAc,CAAE,cAAc,CAAC,CACvD,CAAC,CAED;AACA,KAAM,CAAAC,eAAe,CAAIC,YAAoB,EAAK,CAChD/C,sBAAsB,CAAC+C,YAAY,CAAC,CACtC,CAAC,CAED,KAAM,CAAAC,iBAAiB,CAAG,KAAAA,CAAOD,YAAoB,CAAEE,UAAkB,GAAK,CAC5E;AACAjD,sBAAsB,CAAC,IAAI,CAAC,CAC5BoC,aAAa,CAAC,cAAc,CAAC,CAC7B,MAAO,KAAI,CACb,CAAC,CAED,KAAM,CAAAc,gBAAgB,CAAGA,CAAA,GAAM,CAC7BlD,sBAAsB,CAAC,IAAI,CAAC,CAC9B,CAAC,CAED;AACA,KAAM,CAAAmD,kBAAkB,CAAIC,UAAkB,EAAK,CACjD7D,oBAAoB,CAAC8D,IAAI,EAAI,CAC3B,KAAM,CAAAC,MAAM,CAAG,GAAI,CAAA9D,GAAG,CAAC6D,IAAI,CAAC,CAC5B,GAAIC,MAAM,CAACC,GAAG,CAACH,UAAU,CAAC,CAAE,CAC1BE,MAAM,CAACE,MAAM,CAACJ,UAAU,CAAC,CAC3B,CAAC,IAAM,CACLE,MAAM,CAACG,GAAG,CAACL,UAAU,CAAC,CACxB,CACA,MAAO,CAAAE,MAAM,CACf,CAAC,CAAC,CACJ,CAAC,CAED,KAAM,CAAAI,gBAAgB,CAAG,KAAAA,CAAON,UAAkB,CAAEO,IAAY,GAAK,CACnE/D,QAAQ,CAACyD,IAAI,EAAA/B,aAAA,CAAAA,aAAA,IAAU+B,IAAI,MAAE,CAACD,UAAU,EAAGO,IAAI,EAAG,CAAC,CACrD,CAAC,CAED,KAAM,CAAAC,gBAAgB,CAAG,KAAO,CAAAR,UAAkB,EAAK,CACrDxD,QAAQ,CAACyD,IAAI,EAAI,CACf,KAAM,CAAAQ,QAAQ,CAAAvC,aAAA,IAAQ+B,IAAI,CAAE,CAC5B,MAAO,CAAAQ,QAAQ,CAACT,UAAU,CAAC,CAC3B,MAAO,CAAAS,QAAQ,CACjB,CAAC,CAAC,CACJ,CAAC,CAED;AACA,KAAM,CAAAC,eAAe,CAAG,KAAAA,CAAA,GAAY,CAClC,GAAItF,2BAA2B,CAAE,CAC/BA,2BAA2B,CAAC,CAAC,CAC/B,CACF,CAAC,CAED,KAAM,CAAAuF,kBAAkB,CAAG,KAAAA,CAAA,GAAY,CACrC,GAAIxF,cAAc,CAAE,CAClBA,cAAc,CAAC,SAAS,CAAC,CAC3B,CACF,CAAC,CAED,KAAM,CAAAyF,oBAAoB,CAAG,KAAAA,CAAA,GAAY,CACvC;AACA,GAAI,CAACvF,cAAc,EAAIA,cAAc,CAACkC,QAAQ,CAACsD,MAAM,GAAK,CAAC,CAAE,OAE7DpF,YAAY,CAAC,IAAI,CAAC,CAClB,GAAI,CACF;AACA,KAAM,CAAAqF,sBAAsB,CAAG,CAAC,GAAGzF,cAAc,CAACkC,QAAQ,CAAC,CACxDwD,OAAO,CAAC,CAAC,CACT7D,IAAI,CAAC8D,GAAG,EAAIA,GAAG,CAAC7C,IAAI,GAAK,WAAW,CAAC,CAExC,GAAI2C,sBAAsB,CAAE,CAC1B,KAAM,CAAApD,QAAQ,CAAG,KAAM,CAAAnE,OAAO,CAAC0H,gBAAgB,CAAC,CAC9CC,UAAU,CAAEpG,SAAS,CACrBqG,sBAAsB,CAAEL,sBAAsB,CAAC1C,OACjD,CAAC,CAAC,CAEF,GAAIV,QAAQ,CAACK,IAAI,EAAIL,QAAQ,CAACK,IAAI,CAACqD,gBAAgB,CAAE,CACnDpC,aAAa,CAAC,iBAAiB,CAAC,CAEhC;AACA,GAAI,CACF,KAAM,CAAAqC,eAAe,CAAG,KAAM,CAAA9H,OAAO,CAAC+H,iBAAiB,CAACxG,SAAS,CAAC,CAClE,GAAIuG,eAAe,CAACtD,IAAI,CAAE,CACxB,KAAM,CAAAC,cAAc,CAAGqD,eAAe,CAACtD,IAAI,CAC3CpC,eAAe,CAACqC,cAAc,CAAC,CAC/B9C,cAAc,CAAC8C,cAAc,CAAC,CAE9B;AACA,KAAM,CAAAuD,iBAAiB,CAAGvD,cAAc,CACrClB,MAAM,CAACK,CAAC,EAAIA,CAAC,CAACH,WAAW,GAAK,UAAU,CAAC,CACzCwE,IAAI,CAAC,CAACC,CAAC,CAAEC,CAAC,GAAK,GAAI,CAAApD,IAAI,CAACoD,CAAC,CAACC,UAAU,CAAC,CAACC,OAAO,CAAC,CAAC,CAAG,GAAI,CAAAtD,IAAI,CAACmD,CAAC,CAACE,UAAU,CAAC,CAACC,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAEzF,GAAIL,iBAAiB,CAAE,CACrBhG,iBAAiB,CAACgG,iBAAiB,CAAC,CACtC,CACF,CACF,CAAE,MAAOM,YAAY,CAAE,CACrBlD,OAAO,CAACD,KAAK,CAAC,cAAc,CAAEmD,YAAY,CAAC,CAC7C,CACF,CAAC,IAAM,CACL7C,aAAa,CAAC,eAAe,CAAC,CAChC,CACF,CACF,CAAE,MAAON,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAAC,WAAW,CAAEA,KAAK,CAAC,CACjCM,aAAa,CAAC,oBAAoB,CAAC,CACrC,CAAC,OAAS,CACRvD,YAAY,CAAC,KAAK,CAAC,CACrB,CACF,CAAC,CAED;AACA,KAAM,CAAAqG,gBAAgB,CAAG,KAAO,CAAAC,MAAiH,EAAK,CACpJ/C,aAAa,IAAAgD,MAAA,CAAID,MAAM,kEAAc,CAAC,CACxC,CAAC,CAED;AACA,KAAM,CAAAE,wBAAwB,CAAGA,CAAA,GAAM,CACrCvF,uBAAuB,CAACuD,IAAI,EAAI,CAACA,IAAI,CAAC,CACxC,CAAC,CAED,mBACEtG,KAAA,CAACC,SAAS,EAAAsI,QAAA,eACRzI,IAAA,CAACe,KAAK,EAACG,IAAI,CAAEmB,SAAU,CAAAoG,QAAA,CACpBlG,YAAY,CACR,CAAC,cAERrC,KAAA,CAACK,WAAW,EAAAkI,QAAA,eACVvI,KAAA,CAACO,YAAY,EAACiI,GAAG,CAAEvG,eAAgB,CAAAsG,QAAA,EAChC,CAAC7G,cAAc,EAAIA,cAAc,CAACkC,QAAQ,CAACsD,MAAM,GAAK,CAAC,cACtDlH,KAAA,CAACW,SAAS,EAAA4H,QAAA,eACRzI,IAAA,QAAK2I,KAAK,CAAE,CAAEC,QAAQ,CAAE,MAAM,CAAEC,YAAY,CAAE,KAAM,CAAE,CAAAJ,QAAA,CAAC,cAAE,CAAK,CAAC,cAC/DzI,IAAA,QAAAyI,QAAA,CAAK,gGAAmB,CAAK,CAAC,cAC9BvI,KAAA,QAAKyI,KAAK,CAAE,CAAEC,QAAQ,CAAE,MAAM,CAAEE,SAAS,CAAE,KAAM,CAAE,CAAAL,QAAA,EAChDnH,WAAW,CAAC,wEACf,EAAK,CAAC,EACG,CAAC,CAEZM,cAAc,CAACkC,QAAQ,CAACU,GAAG,CAAC,CAACR,OAAO,CAAE+E,KAAK,GACzC/E,OAAO,CAACU,IAAI,GAAK,MAAM,cACrB1E,IAAA,CAACN,OAAO,EAENsE,OAAO,CAAAS,aAAA,CAAAA,aAAA,IACFT,OAAO,MACVyD,UAAU,CAAEuB,SAAS,CACrBC,YAAY,CAAED,SAAS,EACvB,CACFE,QAAQ,CAAE,CAAC,CAAE,CACbC,iBAAiB,CAAE,IAAK,CACxBC,MAAM,CAAEA,CAAA,GAAMrD,iBAAiB,CAAC/B,OAAO,CAACW,OAAO,CAAE,CACjD0E,MAAM,CAAEA,CAAA,GAAMpD,eAAe,CAAC8C,KAAK,CAAE,CACrCO,SAAS,CAAEpG,mBAAmB,GAAK6F,KAAM,CACzCQ,UAAU,CAAGnD,UAAU,EAAKD,iBAAiB,CAAC4C,KAAK,CAAE3C,UAAU,CAAE,CACjEoD,YAAY,CAAEnD,gBAAiB,cAAAkC,MAAA,CAZdQ,KAAK,CAavB,CAAC,cAEF/I,IAAA,CAACL,iBAAiB,EAEhBqE,OAAO,CAAAS,aAAA,CAAAA,aAAA,IACFT,OAAO,MACVyD,UAAU,CAAE,iBAAiB,CAC7BwB,YAAY,CAAE3H,WAAW,EACzB,CACF4H,QAAQ,CAAE,CACRO,eAAe,CAAE,CACfC,IAAI,CAAEpI,WAAW,CACjBqI,WAAW,CAAE,EAAE,CACfC,KAAK,CAAE,SAAS,CAChBC,MAAM,CAAE,EAAE,CACVC,QAAQ,CAAE,EAAE,CACZC,WAAW,CAAE,EACf,CACF,CAAE,CACFtH,iBAAiB,CAAEO,oBAAoB,CAAGP,iBAAiB,CAAG,GAAI,CAAAE,GAAG,CAAC,CAAE,CACxEC,oBAAoB,CAAEA,oBAAqB,CAC3CE,KAAK,CAAEA,KAAM,CACbkH,cAAc,CAAEhH,oBAAoB,CAAGsD,kBAAkB,CAAG,IAAM,CAAC,CAAE,CACrE2D,YAAY,CAAEpD,gBAAiB,CAC/BqD,YAAY,CAAEnD,gBAAiB,CAC/BoD,oBAAoB,CAAEnH,oBAAqB,CAC3CmG,iBAAiB,CAAE,IAAK,CACxBC,MAAM,CAAEA,CAAA,GAAMrD,iBAAiB,CAAC/B,OAAO,CAACW,OAAO,CAAE,CACjDyF,WAAW,CAAEnD,eAAgB,CAC7BoD,cAAc,CAAEnD,kBAAmB,CACnCoD,gBAAgB,CAAEnD,oBAAqB,cAAAoB,MAAA,CA3BtBQ,KAAK,CA4BvB,CAEL,CACD,CAEAhH,SAAS,eACR/B,IAAA,CAACH,cAAc,EACbyB,WAAW,CAAEA,WAAY,CACzBiJ,YAAY,CAAC,SAAS,CACtBC,aAAa,CAAC,0CAAY,CAC3B,CACF,EACW,CAAC,cAEfxK,IAAA,CAACW,gBAAgB,EAAA8H,QAAA,cACfzI,IAAA,CAACP,YAAY,EACXiJ,GAAG,CAAEtG,eAAgB,CACrBqI,aAAa,CAAE1G,iBAAkB,CACjC2G,QAAQ,CAAE3I,SAAS,EAAI,CAACH,cAAe,CACvC+I,WAAW,IAAApC,MAAA,CAAKjH,WAAW,wFAAsB,CACjDsJ,oBAAoB,CAAEpC,wBAAyB,CAC/CxF,oBAAoB,CAAEA,oBAAqB,CAC3C6H,oBAAoB,CAAEpI,iBAAiB,CAACqI,IAAI,CAAG,CAAE,CACjDC,qBAAqB,CAAE,CAAAnJ,cAAc,SAAdA,cAAc,iBAAdA,cAAc,CAAE+C,OAAO,GAAIpD,eAAgB,CAClEF,SAAS,CAAEA,SAAU,CACrB2J,iBAAiB,CAAE9D,kBAAmB,CACtC+D,kBAAkB,CAAE9D,oBAAqB,CAC1C,CAAC,CACc,CAAC,EACR,CAAC,cAEdnH,IAAA,CAACJ,oBAAoB,EACnBsB,IAAI,CAAE8B,oBAAoB,EAAIP,iBAAiB,CAACqI,IAAI,CAAG,CAAE,CACzDI,YAAY,CAAE7C,gBAAiB,CAC/BhH,SAAS,CAAEA,SAAU,CACrB0J,qBAAqB,CAAExJ,eAAgB,CACxC,CAAC,EACO,CAAC,CAEhB,CAAC,CAED,cAAe,CAAAJ,YAAY","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}