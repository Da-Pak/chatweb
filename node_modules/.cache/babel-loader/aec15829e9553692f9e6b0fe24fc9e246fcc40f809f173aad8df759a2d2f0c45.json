{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\sungh\\\\Desktop\\\\chat_work_ver2\\\\frontend\\\\src\\\\features\\\\vault\\\\components\\\\MemoVaultView.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport styled from 'styled-components';\nimport { sentenceApi } from '../../training/api/sentenceApi';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Container = styled.div`\n  display: flex;\n  flex-direction: column;\n  height: 100vh;\n  background: #f8f9fa;\n`;\n_c = Container;\nconst Header = styled.div`\n  padding: 20px 24px;\n  background: white;\n  border-bottom: 1px solid #e9ecef;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n`;\n_c2 = Header;\nconst Title = styled.h2`\n  margin: 0;\n  font-size: 24px;\n  font-weight: 600;\n  color: #333;\n`;\n_c3 = Title;\nconst ContentArea = styled.div`\n  flex: 1;\n  padding: 24px;\n  overflow-y: auto;\n`;\n_c4 = ContentArea;\nconst MemoGrid = styled.div`\n  display: grid;\n  grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));\n  gap: 16px;\n  max-width: 100%;\n`;\n_c5 = MemoGrid;\nconst MemoContainer = styled.div`\n  position: relative;\n`;\n_c6 = MemoContainer;\nconst MemoRow = styled.div`\n  width: 100%;\n  background: linear-gradient(135deg, #fff9e6 0%, #ffeaa7 100%);\n  border: 1px solid #ffd32a;\n  border-radius: 16px;\n  padding: 20px;\n  cursor: pointer;\n  position: relative;\n  transition: all 0.2s ease;\n  min-height: 120px;\n  display: flex;\n  flex-direction: column;\n  \n  &:hover {\n    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);\n    transform: translateY(-1px);\n    border-color: #ffb300;\n    background: linear-gradient(135deg, #fff3cd 0%, #ffd60a 100%);\n  }\n  \n  ${props => props.$isPinned && `\n    background: linear-gradient(135deg, #fff9e6 0%, #ffeaa7 100%);\n    border-color: #ffd32a;\n    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\n    \n    &:hover {\n      background: linear-gradient(135deg, #fff3cd 0%, #ffd60a 100%);\n      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);\n      border-color: #ffb300;\n    }\n  `}\n`;\n_c7 = MemoRow;\nconst MemoHeader = styled.div`\n  display: flex;\n  align-items: flex-start;\n  gap: 8px;\n  margin-bottom: 12px;\n`;\n_c8 = MemoHeader;\nconst MemoIcon = styled.div`\n  flex-shrink: 0;\n  width: 24px;\n  height: 24px;\n  background: #ffc107;\n  border-radius: 6px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 12px;\n  font-weight: bold;\n  color: white;\n  margin-top: 2px;\n  \n  &::before {\n    content: \"📝\";\n    filter: grayscale(0%);\n  }\n`;\n_c9 = MemoIcon;\nconst MemoContent = styled.div`\n  flex: 1;\n`;\n_c0 = MemoContent;\nconst UserMemoContent = styled.div`\n  font-size: 14px;\n  font-weight: 600;\n  color: #333;\n  line-height: 1.5;\n  margin-bottom: 8px;\n  word-break: break-word;\n`;\n_c1 = UserMemoContent;\nconst SentenceContent = styled.div`\n  font-size: 13px;\n  color: #666;\n  line-height: 1.4;\n  padding-top: 8px;\n  border-top: 1px solid rgba(0, 0, 0, 0.1);\n  word-break: break-word;\n  \n  &::before {\n    content: \"↘︎ \";\n    color: #999;\n    font-weight: bold;\n  }\n`;\n_c10 = SentenceContent;\nconst MemoMeta = styled.div`\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  font-size: 11px;\n  color: #6c757d;\n  margin-top: 12px;\n  padding-top: 8px;\n  border-top: 1px solid rgba(0, 0, 0, 0.05);\n`;\n_c11 = MemoMeta;\nconst ThreadTypeLabel = styled.span`\n  background: rgba(0, 0, 0, 0.1);\n  padding: 2px 6px;\n  border-radius: 4px;\n  font-weight: 500;\n`;\n_c12 = ThreadTypeLabel;\nconst DateLabel = styled.span`\n  font-style: italic;\n  opacity: 0.8;\n`;\n_c13 = DateLabel;\nconst EmptyState = styled.div`\n  text-align: center;\n  padding: 60px 20px;\n  color: #6c757d;\n  \n  .icon {\n    font-size: 48px;\n    margin-bottom: 16px;\n  }\n  \n  .title {\n    font-size: 18px;\n    font-weight: 500;\n    margin-bottom: 8px;\n  }\n  \n  .description {\n    font-size: 14px;\n  }\n`;\n_c14 = EmptyState;\nconst ContextMenuContainer = styled.div`\n  position: fixed;\n  top: ${props => props.$y}px;\n  left: ${props => props.$x}px;\n  background: white;\n  border: 1px solid #dee2e6;\n  border-radius: 8px;\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);\n  z-index: 1000;\n  min-width: 160px;\n  overflow: hidden;\n`;\n_c15 = ContextMenuContainer;\nconst ContextMenuItem = styled.div`\n  padding: 12px 16px;\n  cursor: pointer;\n  font-size: 14px;\n  color: #333;\n  \n  &:hover {\n    background-color: #f8f9fa;\n  }\n  \n  &:not(:last-child) {\n    border-bottom: 1px solid #f1f3f4;\n  }\n`;\n_c16 = ContextMenuItem;\nconst ModalOverlay = styled.div`\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: rgba(0, 0, 0, 0.5);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: 2000;\n`;\n_c17 = ModalOverlay;\nconst ModalContent = styled.div`\n  background: white;\n  border-radius: 12px;\n  padding: 24px;\n  max-width: 400px;\n  width: 90%;\n  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);\n`;\n_c18 = ModalContent;\nconst ModalTitle = styled.h3`\n  margin: 0 0 16px 0;\n  font-size: 18px;\n  font-weight: 600;\n  color: #333;\n`;\n_c19 = ModalTitle;\nconst ModalMessage = styled.p`\n  margin: 0 0 24px 0;\n  font-size: 14px;\n  color: #666;\n  line-height: 1.5;\n`;\n_c20 = ModalMessage;\nconst ModalButtons = styled.div`\n  display: flex;\n  gap: 12px;\n  justify-content: flex-end;\n`;\n_c21 = ModalButtons;\nconst ModalButton = styled.button`\n  padding: 10px 20px;\n  border-radius: 6px;\n  font-size: 14px;\n  font-weight: 500;\n  cursor: pointer;\n  border: 1px solid;\n  \n  ${props => props.$variant === 'primary' ? `\n    background: #007bff;\n    color: white;\n    border-color: #007bff;\n    \n    &:hover {\n      background: #0056b3;\n      border-color: #0056b3;\n    }\n  ` : `\n    background: white;\n    color: #6c757d;\n    border-color: #dee2e6;\n    \n    &:hover {\n      background: #f8f9fa;\n    }\n  `}\n`;\n_c22 = ModalButton;\nconst MemoVaultView = ({\n  personas,\n  onNavigateToThread\n}) => {\n  _s();\n  const [memos, setMemos] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [contextMenu, setContextMenu] = useState(null);\n  const [confirmationModal, setConfirmationModal] = useState(null);\n  useEffect(() => {\n    loadMemos();\n  }, []);\n\n  // 컨텍스트 메뉴 외부 클릭 감지\n  useEffect(() => {\n    const handleClickOutside = () => {\n      setContextMenu(null);\n    };\n    if (contextMenu) {\n      document.addEventListener('click', handleClickOutside);\n      return () => document.removeEventListener('click', handleClickOutside);\n    }\n  }, [contextMenu]);\n  const loadMemos = async () => {\n    try {\n      setLoading(true);\n      const data = await sentenceApi.getVaultMemos();\n      setMemos(data);\n    } catch (error) {\n      console.error('메모 저장고 로딩 실패:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n  const handleMemoClick = (e, memo) => {\n    e.preventDefault();\n    if (e.type === 'contextmenu') {\n      setContextMenu({\n        x: e.pageX,\n        y: e.pageY,\n        memo\n      });\n      return;\n    }\n\n    // 일반 클릭 시 상호작용 확인 모달\n    setConfirmationModal({\n      type: 'interact',\n      memo\n    });\n  };\n  const handleContextMenuAction = async (action, memo) => {\n    setContextMenu(null);\n    if (action === 'interact') {\n      setConfirmationModal({\n        type: 'interact',\n        memo\n      });\n    } else if (action === 'delete') {\n      setConfirmationModal({\n        type: 'delete',\n        memo\n      });\n    }\n  };\n  const handleConfirmAction = async () => {\n    if (!confirmationModal) return;\n    try {\n      if (confirmationModal.type === 'interact') {\n        const response = await sentenceApi.interactWithVaultMemo(confirmationModal.memo.id);\n        if (response.success && response.source_thread_id && response.source_thread_type) {\n          // 원본 스레드로 이동하면서 상호작용 메시지 전달\n          onNavigateToThread(response.source_thread_id, response.source_thread_type, response.interaction_message);\n        }\n      } else if (confirmationModal.type === 'delete') {\n        await sentenceApi.deleteVaultMemo(confirmationModal.memo.id);\n        await loadMemos(); // 목록 새로고침\n      }\n    } catch (error) {\n      console.error('메모 액션 실패:', error);\n    } finally {\n      setConfirmationModal(null);\n    }\n  };\n  const formatDate = dateString => {\n    const date = new Date(dateString);\n    return date.toLocaleDateString('ko-KR', {\n      month: 'short',\n      day: 'numeric',\n      hour: '2-digit',\n      minute: '2-digit'\n    });\n  };\n  const getThreadTypeLabel = threadType => {\n    switch (threadType) {\n      case 'interpretation':\n        return '해석';\n      case 'proceed':\n        return '나아가기';\n      case 'sentence':\n        return '문장';\n      case 'verbalization':\n        return '언어화';\n      default:\n        return threadType || '알수없음';\n    }\n  };\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(Container, {\n      children: [/*#__PURE__*/_jsxDEV(Header, {\n        children: /*#__PURE__*/_jsxDEV(Title, {\n          children: \"\\uBA54\\uBAA8 \\uC800\\uC7A5\\uACE0\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 414,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 413,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(ContentArea, {\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            textAlign: 'center',\n            padding: '60px 20px',\n            color: '#6c757d'\n          },\n          children: \"\\uB85C\\uB529 \\uC911...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 417,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 416,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 412,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(Container, {\n    children: [/*#__PURE__*/_jsxDEV(Header, {\n      children: /*#__PURE__*/_jsxDEV(Title, {\n        children: [\"\\uBA54\\uBAA8 \\uC800\\uC7A5\\uACE0 (\", memos.length, \"\\uAC1C)\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 428,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 427,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(ContentArea, {\n      children: memos.length === 0 ? /*#__PURE__*/_jsxDEV(EmptyState, {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"icon\",\n          children: \"\\uD83D\\uDCDD\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 434,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"title\",\n          children: \"\\uC800\\uC7A5\\uB41C \\uBA54\\uBAA8\\uAC00 \\uC5C6\\uC2B5\\uB2C8\\uB2E4\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 435,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"description\",\n          children: \"\\uD6C8\\uC2B5\\uC774\\uB098 \\uC5B8\\uC5B4\\uD654 \\uD398\\uC774\\uC9C0\\uC5D0\\uC11C \\uBA54\\uBAA8\\uB97C \\uC0DD\\uC131\\uD558\\uBA74 \\uC790\\uB3D9\\uC73C\\uB85C \\uC800\\uC7A5\\uB429\\uB2C8\\uB2E4\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 436,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 433,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(MemoGrid, {\n        children: memos.map(memo => /*#__PURE__*/_jsxDEV(MemoContainer, {\n          children: /*#__PURE__*/_jsxDEV(MemoRow, {\n            onClick: e => handleMemoClick(e, memo),\n            onContextMenu: e => handleMemoClick(e, memo),\n            children: [/*#__PURE__*/_jsxDEV(MemoHeader, {\n              children: [/*#__PURE__*/_jsxDEV(MemoIcon, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 449,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(MemoContent, {\n                children: /*#__PURE__*/_jsxDEV(UserMemoContent, {\n                  children: memo.memo_content\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 451,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 450,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 448,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(SentenceContent, {\n              children: memo.sentence_content\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 455,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(MemoMeta, {\n              children: [/*#__PURE__*/_jsxDEV(ThreadTypeLabel, {\n                children: getThreadTypeLabel(memo.source_thread_type)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 460,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(DateLabel, {\n                children: formatDate(memo.created_at)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 463,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 459,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 444,\n            columnNumber: 17\n          }, this)\n        }, memo.id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 443,\n          columnNumber: 15\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 441,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 431,\n      columnNumber: 7\n    }, this), contextMenu && /*#__PURE__*/_jsxDEV(ContextMenuContainer, {\n      $x: contextMenu.x,\n      $y: contextMenu.y,\n      children: [/*#__PURE__*/_jsxDEV(ContextMenuItem, {\n        onClick: () => handleContextMenuAction('interact', contextMenu.memo),\n        children: \"\\uD83D\\uDD04 \\uC0C1\\uD638\\uC791\\uC6A9 \\uD558\\uAE30\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 477,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(ContextMenuItem, {\n        onClick: () => handleContextMenuAction('delete', contextMenu.memo),\n        children: \"\\uD83D\\uDDD1\\uFE0F \\uC0AD\\uC81C\\uD558\\uAE30\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 482,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 476,\n      columnNumber: 9\n    }, this), confirmationModal && /*#__PURE__*/_jsxDEV(ModalOverlay, {\n      onClick: () => setConfirmationModal(null),\n      children: /*#__PURE__*/_jsxDEV(ModalContent, {\n        onClick: e => e.stopPropagation(),\n        children: [/*#__PURE__*/_jsxDEV(ModalTitle, {\n          children: confirmationModal.type === 'interact' ? '메모 상호작용' : '메모 삭제'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 494,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(ModalMessage, {\n          children: confirmationModal.type === 'interact' ? `이 메모와 상호작용하시겠습니까? 원본 위치로 이동하여 \"${confirmationModal.memo.sentence_content} - ${confirmationModal.memo.memo_content}\" 형식으로 입력창에 삽입됩니다.` : '이 메모를 삭제하시겠습니까? 삭제된 메모는 복구할 수 없습니다.'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 497,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(ModalButtons, {\n          children: [/*#__PURE__*/_jsxDEV(ModalButton, {\n            $variant: \"secondary\",\n            onClick: () => setConfirmationModal(null),\n            children: \"\\uCDE8\\uC18C\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 504,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(ModalButton, {\n            $variant: \"primary\",\n            onClick: handleConfirmAction,\n            children: confirmationModal.type === 'interact' ? '상호작용' : '삭제'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 510,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 503,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 493,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 492,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 426,\n    columnNumber: 5\n  }, this);\n};\n_s(MemoVaultView, \"HsKNonKe1bToXrZN1aQj5u8HwD4=\");\n_c23 = MemoVaultView;\nexport default MemoVaultView;\nvar _c, _c2, _c3, _c4, _c5, _c6, _c7, _c8, _c9, _c0, _c1, _c10, _c11, _c12, _c13, _c14, _c15, _c16, _c17, _c18, _c19, _c20, _c21, _c22, _c23;\n$RefreshReg$(_c, \"Container\");\n$RefreshReg$(_c2, \"Header\");\n$RefreshReg$(_c3, \"Title\");\n$RefreshReg$(_c4, \"ContentArea\");\n$RefreshReg$(_c5, \"MemoGrid\");\n$RefreshReg$(_c6, \"MemoContainer\");\n$RefreshReg$(_c7, \"MemoRow\");\n$RefreshReg$(_c8, \"MemoHeader\");\n$RefreshReg$(_c9, \"MemoIcon\");\n$RefreshReg$(_c0, \"MemoContent\");\n$RefreshReg$(_c1, \"UserMemoContent\");\n$RefreshReg$(_c10, \"SentenceContent\");\n$RefreshReg$(_c11, \"MemoMeta\");\n$RefreshReg$(_c12, \"ThreadTypeLabel\");\n$RefreshReg$(_c13, \"DateLabel\");\n$RefreshReg$(_c14, \"EmptyState\");\n$RefreshReg$(_c15, \"ContextMenuContainer\");\n$RefreshReg$(_c16, \"ContextMenuItem\");\n$RefreshReg$(_c17, \"ModalOverlay\");\n$RefreshReg$(_c18, \"ModalContent\");\n$RefreshReg$(_c19, \"ModalTitle\");\n$RefreshReg$(_c20, \"ModalMessage\");\n$RefreshReg$(_c21, \"ModalButtons\");\n$RefreshReg$(_c22, \"ModalButton\");\n$RefreshReg$(_c23, \"MemoVaultView\");","map":{"version":3,"names":["React","useState","useEffect","styled","sentenceApi","jsxDEV","_jsxDEV","Container","div","_c","Header","_c2","Title","h2","_c3","ContentArea","_c4","MemoGrid","_c5","MemoContainer","_c6","MemoRow","props","$isPinned","_c7","MemoHeader","_c8","MemoIcon","_c9","MemoContent","_c0","UserMemoContent","_c1","SentenceContent","_c10","MemoMeta","_c11","ThreadTypeLabel","span","_c12","DateLabel","_c13","EmptyState","_c14","ContextMenuContainer","$y","$x","_c15","ContextMenuItem","_c16","ModalOverlay","_c17","ModalContent","_c18","ModalTitle","h3","_c19","ModalMessage","p","_c20","ModalButtons","_c21","ModalButton","button","$variant","_c22","MemoVaultView","personas","onNavigateToThread","_s","memos","setMemos","loading","setLoading","contextMenu","setContextMenu","confirmationModal","setConfirmationModal","loadMemos","handleClickOutside","document","addEventListener","removeEventListener","data","getVaultMemos","error","console","handleMemoClick","e","memo","preventDefault","type","x","pageX","y","pageY","handleContextMenuAction","action","handleConfirmAction","response","interactWithVaultMemo","id","success","source_thread_id","source_thread_type","interaction_message","deleteVaultMemo","formatDate","dateString","date","Date","toLocaleDateString","month","day","hour","minute","getThreadTypeLabel","threadType","children","fileName","_jsxFileName","lineNumber","columnNumber","style","textAlign","padding","color","length","className","map","onClick","onContextMenu","memo_content","sentence_content","created_at","stopPropagation","_c23","$RefreshReg$"],"sources":["C:/Users/sungh/Desktop/chat_work_ver2/frontend/src/features/vault/components/MemoVaultView.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport styled from 'styled-components';\r\nimport { sentenceApi, MemoVaultItem } from '../../training/api/sentenceApi';\r\nimport { Persona } from '../../shared/types';\r\n\r\ninterface MemoVaultViewProps {\r\n  personas: Record<string, Persona>;\r\n  onNavigateToThread: (threadId: string, threadType: string, interactionMessage?: string) => void;\r\n}\r\n\r\ninterface ContextMenu {\r\n  x: number;\r\n  y: number;\r\n  memo: MemoVaultItem;\r\n}\r\n\r\ninterface ConfirmationModalData {\r\n  type: 'interact' | 'delete';\r\n  memo: MemoVaultItem;\r\n}\r\n\r\nconst Container = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  height: 100vh;\r\n  background: #f8f9fa;\r\n`;\r\n\r\nconst Header = styled.div`\r\n  padding: 20px 24px;\r\n  background: white;\r\n  border-bottom: 1px solid #e9ecef;\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n`;\r\n\r\nconst Title = styled.h2`\r\n  margin: 0;\r\n  font-size: 24px;\r\n  font-weight: 600;\r\n  color: #333;\r\n`;\r\n\r\nconst ContentArea = styled.div`\r\n  flex: 1;\r\n  padding: 24px;\r\n  overflow-y: auto;\r\n`;\r\n\r\nconst MemoGrid = styled.div`\r\n  display: grid;\r\n  grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));\r\n  gap: 16px;\r\n  max-width: 100%;\r\n`;\r\n\r\nconst MemoContainer = styled.div`\r\n  position: relative;\r\n`;\r\n\r\nconst MemoRow = styled.div<{ $isPinned?: boolean }>`\r\n  width: 100%;\r\n  background: linear-gradient(135deg, #fff9e6 0%, #ffeaa7 100%);\r\n  border: 1px solid #ffd32a;\r\n  border-radius: 16px;\r\n  padding: 20px;\r\n  cursor: pointer;\r\n  position: relative;\r\n  transition: all 0.2s ease;\r\n  min-height: 120px;\r\n  display: flex;\r\n  flex-direction: column;\r\n  \r\n  &:hover {\r\n    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);\r\n    transform: translateY(-1px);\r\n    border-color: #ffb300;\r\n    background: linear-gradient(135deg, #fff3cd 0%, #ffd60a 100%);\r\n  }\r\n  \r\n  ${props => props.$isPinned && `\r\n    background: linear-gradient(135deg, #fff9e6 0%, #ffeaa7 100%);\r\n    border-color: #ffd32a;\r\n    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\r\n    \r\n    &:hover {\r\n      background: linear-gradient(135deg, #fff3cd 0%, #ffd60a 100%);\r\n      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);\r\n      border-color: #ffb300;\r\n    }\r\n  `}\r\n`;\r\n\r\nconst MemoHeader = styled.div`\r\n  display: flex;\r\n  align-items: flex-start;\r\n  gap: 8px;\r\n  margin-bottom: 12px;\r\n`;\r\n\r\nconst MemoIcon = styled.div`\r\n  flex-shrink: 0;\r\n  width: 24px;\r\n  height: 24px;\r\n  background: #ffc107;\r\n  border-radius: 6px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  font-size: 12px;\r\n  font-weight: bold;\r\n  color: white;\r\n  margin-top: 2px;\r\n  \r\n  &::before {\r\n    content: \"📝\";\r\n    filter: grayscale(0%);\r\n  }\r\n`;\r\n\r\nconst MemoContent = styled.div`\r\n  flex: 1;\r\n`;\r\n\r\nconst UserMemoContent = styled.div`\r\n  font-size: 14px;\r\n  font-weight: 600;\r\n  color: #333;\r\n  line-height: 1.5;\r\n  margin-bottom: 8px;\r\n  word-break: break-word;\r\n`;\r\n\r\nconst SentenceContent = styled.div`\r\n  font-size: 13px;\r\n  color: #666;\r\n  line-height: 1.4;\r\n  padding-top: 8px;\r\n  border-top: 1px solid rgba(0, 0, 0, 0.1);\r\n  word-break: break-word;\r\n  \r\n  &::before {\r\n    content: \"↘︎ \";\r\n    color: #999;\r\n    font-weight: bold;\r\n  }\r\n`;\r\n\r\nconst MemoMeta = styled.div`\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  font-size: 11px;\r\n  color: #6c757d;\r\n  margin-top: 12px;\r\n  padding-top: 8px;\r\n  border-top: 1px solid rgba(0, 0, 0, 0.05);\r\n`;\r\n\r\nconst ThreadTypeLabel = styled.span`\r\n  background: rgba(0, 0, 0, 0.1);\r\n  padding: 2px 6px;\r\n  border-radius: 4px;\r\n  font-weight: 500;\r\n`;\r\n\r\nconst DateLabel = styled.span`\r\n  font-style: italic;\r\n  opacity: 0.8;\r\n`;\r\n\r\nconst EmptyState = styled.div`\r\n  text-align: center;\r\n  padding: 60px 20px;\r\n  color: #6c757d;\r\n  \r\n  .icon {\r\n    font-size: 48px;\r\n    margin-bottom: 16px;\r\n  }\r\n  \r\n  .title {\r\n    font-size: 18px;\r\n    font-weight: 500;\r\n    margin-bottom: 8px;\r\n  }\r\n  \r\n  .description {\r\n    font-size: 14px;\r\n  }\r\n`;\r\n\r\nconst ContextMenuContainer = styled.div<{ $x: number; $y: number }>`\r\n  position: fixed;\r\n  top: ${props => props.$y}px;\r\n  left: ${props => props.$x}px;\r\n  background: white;\r\n  border: 1px solid #dee2e6;\r\n  border-radius: 8px;\r\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);\r\n  z-index: 1000;\r\n  min-width: 160px;\r\n  overflow: hidden;\r\n`;\r\n\r\nconst ContextMenuItem = styled.div`\r\n  padding: 12px 16px;\r\n  cursor: pointer;\r\n  font-size: 14px;\r\n  color: #333;\r\n  \r\n  &:hover {\r\n    background-color: #f8f9fa;\r\n  }\r\n  \r\n  &:not(:last-child) {\r\n    border-bottom: 1px solid #f1f3f4;\r\n  }\r\n`;\r\n\r\nconst ModalOverlay = styled.div`\r\n  position: fixed;\r\n  top: 0;\r\n  left: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n  background: rgba(0, 0, 0, 0.5);\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  z-index: 2000;\r\n`;\r\n\r\nconst ModalContent = styled.div`\r\n  background: white;\r\n  border-radius: 12px;\r\n  padding: 24px;\r\n  max-width: 400px;\r\n  width: 90%;\r\n  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);\r\n`;\r\n\r\nconst ModalTitle = styled.h3`\r\n  margin: 0 0 16px 0;\r\n  font-size: 18px;\r\n  font-weight: 600;\r\n  color: #333;\r\n`;\r\n\r\nconst ModalMessage = styled.p`\r\n  margin: 0 0 24px 0;\r\n  font-size: 14px;\r\n  color: #666;\r\n  line-height: 1.5;\r\n`;\r\n\r\nconst ModalButtons = styled.div`\r\n  display: flex;\r\n  gap: 12px;\r\n  justify-content: flex-end;\r\n`;\r\n\r\nconst ModalButton = styled.button<{ $variant: 'primary' | 'secondary' }>`\r\n  padding: 10px 20px;\r\n  border-radius: 6px;\r\n  font-size: 14px;\r\n  font-weight: 500;\r\n  cursor: pointer;\r\n  border: 1px solid;\r\n  \r\n  ${props => props.$variant === 'primary' ? `\r\n    background: #007bff;\r\n    color: white;\r\n    border-color: #007bff;\r\n    \r\n    &:hover {\r\n      background: #0056b3;\r\n      border-color: #0056b3;\r\n    }\r\n  ` : `\r\n    background: white;\r\n    color: #6c757d;\r\n    border-color: #dee2e6;\r\n    \r\n    &:hover {\r\n      background: #f8f9fa;\r\n    }\r\n  `}\r\n`;\r\n\r\nconst MemoVaultView: React.FC<MemoVaultViewProps> = ({\r\n  personas,\r\n  onNavigateToThread\r\n}) => {\r\n  const [memos, setMemos] = useState<MemoVaultItem[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [contextMenu, setContextMenu] = useState<ContextMenu | null>(null);\r\n  const [confirmationModal, setConfirmationModal] = useState<ConfirmationModalData | null>(null);\r\n\r\n  useEffect(() => {\r\n    loadMemos();\r\n  }, []);\r\n\r\n  // 컨텍스트 메뉴 외부 클릭 감지\r\n  useEffect(() => {\r\n    const handleClickOutside = () => {\r\n      setContextMenu(null);\r\n    };\r\n\r\n    if (contextMenu) {\r\n      document.addEventListener('click', handleClickOutside);\r\n      return () => document.removeEventListener('click', handleClickOutside);\r\n    }\r\n  }, [contextMenu]);\r\n\r\n  const loadMemos = async () => {\r\n    try {\r\n      setLoading(true);\r\n      const data = await sentenceApi.getVaultMemos();\r\n      setMemos(data);\r\n    } catch (error) {\r\n      console.error('메모 저장고 로딩 실패:', error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleMemoClick = (e: React.MouseEvent, memo: MemoVaultItem) => {\r\n    e.preventDefault();\r\n    \r\n    if (e.type === 'contextmenu') {\r\n      setContextMenu({\r\n        x: e.pageX,\r\n        y: e.pageY,\r\n        memo\r\n      });\r\n      return;\r\n    }\r\n\r\n    // 일반 클릭 시 상호작용 확인 모달\r\n    setConfirmationModal({\r\n      type: 'interact',\r\n      memo\r\n    });\r\n  };\r\n\r\n  const handleContextMenuAction = async (action: 'interact' | 'delete', memo: MemoVaultItem) => {\r\n    setContextMenu(null);\r\n    \r\n    if (action === 'interact') {\r\n      setConfirmationModal({\r\n        type: 'interact',\r\n        memo\r\n      });\r\n    } else if (action === 'delete') {\r\n      setConfirmationModal({\r\n        type: 'delete',\r\n        memo\r\n      });\r\n    }\r\n  };\r\n\r\n  const handleConfirmAction = async () => {\r\n    if (!confirmationModal) return;\r\n\r\n    try {\r\n      if (confirmationModal.type === 'interact') {\r\n        const response = await sentenceApi.interactWithVaultMemo(confirmationModal.memo.id);\r\n        \r\n        if (response.success && response.source_thread_id && response.source_thread_type) {\r\n          // 원본 스레드로 이동하면서 상호작용 메시지 전달\r\n          onNavigateToThread(\r\n            response.source_thread_id,\r\n            response.source_thread_type,\r\n            response.interaction_message\r\n          );\r\n        }\r\n      } else if (confirmationModal.type === 'delete') {\r\n        await sentenceApi.deleteVaultMemo(confirmationModal.memo.id);\r\n        await loadMemos(); // 목록 새로고침\r\n      }\r\n    } catch (error) {\r\n      console.error('메모 액션 실패:', error);\r\n    } finally {\r\n      setConfirmationModal(null);\r\n    }\r\n  };\r\n\r\n  const formatDate = (dateString: string) => {\r\n    const date = new Date(dateString);\r\n    return date.toLocaleDateString('ko-KR', {\r\n      month: 'short',\r\n      day: 'numeric',\r\n      hour: '2-digit',\r\n      minute: '2-digit'\r\n    });\r\n  };\r\n\r\n  const getThreadTypeLabel = (threadType?: string) => {\r\n    switch (threadType) {\r\n      case 'interpretation': return '해석';\r\n      case 'proceed': return '나아가기';\r\n      case 'sentence': return '문장';\r\n      case 'verbalization': return '언어화';\r\n      default: return threadType || '알수없음';\r\n    }\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <Container>\r\n        <Header>\r\n          <Title>메모 저장고</Title>\r\n        </Header>\r\n        <ContentArea>\r\n          <div style={{ textAlign: 'center', padding: '60px 20px', color: '#6c757d' }}>\r\n            로딩 중...\r\n          </div>\r\n        </ContentArea>\r\n      </Container>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <Container>\r\n      <Header>\r\n        <Title>메모 저장고 ({memos.length}개)</Title>\r\n      </Header>\r\n\r\n      <ContentArea>\r\n        {memos.length === 0 ? (\r\n          <EmptyState>\r\n            <div className=\"icon\">📝</div>\r\n            <div className=\"title\">저장된 메모가 없습니다</div>\r\n            <div className=\"description\">\r\n              훈습이나 언어화 페이지에서 메모를 생성하면 자동으로 저장됩니다\r\n            </div>\r\n          </EmptyState>\r\n        ) : (\r\n          <MemoGrid>\r\n            {memos.map(memo => (\r\n              <MemoContainer key={memo.id}>\r\n                <MemoRow\r\n                  onClick={(e) => handleMemoClick(e, memo)}\r\n                  onContextMenu={(e) => handleMemoClick(e, memo)}\r\n                >\r\n                  <MemoHeader>\r\n                    <MemoIcon />\r\n                    <MemoContent>\r\n                      <UserMemoContent>{memo.memo_content}</UserMemoContent>\r\n                    </MemoContent>\r\n                  </MemoHeader>\r\n                  \r\n                  <SentenceContent>\r\n                    {memo.sentence_content}\r\n                  </SentenceContent>\r\n                  \r\n                  <MemoMeta>\r\n                    <ThreadTypeLabel>\r\n                      {getThreadTypeLabel(memo.source_thread_type)}\r\n                    </ThreadTypeLabel>\r\n                    <DateLabel>\r\n                      {formatDate(memo.created_at)}\r\n                    </DateLabel>\r\n                  </MemoMeta>\r\n                </MemoRow>\r\n              </MemoContainer>\r\n            ))}\r\n          </MemoGrid>\r\n        )}\r\n      </ContentArea>\r\n\r\n      {/* 컨텍스트 메뉴 */}\r\n      {contextMenu && (\r\n        <ContextMenuContainer $x={contextMenu.x} $y={contextMenu.y}>\r\n          <ContextMenuItem\r\n            onClick={() => handleContextMenuAction('interact', contextMenu.memo)}\r\n          >\r\n            🔄 상호작용 하기\r\n          </ContextMenuItem>\r\n          <ContextMenuItem\r\n            onClick={() => handleContextMenuAction('delete', contextMenu.memo)}\r\n          >\r\n            🗑️ 삭제하기\r\n          </ContextMenuItem>\r\n        </ContextMenuContainer>\r\n      )}\r\n\r\n      {/* 확인 모달 */}\r\n      {confirmationModal && (\r\n        <ModalOverlay onClick={() => setConfirmationModal(null)}>\r\n          <ModalContent onClick={(e) => e.stopPropagation()}>\r\n            <ModalTitle>\r\n              {confirmationModal.type === 'interact' ? '메모 상호작용' : '메모 삭제'}\r\n            </ModalTitle>\r\n            <ModalMessage>\r\n              {confirmationModal.type === 'interact' \r\n                ? `이 메모와 상호작용하시겠습니까? 원본 위치로 이동하여 \"${confirmationModal.memo.sentence_content} - ${confirmationModal.memo.memo_content}\" 형식으로 입력창에 삽입됩니다.`\r\n                : '이 메모를 삭제하시겠습니까? 삭제된 메모는 복구할 수 없습니다.'\r\n              }\r\n            </ModalMessage>\r\n            <ModalButtons>\r\n              <ModalButton \r\n                $variant=\"secondary\" \r\n                onClick={() => setConfirmationModal(null)}\r\n              >\r\n                취소\r\n              </ModalButton>\r\n              <ModalButton \r\n                $variant=\"primary\" \r\n                onClick={handleConfirmAction}\r\n              >\r\n                {confirmationModal.type === 'interact' ? '상호작용' : '삭제'}\r\n              </ModalButton>\r\n            </ModalButtons>\r\n          </ModalContent>\r\n        </ModalOverlay>\r\n      )}\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default MemoVaultView; "],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAClD,OAAOC,MAAM,MAAM,mBAAmB;AACtC,SAASC,WAAW,QAAuB,gCAAgC;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAmB5E,MAAMC,SAAS,GAAGJ,MAAM,CAACK,GAAG;AAC5B;AACA;AACA;AACA;AACA,CAAC;AAACC,EAAA,GALIF,SAAS;AAOf,MAAMG,MAAM,GAAGP,MAAM,CAACK,GAAG;AACzB;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAACG,GAAA,GAPID,MAAM;AASZ,MAAME,KAAK,GAAGT,MAAM,CAACU,EAAE;AACvB;AACA;AACA;AACA;AACA,CAAC;AAACC,GAAA,GALIF,KAAK;AAOX,MAAMG,WAAW,GAAGZ,MAAM,CAACK,GAAG;AAC9B;AACA;AACA;AACA,CAAC;AAACQ,GAAA,GAJID,WAAW;AAMjB,MAAME,QAAQ,GAAGd,MAAM,CAACK,GAAG;AAC3B;AACA;AACA;AACA;AACA,CAAC;AAACU,GAAA,GALID,QAAQ;AAOd,MAAME,aAAa,GAAGhB,MAAM,CAACK,GAAG;AAChC;AACA,CAAC;AAACY,GAAA,GAFID,aAAa;AAInB,MAAME,OAAO,GAAGlB,MAAM,CAACK,GAA4B;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAIc,KAAK,IAAIA,KAAK,CAACC,SAAS,IAAI;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH,CAAC;AAACC,GAAA,GA/BIH,OAAO;AAiCb,MAAMI,UAAU,GAAGtB,MAAM,CAACK,GAAG;AAC7B;AACA;AACA;AACA;AACA,CAAC;AAACkB,GAAA,GALID,UAAU;AAOhB,MAAME,QAAQ,GAAGxB,MAAM,CAACK,GAAG;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAACoB,GAAA,GAlBID,QAAQ;AAoBd,MAAME,WAAW,GAAG1B,MAAM,CAACK,GAAG;AAC9B;AACA,CAAC;AAACsB,GAAA,GAFID,WAAW;AAIjB,MAAME,eAAe,GAAG5B,MAAM,CAACK,GAAG;AAClC;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAACwB,GAAA,GAPID,eAAe;AASrB,MAAME,eAAe,GAAG9B,MAAM,CAACK,GAAG;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAAC0B,IAAA,GAbID,eAAe;AAerB,MAAME,QAAQ,GAAGhC,MAAM,CAACK,GAAG;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAAC4B,IAAA,GATID,QAAQ;AAWd,MAAME,eAAe,GAAGlC,MAAM,CAACmC,IAAI;AACnC;AACA;AACA;AACA;AACA,CAAC;AAACC,IAAA,GALIF,eAAe;AAOrB,MAAMG,SAAS,GAAGrC,MAAM,CAACmC,IAAI;AAC7B;AACA;AACA,CAAC;AAACG,IAAA,GAHID,SAAS;AAKf,MAAME,UAAU,GAAGvC,MAAM,CAACK,GAAG;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAACmC,IAAA,GAnBID,UAAU;AAqBhB,MAAME,oBAAoB,GAAGzC,MAAM,CAACK,GAA+B;AACnE;AACA,SAASc,KAAK,IAAIA,KAAK,CAACuB,EAAE;AAC1B,UAAUvB,KAAK,IAAIA,KAAK,CAACwB,EAAE;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAACC,IAAA,GAXIH,oBAAoB;AAa1B,MAAMI,eAAe,GAAG7C,MAAM,CAACK,GAAG;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAACyC,IAAA,GAbID,eAAe;AAerB,MAAME,YAAY,GAAG/C,MAAM,CAACK,GAAG;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAAC2C,IAAA,GAXID,YAAY;AAalB,MAAME,YAAY,GAAGjD,MAAM,CAACK,GAAG;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAAC6C,IAAA,GAPID,YAAY;AASlB,MAAME,UAAU,GAAGnD,MAAM,CAACoD,EAAE;AAC5B;AACA;AACA;AACA;AACA,CAAC;AAACC,IAAA,GALIF,UAAU;AAOhB,MAAMG,YAAY,GAAGtD,MAAM,CAACuD,CAAC;AAC7B;AACA;AACA;AACA;AACA,CAAC;AAACC,IAAA,GALIF,YAAY;AAOlB,MAAMG,YAAY,GAAGzD,MAAM,CAACK,GAAG;AAC/B;AACA;AACA;AACA,CAAC;AAACqD,IAAA,GAJID,YAAY;AAMlB,MAAME,WAAW,GAAG3D,MAAM,CAAC4D,MAA6C;AACxE;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAIzC,KAAK,IAAIA,KAAK,CAAC0C,QAAQ,KAAK,SAAS,GAAG;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG,GAAG;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH,CAAC;AAACC,IAAA,GA1BIH,WAAW;AA4BjB,MAAMI,aAA2C,GAAGA,CAAC;EACnDC,QAAQ;EACRC;AACF,CAAC,KAAK;EAAAC,EAAA;EACJ,MAAM,CAACC,KAAK,EAAEC,QAAQ,CAAC,GAAGtE,QAAQ,CAAkB,EAAE,CAAC;EACvD,MAAM,CAACuE,OAAO,EAAEC,UAAU,CAAC,GAAGxE,QAAQ,CAAC,IAAI,CAAC;EAC5C,MAAM,CAACyE,WAAW,EAAEC,cAAc,CAAC,GAAG1E,QAAQ,CAAqB,IAAI,CAAC;EACxE,MAAM,CAAC2E,iBAAiB,EAAEC,oBAAoB,CAAC,GAAG5E,QAAQ,CAA+B,IAAI,CAAC;EAE9FC,SAAS,CAAC,MAAM;IACd4E,SAAS,CAAC,CAAC;EACb,CAAC,EAAE,EAAE,CAAC;;EAEN;EACA5E,SAAS,CAAC,MAAM;IACd,MAAM6E,kBAAkB,GAAGA,CAAA,KAAM;MAC/BJ,cAAc,CAAC,IAAI,CAAC;IACtB,CAAC;IAED,IAAID,WAAW,EAAE;MACfM,QAAQ,CAACC,gBAAgB,CAAC,OAAO,EAAEF,kBAAkB,CAAC;MACtD,OAAO,MAAMC,QAAQ,CAACE,mBAAmB,CAAC,OAAO,EAAEH,kBAAkB,CAAC;IACxE;EACF,CAAC,EAAE,CAACL,WAAW,CAAC,CAAC;EAEjB,MAAMI,SAAS,GAAG,MAAAA,CAAA,KAAY;IAC5B,IAAI;MACFL,UAAU,CAAC,IAAI,CAAC;MAChB,MAAMU,IAAI,GAAG,MAAM/E,WAAW,CAACgF,aAAa,CAAC,CAAC;MAC9Cb,QAAQ,CAACY,IAAI,CAAC;IAChB,CAAC,CAAC,OAAOE,KAAK,EAAE;MACdC,OAAO,CAACD,KAAK,CAAC,eAAe,EAAEA,KAAK,CAAC;IACvC,CAAC,SAAS;MACRZ,UAAU,CAAC,KAAK,CAAC;IACnB;EACF,CAAC;EAED,MAAMc,eAAe,GAAGA,CAACC,CAAmB,EAAEC,IAAmB,KAAK;IACpED,CAAC,CAACE,cAAc,CAAC,CAAC;IAElB,IAAIF,CAAC,CAACG,IAAI,KAAK,aAAa,EAAE;MAC5BhB,cAAc,CAAC;QACbiB,CAAC,EAAEJ,CAAC,CAACK,KAAK;QACVC,CAAC,EAAEN,CAAC,CAACO,KAAK;QACVN;MACF,CAAC,CAAC;MACF;IACF;;IAEA;IACAZ,oBAAoB,CAAC;MACnBc,IAAI,EAAE,UAAU;MAChBF;IACF,CAAC,CAAC;EACJ,CAAC;EAED,MAAMO,uBAAuB,GAAG,MAAAA,CAAOC,MAA6B,EAAER,IAAmB,KAAK;IAC5Fd,cAAc,CAAC,IAAI,CAAC;IAEpB,IAAIsB,MAAM,KAAK,UAAU,EAAE;MACzBpB,oBAAoB,CAAC;QACnBc,IAAI,EAAE,UAAU;QAChBF;MACF,CAAC,CAAC;IACJ,CAAC,MAAM,IAAIQ,MAAM,KAAK,QAAQ,EAAE;MAC9BpB,oBAAoB,CAAC;QACnBc,IAAI,EAAE,QAAQ;QACdF;MACF,CAAC,CAAC;IACJ;EACF,CAAC;EAED,MAAMS,mBAAmB,GAAG,MAAAA,CAAA,KAAY;IACtC,IAAI,CAACtB,iBAAiB,EAAE;IAExB,IAAI;MACF,IAAIA,iBAAiB,CAACe,IAAI,KAAK,UAAU,EAAE;QACzC,MAAMQ,QAAQ,GAAG,MAAM/F,WAAW,CAACgG,qBAAqB,CAACxB,iBAAiB,CAACa,IAAI,CAACY,EAAE,CAAC;QAEnF,IAAIF,QAAQ,CAACG,OAAO,IAAIH,QAAQ,CAACI,gBAAgB,IAAIJ,QAAQ,CAACK,kBAAkB,EAAE;UAChF;UACApC,kBAAkB,CAChB+B,QAAQ,CAACI,gBAAgB,EACzBJ,QAAQ,CAACK,kBAAkB,EAC3BL,QAAQ,CAACM,mBACX,CAAC;QACH;MACF,CAAC,MAAM,IAAI7B,iBAAiB,CAACe,IAAI,KAAK,QAAQ,EAAE;QAC9C,MAAMvF,WAAW,CAACsG,eAAe,CAAC9B,iBAAiB,CAACa,IAAI,CAACY,EAAE,CAAC;QAC5D,MAAMvB,SAAS,CAAC,CAAC,CAAC,CAAC;MACrB;IACF,CAAC,CAAC,OAAOO,KAAK,EAAE;MACdC,OAAO,CAACD,KAAK,CAAC,WAAW,EAAEA,KAAK,CAAC;IACnC,CAAC,SAAS;MACRR,oBAAoB,CAAC,IAAI,CAAC;IAC5B;EACF,CAAC;EAED,MAAM8B,UAAU,GAAIC,UAAkB,IAAK;IACzC,MAAMC,IAAI,GAAG,IAAIC,IAAI,CAACF,UAAU,CAAC;IACjC,OAAOC,IAAI,CAACE,kBAAkB,CAAC,OAAO,EAAE;MACtCC,KAAK,EAAE,OAAO;MACdC,GAAG,EAAE,SAAS;MACdC,IAAI,EAAE,SAAS;MACfC,MAAM,EAAE;IACV,CAAC,CAAC;EACJ,CAAC;EAED,MAAMC,kBAAkB,GAAIC,UAAmB,IAAK;IAClD,QAAQA,UAAU;MAChB,KAAK,gBAAgB;QAAE,OAAO,IAAI;MAClC,KAAK,SAAS;QAAE,OAAO,MAAM;MAC7B,KAAK,UAAU;QAAE,OAAO,IAAI;MAC5B,KAAK,eAAe;QAAE,OAAO,KAAK;MAClC;QAAS,OAAOA,UAAU,IAAI,MAAM;IACtC;EACF,CAAC;EAED,IAAI7C,OAAO,EAAE;IACX,oBACElE,OAAA,CAACC,SAAS;MAAA+G,QAAA,gBACRhH,OAAA,CAACI,MAAM;QAAA4G,QAAA,eACLhH,OAAA,CAACM,KAAK;UAAA0G,QAAA,EAAC;QAAM;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAO;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACf,CAAC,eACTpH,OAAA,CAACS,WAAW;QAAAuG,QAAA,eACVhH,OAAA;UAAKqH,KAAK,EAAE;YAAEC,SAAS,EAAE,QAAQ;YAAEC,OAAO,EAAE,WAAW;YAAEC,KAAK,EAAE;UAAU,CAAE;UAAAR,QAAA,EAAC;QAE7E;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAK;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACK,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACL,CAAC;EAEhB;EAEA,oBACEpH,OAAA,CAACC,SAAS;IAAA+G,QAAA,gBACRhH,OAAA,CAACI,MAAM;MAAA4G,QAAA,eACLhH,OAAA,CAACM,KAAK;QAAA0G,QAAA,GAAC,mCAAQ,EAAChD,KAAK,CAACyD,MAAM,EAAC,SAAE;MAAA;QAAAR,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAO;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACjC,CAAC,eAETpH,OAAA,CAACS,WAAW;MAAAuG,QAAA,EACThD,KAAK,CAACyD,MAAM,KAAK,CAAC,gBACjBzH,OAAA,CAACoC,UAAU;QAAA4E,QAAA,gBACThH,OAAA;UAAK0H,SAAS,EAAC,MAAM;UAAAV,QAAA,EAAC;QAAE;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAK,CAAC,eAC9BpH,OAAA;UAAK0H,SAAS,EAAC,OAAO;UAAAV,QAAA,EAAC;QAAY;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAK,CAAC,eACzCpH,OAAA;UAAK0H,SAAS,EAAC,aAAa;UAAAV,QAAA,EAAC;QAE7B;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAK,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACI,CAAC,gBAEbpH,OAAA,CAACW,QAAQ;QAAAqG,QAAA,EACNhD,KAAK,CAAC2D,GAAG,CAACxC,IAAI,iBACbnF,OAAA,CAACa,aAAa;UAAAmG,QAAA,eACZhH,OAAA,CAACe,OAAO;YACN6G,OAAO,EAAG1C,CAAC,IAAKD,eAAe,CAACC,CAAC,EAAEC,IAAI,CAAE;YACzC0C,aAAa,EAAG3C,CAAC,IAAKD,eAAe,CAACC,CAAC,EAAEC,IAAI,CAAE;YAAA6B,QAAA,gBAE/ChH,OAAA,CAACmB,UAAU;cAAA6F,QAAA,gBACThH,OAAA,CAACqB,QAAQ;gBAAA4F,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAE,CAAC,eACZpH,OAAA,CAACuB,WAAW;gBAAAyF,QAAA,eACVhH,OAAA,CAACyB,eAAe;kBAAAuF,QAAA,EAAE7B,IAAI,CAAC2C;gBAAY;kBAAAb,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAkB;cAAC;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAC3C,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACJ,CAAC,eAEbpH,OAAA,CAAC2B,eAAe;cAAAqF,QAAA,EACb7B,IAAI,CAAC4C;YAAgB;cAAAd,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACP,CAAC,eAElBpH,OAAA,CAAC6B,QAAQ;cAAAmF,QAAA,gBACPhH,OAAA,CAAC+B,eAAe;gBAAAiF,QAAA,EACbF,kBAAkB,CAAC3B,IAAI,CAACe,kBAAkB;cAAC;gBAAAe,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAC7B,CAAC,eAClBpH,OAAA,CAACkC,SAAS;gBAAA8E,QAAA,EACPX,UAAU,CAAClB,IAAI,CAAC6C,UAAU;cAAC;gBAAAf,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACnB,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACJ,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACJ;QAAC,GAxBQjC,IAAI,CAACY,EAAE;UAAAkB,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAyBZ,CAChB;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACM;IACX;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACU,CAAC,EAGbhD,WAAW,iBACVpE,OAAA,CAACsC,oBAAoB;MAACE,EAAE,EAAE4B,WAAW,CAACkB,CAAE;MAAC/C,EAAE,EAAE6B,WAAW,CAACoB,CAAE;MAAAwB,QAAA,gBACzDhH,OAAA,CAAC0C,eAAe;QACdkF,OAAO,EAAEA,CAAA,KAAMlC,uBAAuB,CAAC,UAAU,EAAEtB,WAAW,CAACe,IAAI,CAAE;QAAA6B,QAAA,EACtE;MAED;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAiB,CAAC,eAClBpH,OAAA,CAAC0C,eAAe;QACdkF,OAAO,EAAEA,CAAA,KAAMlC,uBAAuB,CAAC,QAAQ,EAAEtB,WAAW,CAACe,IAAI,CAAE;QAAA6B,QAAA,EACpE;MAED;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAiB,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACE,CACvB,EAGA9C,iBAAiB,iBAChBtE,OAAA,CAAC4C,YAAY;MAACgF,OAAO,EAAEA,CAAA,KAAMrD,oBAAoB,CAAC,IAAI,CAAE;MAAAyC,QAAA,eACtDhH,OAAA,CAAC8C,YAAY;QAAC8E,OAAO,EAAG1C,CAAC,IAAKA,CAAC,CAAC+C,eAAe,CAAC,CAAE;QAAAjB,QAAA,gBAChDhH,OAAA,CAACgD,UAAU;UAAAgE,QAAA,EACR1C,iBAAiB,CAACe,IAAI,KAAK,UAAU,GAAG,SAAS,GAAG;QAAO;UAAA4B,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAClD,CAAC,eACbpH,OAAA,CAACmD,YAAY;UAAA6D,QAAA,EACV1C,iBAAiB,CAACe,IAAI,KAAK,UAAU,GAClC,kCAAkCf,iBAAiB,CAACa,IAAI,CAAC4C,gBAAgB,MAAMzD,iBAAiB,CAACa,IAAI,CAAC2C,YAAY,oBAAoB,GACtI;QAAqC;UAAAb,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAE7B,CAAC,eACfpH,OAAA,CAACsD,YAAY;UAAA0D,QAAA,gBACXhH,OAAA,CAACwD,WAAW;YACVE,QAAQ,EAAC,WAAW;YACpBkE,OAAO,EAAEA,CAAA,KAAMrD,oBAAoB,CAAC,IAAI,CAAE;YAAAyC,QAAA,EAC3C;UAED;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAa,CAAC,eACdpH,OAAA,CAACwD,WAAW;YACVE,QAAQ,EAAC,SAAS;YAClBkE,OAAO,EAAEhC,mBAAoB;YAAAoB,QAAA,EAE5B1C,iBAAiB,CAACe,IAAI,KAAK,UAAU,GAAG,MAAM,GAAG;UAAI;YAAA4B,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAC3C,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACF,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACH;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACH,CACf;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACQ,CAAC;AAEhB,CAAC;AAACrD,EAAA,CAtOIH,aAA2C;AAAAsE,IAAA,GAA3CtE,aAA2C;AAwOjD,eAAeA,aAAa;AAAC,IAAAzD,EAAA,EAAAE,GAAA,EAAAG,GAAA,EAAAE,GAAA,EAAAE,GAAA,EAAAE,GAAA,EAAAI,GAAA,EAAAE,GAAA,EAAAE,GAAA,EAAAE,GAAA,EAAAE,GAAA,EAAAE,IAAA,EAAAE,IAAA,EAAAG,IAAA,EAAAE,IAAA,EAAAE,IAAA,EAAAI,IAAA,EAAAE,IAAA,EAAAE,IAAA,EAAAE,IAAA,EAAAG,IAAA,EAAAG,IAAA,EAAAE,IAAA,EAAAI,IAAA,EAAAuE,IAAA;AAAAC,YAAA,CAAAhI,EAAA;AAAAgI,YAAA,CAAA9H,GAAA;AAAA8H,YAAA,CAAA3H,GAAA;AAAA2H,YAAA,CAAAzH,GAAA;AAAAyH,YAAA,CAAAvH,GAAA;AAAAuH,YAAA,CAAArH,GAAA;AAAAqH,YAAA,CAAAjH,GAAA;AAAAiH,YAAA,CAAA/G,GAAA;AAAA+G,YAAA,CAAA7G,GAAA;AAAA6G,YAAA,CAAA3G,GAAA;AAAA2G,YAAA,CAAAzG,GAAA;AAAAyG,YAAA,CAAAvG,IAAA;AAAAuG,YAAA,CAAArG,IAAA;AAAAqG,YAAA,CAAAlG,IAAA;AAAAkG,YAAA,CAAAhG,IAAA;AAAAgG,YAAA,CAAA9F,IAAA;AAAA8F,YAAA,CAAA1F,IAAA;AAAA0F,YAAA,CAAAxF,IAAA;AAAAwF,YAAA,CAAAtF,IAAA;AAAAsF,YAAA,CAAApF,IAAA;AAAAoF,YAAA,CAAAjF,IAAA;AAAAiF,YAAA,CAAA9E,IAAA;AAAA8E,YAAA,CAAA5E,IAAA;AAAA4E,YAAA,CAAAxE,IAAA;AAAAwE,YAAA,CAAAD,IAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}