{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\sungh\\\\Desktop\\\\chat_work_ver2\\\\frontend\\\\src\\\\features\\\\shared\\\\components\\\\ConversationSidebar.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { Sidebar, SidebarHeader, SidebarTitle, SidebarContent, SidebarMenuContent, SidebarToggleButton } from '../styles/GlobalStyle';\nimport { chatApi } from '../api/chatApi';\nimport styled from 'styled-components';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst AccordionContainer = styled.div`\n  width: 100%;\n`;\n_c = AccordionContainer;\nconst AccordionItem = styled.div`\n  border-bottom: 1px solid #f0f0f0;\n`;\n_c2 = AccordionItem;\nconst AccordionHeader = styled.div`\n  padding: 12px 16px;\n  cursor: pointer;\n  background: ${props => props.$isSelected ? 'linear-gradient(135deg, #6c757d 0%, #5a6268 100%)' : 'transparent'};\n  color: ${props => props.$isSelected ? 'white' : '#333'};\n  font-weight: ${props => props.$isSelected ? '600' : '500'};\n  border-radius: ${props => props.$isSelected ? '8px' : '0'};\n  margin: ${props => props.$isSelected ? '4px 8px' : '0'};\n  transition: all 0.2s ease;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  \n  &:hover {\n    background: ${props => props.$isSelected ? 'linear-gradient(135deg, #6c757d 0%, #5a6268 100%)' : '#f8f9fa'};\n  }\n`;\n_c3 = AccordionHeader;\nconst ThreadsList = styled.div`\n  max-height: ${props => props.$isExpanded ? '300px' : '0'};\n  overflow: hidden;\n  transition: max-height 0.3s ease;\n  background: #f8f9fa;\n`;\n_c4 = ThreadsList;\nconst ResizableContainer = styled.div`\n  position: relative;\n  height: ${props => props.$isExpanded ? `${props.$height}px` : '0'};\n  min-height: ${props => props.$isExpanded ? '100px' : '0'};\n  overflow: hidden;\n  transition: height 0.3s ease;\n  background: #f8f9fa;\n  border-bottom: ${props => props.$isExpanded ? '2px solid #ddd' : 'none'};\n  \n  &:hover {\n    border-bottom-color: ${props => props.$isExpanded ? '#6c757d' : 'transparent'};\n  }\n`;\n_c5 = ResizableContainer;\nconst InteractionRecordsList = styled.div`\n  height: calc(100% - 6px);\n  overflow-y: auto;\n  padding: 8px;\n  padding-bottom: 14px; /* resize handle을 위한 여유 공간 */\n`;\n_c6 = InteractionRecordsList;\nconst ResizeHandle = styled.div`\n  position: absolute;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  height: 6px;\n  cursor: ns-resize;\n  background: rgba(108, 117, 125, 0.3);\n  z-index: 10;\n  border-top: 1px solid #ddd;\n  \n  &:hover {\n    background: #6c757d;\n    border-top-color: #5a6268;\n  }\n  \n  &:active {\n    background: #5a6268;\n    border-top-color: #495057;\n  }\n  \n  /* 더 넓은 클릭 영역을 위한 가상 요소 */\n  &::before {\n    content: '';\n    position: absolute;\n    top: -3px;\n    left: 0;\n    right: 0;\n    height: 12px;\n    cursor: ns-resize;\n  }\n`;\n_c7 = ResizeHandle;\nconst RecordThreadItem = styled.div`\n  padding: 8px 12px;\n  cursor: pointer;\n  color: ${props => props.$isSelected ? '#6c757d' : '#666'};\n  font-size: 13px;\n  border-left: 2px solid ${props => props.$isSelected ? '#6c757d' : 'transparent'};\n  background: ${props => props.$isSelected ? '#f0f0f0' : 'transparent'};\n  transition: all 0.2s ease;\n  margin: 2px 0;\n  border-radius: 4px;\n  border: 1px solid #e0e0e0;\n  \n  &:hover {\n    background: #f0f0f0;\n    color: #6c757d;\n    border-color: #6c757d;\n  }\n`;\n_c8 = RecordThreadItem;\nconst ThreadTypeTag = styled.span`\n  display: inline-block;\n  padding: 2px 6px;\n  border-radius: 3px;\n  font-size: 9px;\n  font-weight: 600;\n  text-transform: uppercase;\n  margin-right: 6px;\n  background-color: #6c757d;\n  color: white;\n`;\n_c9 = ThreadTypeTag;\nconst ThreadItem = styled.div`\n  padding: 8px 32px 8px 32px;\n  cursor: pointer;\n  color: ${props => props.$isSelected ? '#6c757d' : '#666'};\n  font-size: 14px;\n  border-left: 3px solid ${props => props.$isSelected ? '#6c757d' : 'transparent'};\n  background: ${props => props.$isSelected ? '#f8f9fa' : 'transparent'};\n  transition: all 0.2s ease;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  \n  &:hover {\n    background: #f8f9fa;\n    color: #6c757d;\n  }\n`;\n_c0 = ThreadItem;\nconst ThreadItemContent = styled.div`\n  flex: 1;\n`;\n_c1 = ThreadItemContent;\nconst DeleteThreadButton = styled.button`\n  background: none;\n  border: none;\n  cursor: pointer;\n  color: #999;\n  font-size: 14px;\n  padding: 4px;\n  border-radius: 4px;\n  opacity: 0;\n  transition: all 0.2s ease;\n  \n  &:hover {\n    background: #e9ecef;\n    color: #dc3545;\n  }\n\n  ${ThreadItem}:hover & {\n    opacity: 1;\n  }\n`;\n_c10 = DeleteThreadButton;\nconst ThreadTitle = styled.div`\n  font-weight: 500;\n  margin-bottom: 2px;\n`;\n_c11 = ThreadTitle;\nconst ThreadTime = styled.div`\n  font-size: 12px;\n  opacity: 0.7;\n`;\n_c12 = ThreadTime;\nconst HeaderContent = styled.div`\n  display: flex;\n  align-items: center;\n  gap: 8px;\n`;\n_c13 = HeaderContent;\nconst SubTitle = styled.div`\n  font-size: 12px;\n  opacity: 0.7;\n`;\n_c14 = SubTitle;\nconst ConversationSidebar = ({\n  selectedItem,\n  onSelectItem,\n  isCollapsed = false,\n  onToggle,\n  selectedPersonaName,\n  selectedPersonaId,\n  refreshTrigger,\n  mode,\n  personas,\n  verbalizationThreads,\n  onSelectVerbalizationThread,\n  onRefreshTrigger\n}) => {\n  _s();\n  const [expandedItems, setExpandedItems] = useState(new Set());\n  const [threads, setThreads] = useState({\n    interpretation: [],\n    proceed: [],\n    sentence: []\n  });\n  const [interactionRecords, setInteractionRecords] = useState([]);\n  const [allRecentThreads, setAllRecentThreads] = useState([]);\n  const [selectedThreadId, setSelectedThreadId] = useState(null);\n  const [interactionHeight, setInteractionHeight] = useState(300);\n  const [isResizing, setIsResizing] = useState(false);\n  const menuItems = mode === 'recent' ? [] // 최근 상호작용 모드에서는 메뉴 아이템 없음\n  : [{\n    id: 'interpretation',\n    name: '해석'\n  }, {\n    id: 'proceed',\n    name: '나아가기'\n  }, {\n    id: 'sentence',\n    name: '문장'\n  }, {\n    id: 'interaction_history',\n    name: '상호작용 기록'\n  }];\n  useEffect(() => {\n    const loadData = async () => {\n      if (mode === 'recent' && personas) {\n        // 최근 상호작용 모드: 모든 페르소나의 스레드 + 언어화 스레드 로드\n        try {\n          const allPersonaThreads = [];\n\n          // 일반 페르소나 스레드 로드\n          for (const [personaId, persona] of Object.entries(personas)) {\n            try {\n              const response = await chatApi.getPersonaThreads(personaId);\n              if (response.data) {\n                const threadsWithPersonaInfo = response.data.map(thread => ({\n                  ...thread,\n                  persona_id: personaId,\n                  persona_name: persona.name\n                }));\n                allPersonaThreads.push(...threadsWithPersonaInfo);\n              }\n            } catch (error) {\n              console.error(`페르소나 ${personaId} 스레드 로드 실패:`, error);\n            }\n          }\n\n          // 언어화 스레드 로드\n          try {\n            const verbalizationResponse = await chatApi.getVerbalizationThreads();\n            if (verbalizationResponse.data) {\n              const verbalizationThreadsWithInfo = verbalizationResponse.data.map(thread => ({\n                ...thread,\n                persona_id: \"verbalization\",\n                persona_name: \"언어화\"\n              }));\n              allPersonaThreads.push(...verbalizationThreadsWithInfo);\n            }\n          } catch (error) {\n            console.error('언어화 스레드 로드 실패:', error);\n          }\n\n          // 최신순으로 정렬 (updated_at이 있으면 우선, 없으면 created_at 사용)\n          const sortedThreads = allPersonaThreads.sort((a, b) => {\n            const timeA = a.updated_at ? new Date(a.updated_at).getTime() : new Date(a.created_at).getTime();\n            const timeB = b.updated_at ? new Date(b.updated_at).getTime() : new Date(b.created_at).getTime();\n            return timeB - timeA;\n          });\n          setAllRecentThreads(sortedThreads);\n        } catch (error) {\n          console.error('전체 스레드 로드 실패:', error);\n        }\n        return;\n      }\n      if (!selectedPersonaId) return;\n      try {\n        // 기존 페르소나 모드 로직\n        const threadsResponse = await chatApi.getPersonaThreads(selectedPersonaId);\n        if (threadsResponse.data) {\n          const threadsByType = {\n            interpretation: threadsResponse.data.filter(t => t.thread_type === 'interpretation').sort((a, b) => {\n              const timeA = a.updated_at ? new Date(a.updated_at).getTime() : new Date(a.created_at).getTime();\n              const timeB = b.updated_at ? new Date(b.updated_at).getTime() : new Date(b.created_at).getTime();\n              return timeB - timeA;\n            }),\n            proceed: threadsResponse.data.filter(t => t.thread_type === 'proceed').sort((a, b) => {\n              const timeA = a.updated_at ? new Date(a.updated_at).getTime() : new Date(a.created_at).getTime();\n              const timeB = b.updated_at ? new Date(b.updated_at).getTime() : new Date(b.created_at).getTime();\n              return timeB - timeA;\n            }),\n            sentence: threadsResponse.data.filter(t => t.thread_type === 'sentence').sort((a, b) => {\n              const timeA = a.updated_at ? new Date(a.updated_at).getTime() : new Date(a.created_at).getTime();\n              const timeB = b.updated_at ? new Date(b.updated_at).getTime() : new Date(b.created_at).getTime();\n              return timeB - timeA;\n            })\n          };\n          setThreads(threadsByType);\n        }\n\n        // 상호작용 기록 로드\n        const recordsResponse = await chatApi.getAllInteractionRecords();\n        if (recordsResponse.data) {\n          const sortedRecords = recordsResponse.data.map(record => ({\n            ...record,\n            threads: record.threads.sort((a, b) => {\n              const timeA = a.updated_at ? new Date(a.updated_at).getTime() : new Date(a.created_at).getTime();\n              const timeB = b.updated_at ? new Date(b.updated_at).getTime() : new Date(b.created_at).getTime();\n              return timeB - timeA;\n            })\n          }));\n          setInteractionRecords(sortedRecords);\n        }\n      } catch (error) {\n        console.error('데이터 로드 실패:', error);\n      }\n    };\n    loadData();\n  }, [selectedPersonaId, refreshTrigger, mode, personas]);\n  const handleAccordionToggle = itemId => {\n    const newExpanded = new Set(expandedItems);\n    if (newExpanded.has(itemId)) {\n      newExpanded.delete(itemId);\n    } else {\n      newExpanded.add(itemId);\n    }\n    setExpandedItems(newExpanded);\n    if (itemId === 'interaction_history') {\n      onSelectItem(itemId);\n    } else {\n      const itemThreads = threads[itemId] || [];\n      if (itemThreads.length === 0) {\n        onSelectItem(itemId);\n      } else {\n        const latestThread = itemThreads[0];\n        setSelectedThreadId(latestThread.id);\n        onSelectItem(`${itemId}-thread-${latestThread.id}`);\n      }\n    }\n  };\n  const handleRecordThreadSelect = thread => {\n    setSelectedThreadId(thread.id);\n    onSelectItem(`${thread.thread_type}-thread-${thread.id}`);\n  };\n  const handleMouseDown = e => {\n    e.preventDefault();\n    e.stopPropagation();\n    setIsResizing(true);\n    const startY = e.clientY;\n    const startHeight = interactionHeight;\n    const handleMouseMove = e => {\n      const deltaY = e.clientY - startY;\n      const newHeight = Math.max(100, Math.min(600, startHeight + deltaY));\n      setInteractionHeight(newHeight);\n    };\n    const handleMouseUp = () => {\n      setIsResizing(false);\n      document.removeEventListener('mousemove', handleMouseMove);\n      document.removeEventListener('mouseup', handleMouseUp);\n    };\n    document.addEventListener('mousemove', handleMouseMove);\n    document.addEventListener('mouseup', handleMouseUp);\n  };\n  const formatTime = timestamp => {\n    return new Date(timestamp).toLocaleTimeString('ko-KR', {\n      hour: '2-digit',\n      minute: '2-digit'\n    });\n  };\n  const formatDate = timestamp => {\n    return new Date(timestamp).toLocaleDateString('ko-KR', {\n      month: 'short',\n      day: 'numeric'\n    });\n  };\n  const handleThreadSelect = (threadId, itemType) => {\n    setSelectedThreadId(threadId);\n    onSelectItem(`${itemType}-thread-${threadId}`);\n  };\n  const handleDeleteThread = async (threadId, e) => {\n    e.stopPropagation();\n    if (window.confirm('이 스레드를 삭제하시겠습니까?')) {\n      try {\n        console.log('=== 스레드 삭제 시작 ===');\n        console.log('삭제할 threadId:', threadId);\n        console.log('현재 mode:', mode);\n        const result = await chatApi.deleteThread(threadId);\n        console.log('API 응답:', result);\n        console.log('result.data:', result.data);\n        console.log('result.error:', result.error);\n        if (result.data && result.data.success) {\n          console.log('삭제 성공');\n          if (mode === 'verbalization') {\n            // 언어화 모드인 경우: 부모 컴포넌트에 업데이트 요청\n            // verbalizationThreads는 props로 받아오므로 직접 수정하지 않고 부모에게 알림\n            // 삭제된 스레드가 현재 선택된 스레드인 경우 선택 해제\n            if (selectedThreadId === threadId) {\n              setSelectedThreadId(null);\n              if (onSelectVerbalizationThread) {\n                onSelectVerbalizationThread(null);\n              }\n            }\n            // refreshTrigger를 통해 부모 컴포넌트에 업데이트 요청\n            // (App.tsx에서 verbalizationThreads를 다시 로드하게 됨)\n            if (onRefreshTrigger) {\n              onRefreshTrigger();\n            }\n          } else {\n            // 일반 페르소나 모드인 경우: 기존 로직 유지\n            const updatedThreads = {\n              ...threads\n            };\n            Object.keys(updatedThreads).forEach(key => {\n              updatedThreads[key] = updatedThreads[key].filter(t => t.id !== threadId);\n            });\n            setThreads(updatedThreads);\n            if (selectedThreadId === threadId) {\n              setSelectedThreadId(null);\n            }\n          }\n          console.log('UI 업데이트 완료');\n        } else {\n          var _result$data, _result$data2;\n          console.error('삭제 실패:', result.error || ((_result$data = result.data) === null || _result$data === void 0 ? void 0 : _result$data.message));\n          let errorMessage = '스레드 삭제에 실패했습니다';\n          if (result.error) {\n            if (result.error.includes('네트워크 오류') || result.error.includes('Failed to fetch')) {\n              errorMessage += ': 백엔드 서버에 연결할 수 없습니다. 서버가 실행 중인지 확인해주세요.';\n            } else {\n              errorMessage += ': ' + result.error;\n            }\n          } else if ((_result$data2 = result.data) !== null && _result$data2 !== void 0 && _result$data2.message) {\n            errorMessage += ': ' + result.data.message;\n          }\n          alert(errorMessage);\n        }\n      } catch (error) {\n        console.error('스레드 삭제 실패:', error);\n        alert('스레드 삭제 중 예상치 못한 오류가 발생했습니다: ' + (error instanceof Error ? error.message : String(error)));\n      }\n    }\n  };\n  const getThreadTypeLabel = type => {\n    switch (type) {\n      case 'interpretation':\n        return '해석';\n      case 'proceed':\n        return '나아가기';\n      case 'sentence':\n        return '문장';\n      case 'verbalization':\n        return '언어화';\n      default:\n        return type;\n    }\n  };\n  const getThreadContent = thread => {\n    var _thread$content;\n    if (thread.messages && thread.messages.length > 0) {\n      const firstMessage = thread.messages[0];\n      return firstMessage.content.length > 30 ? firstMessage.content.substring(0, 30) + '...' : firstMessage.content;\n    }\n    return ((_thread$content = thread.content) === null || _thread$content === void 0 ? void 0 : _thread$content.length) > 30 ? thread.content.substring(0, 30) + '...' : thread.content || '내용 없음';\n  };\n  const renderThreads = itemId => {\n    const itemThreads = threads[itemId] || [];\n    const isExpanded = expandedItems.has(itemId);\n    return /*#__PURE__*/_jsxDEV(ThreadsList, {\n      $isExpanded: isExpanded,\n      children: [itemThreads.map((thread, index) => /*#__PURE__*/_jsxDEV(ThreadItem, {\n        $isSelected: selectedThreadId === thread.id,\n        onClick: () => handleThreadSelect(thread.id, itemId),\n        children: [/*#__PURE__*/_jsxDEV(ThreadItemContent, {\n          children: [/*#__PURE__*/_jsxDEV(ThreadTitle, {\n            children: [itemId === 'interpretation' && `해석 #${itemThreads.length - index}`, itemId === 'proceed' && `나아가기 #${itemThreads.length - index}`, itemId === 'sentence' && `문장 #${itemThreads.length - index}`]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 525,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(ThreadTime, {\n            children: [formatTime(thread.created_at), \" \\u2022 \", thread.messages.length, \"\\uAC1C \\uBA54\\uC2DC\\uC9C0\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 530,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 524,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(DeleteThreadButton, {\n          onClick: e => handleDeleteThread(thread.id, e),\n          title: \"\\uC2A4\\uB808\\uB4DC \\uC0AD\\uC81C\",\n          children: \"\\uD83D\\uDDD1\\uFE0F\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 534,\n          columnNumber: 13\n        }, this)]\n      }, thread.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 519,\n        columnNumber: 11\n      }, this)), itemThreads.length === 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          padding: '16px 32px',\n          fontSize: '14px',\n          color: '#999'\n        },\n        children: \"\\uC2A4\\uB808\\uB4DC\\uAC00 \\uC5C6\\uC2B5\\uB2C8\\uB2E4\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 543,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 517,\n      columnNumber: 7\n    }, this);\n  };\n  const renderInteractionRecords = () => {\n    const isExpanded = expandedItems.has('interaction_history');\n\n    // 현재 선택된 페르소나의 기록만 필터링\n    const currentPersonaRecord = interactionRecords.find(record => record.persona_id === selectedPersonaId);\n    return /*#__PURE__*/_jsxDEV(ResizableContainer, {\n      $isExpanded: isExpanded,\n      $height: interactionHeight,\n      children: isExpanded && /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(InteractionRecordsList, {\n          $isExpanded: isExpanded,\n          children: currentPersonaRecord ? currentPersonaRecord.threads.map(thread => /*#__PURE__*/_jsxDEV(RecordThreadItem, {\n            $isSelected: selectedThreadId === thread.id,\n            onClick: () => handleRecordThreadSelect(thread),\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(ThreadTypeTag, {\n                type: thread.thread_type,\n                children: getThreadTypeLabel(thread.thread_type)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 575,\n                columnNumber: 23\n              }, this), getThreadContent(thread)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 574,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                fontSize: '11px',\n                opacity: 0.7,\n                marginTop: '2px'\n              },\n              children: formatTime(thread.created_at)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 580,\n              columnNumber: 21\n            }, this)]\n          }, thread.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 569,\n            columnNumber: 19\n          }, this)) : /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              padding: '16px',\n              fontSize: '14px',\n              color: '#999',\n              textAlign: 'center'\n            },\n            children: \"\\uC774 \\uD398\\uB974\\uC18C\\uB098\\uC758 \\uC0C1\\uD638\\uC791\\uC6A9 \\uAE30\\uB85D\\uC774 \\uC5C6\\uC2B5\\uB2C8\\uB2E4\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 586,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 566,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(ResizeHandle, {\n          onMouseDown: handleMouseDown\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 591,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 560,\n      columnNumber: 7\n    }, this);\n  };\n  const getThreadTitle = thread => {\n    let content = '';\n    if (thread.messages && thread.messages.length > 0) {\n      const firstUserMessage = thread.messages.find(m => m.role === 'user');\n      if (firstUserMessage) {\n        content = firstUserMessage.content;\n      } else if (thread.messages[0]) {\n        content = thread.messages[0].content;\n      }\n    } else if (thread.content) {\n      content = thread.content;\n    }\n    if (content.length > 50) {\n      return content.substring(0, 50) + '...';\n    }\n    return content || '내용 없음';\n  };\n  const renderRecentInteractions = () => {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        padding: '16px 0'\n      },\n      children: [allRecentThreads.map(thread => {\n        var _thread$messages;\n        return /*#__PURE__*/_jsxDEV(ThreadItem, {\n          $isSelected: selectedThreadId === thread.id,\n          onClick: () => {\n            setSelectedThreadId(thread.id);\n            onSelectItem(`recent-thread-${thread.id}-${thread.persona_id}`);\n          },\n          children: /*#__PURE__*/_jsxDEV(ThreadItemContent, {\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                display: 'flex',\n                alignItems: 'center',\n                gap: '8px',\n                marginBottom: '4px'\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                style: {\n                  padding: '2px 6px',\n                  background: '#ffffff',\n                  color: '#000000',\n                  border: '1px solid #000000',\n                  borderRadius: '4px',\n                  fontSize: '10px',\n                  fontWeight: '600'\n                },\n                children: thread.persona_name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 632,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(ThreadTypeTag, {\n                type: thread.thread_type,\n                children: getThreadTypeLabel(thread.thread_type)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 643,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 631,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(ThreadTitle, {\n              children: getThreadTitle(thread)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 647,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(ThreadTime, {\n              children: [formatTime(thread.created_at), \" \\u2022 \", ((_thread$messages = thread.messages) === null || _thread$messages === void 0 ? void 0 : _thread$messages.length) || 0, \"\\uAC1C \\uBA54\\uC2DC\\uC9C0\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 650,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 630,\n            columnNumber: 13\n          }, this)\n        }, `${thread.persona_id}-${thread.id}`, false, {\n          fileName: _jsxFileName,\n          lineNumber: 622,\n          columnNumber: 11\n        }, this);\n      }), allRecentThreads.length === 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          padding: '16px 32px',\n          fontSize: '14px',\n          color: '#999',\n          textAlign: 'center'\n        },\n        children: \"\\uC0C1\\uD638\\uC791\\uC6A9 \\uAE30\\uB85D\\uC774 \\uC5C6\\uC2B5\\uB2C8\\uB2E4\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 657,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 620,\n      columnNumber: 7\n    }, this);\n  };\n  const renderVerbalizationThreads = () => {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        padding: '16px 0'\n      },\n      children: [verbalizationThreads && [...verbalizationThreads].sort((a, b) => {\n        const timeA = a.updated_at ? new Date(a.updated_at).getTime() : new Date(a.created_at).getTime();\n        const timeB = b.updated_at ? new Date(b.updated_at).getTime() : new Date(b.created_at).getTime();\n        return timeB - timeA;\n      }).map((thread, index) => {\n        var _thread$messages2;\n        return /*#__PURE__*/_jsxDEV(ThreadItem, {\n          $isSelected: selectedThreadId === thread.id,\n          onClick: () => {\n            setSelectedThreadId(thread.id);\n            if (onSelectVerbalizationThread) {\n              onSelectVerbalizationThread(thread);\n            }\n          },\n          children: [/*#__PURE__*/_jsxDEV(ThreadItemContent, {\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                display: 'flex',\n                alignItems: 'center',\n                gap: '8px',\n                marginBottom: '4px'\n              },\n              children: /*#__PURE__*/_jsxDEV(\"span\", {\n                style: {\n                  padding: '2px 6px',\n                  background: '#ffffff',\n                  color: '#000000',\n                  border: '1px solid #000000',\n                  borderRadius: '4px',\n                  fontSize: '10px',\n                  fontWeight: '600'\n                },\n                children: \"\\uC5B8\\uC5B4\\uD654\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 687,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 686,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(ThreadTitle, {\n              children: [\"\\uC5B8\\uC5B4\\uD654 #\", verbalizationThreads.length - index]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 699,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(ThreadTime, {\n              children: [formatTime(thread.created_at), \" \\u2022 \", ((_thread$messages2 = thread.messages) === null || _thread$messages2 === void 0 ? void 0 : _thread$messages2.length) || 0, \"\\uAC1C \\uBA54\\uC2DC\\uC9C0\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 702,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 685,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(DeleteThreadButton, {\n            onClick: e => handleDeleteThread(thread.id, e),\n            title: \"\\uC2A4\\uB808\\uB4DC \\uC0AD\\uC81C\",\n            children: \"\\uD83D\\uDDD1\\uFE0F\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 706,\n            columnNumber: 13\n          }, this)]\n        }, thread.id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 675,\n          columnNumber: 11\n        }, this);\n      }), (!verbalizationThreads || verbalizationThreads.length === 0) && /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          padding: '16px 32px',\n          fontSize: '14px',\n          color: '#999',\n          textAlign: 'center'\n        },\n        children: [\"\\uC5B8\\uC5B4\\uD654 \\uB300\\uD654\\uAC00 \\uC5C6\\uC2B5\\uB2C8\\uB2E4.\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 716,\n          columnNumber: 26\n        }, this), \"\\uC0C8 \\uB300\\uD654\\uB97C \\uC2DC\\uC791\\uD574\\uBCF4\\uC138\\uC694!\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 715,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 667,\n      columnNumber: 7\n    }, this);\n  };\n  return /*#__PURE__*/_jsxDEV(Sidebar, {\n    width: \"250px\",\n    $isCollapsed: isCollapsed,\n    $variant: \"conversation\",\n    children: [onToggle && /*#__PURE__*/_jsxDEV(SidebarToggleButton, {\n      onClick: onToggle\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 727,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(SidebarHeader, {\n      $isCollapsed: isCollapsed,\n      children: /*#__PURE__*/_jsxDEV(HeaderContent, {\n        children: [mode === 'recent' && /*#__PURE__*/_jsxDEV(SidebarTitle, {\n          children: \"\\uCD5C\\uADFC \\uC0C1\\uD638\\uC791\\uC6A9\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 733,\n          columnNumber: 33\n        }, this), mode === 'verbalization' && /*#__PURE__*/_jsxDEV(SidebarTitle, {\n          children: \"\\uC5B8\\uC5B4\\uD654\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 734,\n          columnNumber: 40\n        }, this), mode === 'vault' && /*#__PURE__*/_jsxDEV(SidebarTitle, {\n          children: \"\\uC800\\uC7A5\\uACE0\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 735,\n          columnNumber: 32\n        }, this), mode === 'persona' && /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(SidebarTitle, {\n            children: selectedPersonaName || '페르소나'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 738,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(SubTitle, {\n            children: \"\\uB300\\uD654 \\uBAA9\\uB85D\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 739,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 732,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 731,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(SidebarContent, {\n      $isCollapsed: isCollapsed,\n      children: /*#__PURE__*/_jsxDEV(SidebarMenuContent, {\n        $variant: \"conversation\",\n        children: [mode === 'recent' && renderRecentInteractions(), mode === 'verbalization' && renderVerbalizationThreads(), mode === 'vault' && /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            padding: '15px',\n            color: '#868e96',\n            fontSize: '13px'\n          },\n          children: \"\\uBA54\\uC778 \\uD654\\uBA74\\uC5D0\\uC11C \\uC800\\uC7A5\\uACE0\\uC758 \\uC138\\uBD80 \\uBA54\\uB274\\uB97C \\uD655\\uC778\\uD558\\uC138\\uC694.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 750,\n          columnNumber: 13\n        }, this), mode === 'persona' && /*#__PURE__*/_jsxDEV(AccordionContainer, {\n          children: menuItems.map(item => /*#__PURE__*/_jsxDEV(AccordionItem, {\n            children: [/*#__PURE__*/_jsxDEV(AccordionHeader, {\n              $isSelected: selectedItem === item.id,\n              $isExpanded: expandedItems.has(item.id),\n              onClick: () => handleAccordionToggle(item.id),\n              children: /*#__PURE__*/_jsxDEV(\"span\", {\n                children: item.name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 763,\n                columnNumber: 23\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 758,\n              columnNumber: 19\n            }, this), item.id === 'interaction_history' ? renderInteractionRecords() : renderThreads(item.id)]\n          }, item.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 757,\n            columnNumber: 17\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 755,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 746,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 745,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 725,\n    columnNumber: 5\n  }, this);\n};\n_s(ConversationSidebar, \"LAQW8jq1oM35e/baiwyc71/bXYo=\");\n_c15 = ConversationSidebar;\nexport default ConversationSidebar;\nvar _c, _c2, _c3, _c4, _c5, _c6, _c7, _c8, _c9, _c0, _c1, _c10, _c11, _c12, _c13, _c14, _c15;\n$RefreshReg$(_c, \"AccordionContainer\");\n$RefreshReg$(_c2, \"AccordionItem\");\n$RefreshReg$(_c3, \"AccordionHeader\");\n$RefreshReg$(_c4, \"ThreadsList\");\n$RefreshReg$(_c5, \"ResizableContainer\");\n$RefreshReg$(_c6, \"InteractionRecordsList\");\n$RefreshReg$(_c7, \"ResizeHandle\");\n$RefreshReg$(_c8, \"RecordThreadItem\");\n$RefreshReg$(_c9, \"ThreadTypeTag\");\n$RefreshReg$(_c0, \"ThreadItem\");\n$RefreshReg$(_c1, \"ThreadItemContent\");\n$RefreshReg$(_c10, \"DeleteThreadButton\");\n$RefreshReg$(_c11, \"ThreadTitle\");\n$RefreshReg$(_c12, \"ThreadTime\");\n$RefreshReg$(_c13, \"HeaderContent\");\n$RefreshReg$(_c14, \"SubTitle\");\n$RefreshReg$(_c15, \"ConversationSidebar\");","map":{"version":3,"names":["React","useState","useEffect","Sidebar","SidebarHeader","SidebarTitle","SidebarContent","SidebarMenuContent","SidebarToggleButton","chatApi","styled","jsxDEV","_jsxDEV","Fragment","_Fragment","AccordionContainer","div","_c","AccordionItem","_c2","AccordionHeader","props","$isSelected","_c3","ThreadsList","$isExpanded","_c4","ResizableContainer","$height","_c5","InteractionRecordsList","_c6","ResizeHandle","_c7","RecordThreadItem","_c8","ThreadTypeTag","span","_c9","ThreadItem","_c0","ThreadItemContent","_c1","DeleteThreadButton","button","_c10","ThreadTitle","_c11","ThreadTime","_c12","HeaderContent","_c13","SubTitle","_c14","ConversationSidebar","selectedItem","onSelectItem","isCollapsed","onToggle","selectedPersonaName","selectedPersonaId","refreshTrigger","mode","personas","verbalizationThreads","onSelectVerbalizationThread","onRefreshTrigger","_s","expandedItems","setExpandedItems","Set","threads","setThreads","interpretation","proceed","sentence","interactionRecords","setInteractionRecords","allRecentThreads","setAllRecentThreads","selectedThreadId","setSelectedThreadId","interactionHeight","setInteractionHeight","isResizing","setIsResizing","menuItems","id","name","loadData","allPersonaThreads","personaId","persona","Object","entries","response","getPersonaThreads","data","threadsWithPersonaInfo","map","thread","persona_id","persona_name","push","error","console","verbalizationResponse","getVerbalizationThreads","verbalizationThreadsWithInfo","sortedThreads","sort","a","b","timeA","updated_at","Date","getTime","created_at","timeB","threadsResponse","threadsByType","filter","t","thread_type","recordsResponse","getAllInteractionRecords","sortedRecords","record","handleAccordionToggle","itemId","newExpanded","has","delete","add","itemThreads","length","latestThread","handleRecordThreadSelect","handleMouseDown","e","preventDefault","stopPropagation","startY","clientY","startHeight","handleMouseMove","deltaY","newHeight","Math","max","min","handleMouseUp","document","removeEventListener","addEventListener","formatTime","timestamp","toLocaleTimeString","hour","minute","formatDate","toLocaleDateString","month","day","handleThreadSelect","threadId","itemType","handleDeleteThread","window","confirm","log","result","deleteThread","success","updatedThreads","keys","forEach","key","_result$data","_result$data2","message","errorMessage","includes","alert","Error","String","getThreadTypeLabel","type","getThreadContent","_thread$content","messages","firstMessage","content","substring","renderThreads","isExpanded","children","index","onClick","fileName","_jsxFileName","lineNumber","columnNumber","title","style","padding","fontSize","color","renderInteractionRecords","currentPersonaRecord","find","opacity","marginTop","textAlign","onMouseDown","getThreadTitle","firstUserMessage","m","role","renderRecentInteractions","_thread$messages","display","alignItems","gap","marginBottom","background","border","borderRadius","fontWeight","renderVerbalizationThreads","_thread$messages2","width","$isCollapsed","$variant","item","_c15","$RefreshReg$"],"sources":["C:/Users/sungh/Desktop/chat_work_ver2/frontend/src/features/shared/components/ConversationSidebar.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport {\n  Sidebar,\n  SidebarHeader,\n  SidebarTitle,\n  SidebarContent,\n  SidebarMenuContent,\n  SidebarToggleButton,\n  ConversationMenuItem,\n} from '../styles/GlobalStyle';\nimport { chatApi } from '../api/chatApi';\nimport { TrainingThread, InteractionRecord } from '../types';\nimport styled from 'styled-components';\n\ninterface ConversationSidebarProps {\n  selectedItem: string | null;\n  onSelectItem: (itemId: string | null) => void;\n  isCollapsed?: boolean;\n  onToggle?: () => void;\n  selectedPersonaName?: string;\n  selectedPersonaId?: string;\n  refreshTrigger?: number;\n  mode?: 'persona' | 'recent' | 'verbalization' | 'vault';\n  personas?: Record<string, any>;\n  verbalizationThreads?: TrainingThread[];\n  onSelectVerbalizationThread?: (thread: TrainingThread | null) => void;\n  onRefreshTrigger?: () => void;\n}\n\nconst AccordionContainer = styled.div`\n  width: 100%;\n`;\n\nconst AccordionItem = styled.div`\n  border-bottom: 1px solid #f0f0f0;\n`;\n\nconst AccordionHeader = styled.div<{ $isSelected: boolean; $isExpanded: boolean }>`\n  padding: 12px 16px;\n  cursor: pointer;\n  background: ${props => props.$isSelected ? 'linear-gradient(135deg, #6c757d 0%, #5a6268 100%)' : 'transparent'};\n  color: ${props => props.$isSelected ? 'white' : '#333'};\n  font-weight: ${props => props.$isSelected ? '600' : '500'};\n  border-radius: ${props => props.$isSelected ? '8px' : '0'};\n  margin: ${props => props.$isSelected ? '4px 8px' : '0'};\n  transition: all 0.2s ease;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  \n  &:hover {\n    background: ${props => props.$isSelected ? 'linear-gradient(135deg, #6c757d 0%, #5a6268 100%)' : '#f8f9fa'};\n  }\n`;\n\nconst ThreadsList = styled.div<{ $isExpanded: boolean }>`\n  max-height: ${props => props.$isExpanded ? '300px' : '0'};\n  overflow: hidden;\n  transition: max-height 0.3s ease;\n  background: #f8f9fa;\n`;\n\nconst ResizableContainer = styled.div<{ $isExpanded: boolean; $height: number }>`\n  position: relative;\n  height: ${props => props.$isExpanded ? `${props.$height}px` : '0'};\n  min-height: ${props => props.$isExpanded ? '100px' : '0'};\n  overflow: hidden;\n  transition: height 0.3s ease;\n  background: #f8f9fa;\n  border-bottom: ${props => props.$isExpanded ? '2px solid #ddd' : 'none'};\n  \n  &:hover {\n    border-bottom-color: ${props => props.$isExpanded ? '#6c757d' : 'transparent'};\n  }\n`;\n\nconst InteractionRecordsList = styled.div<{ $isExpanded: boolean }>`\n  height: calc(100% - 6px);\n  overflow-y: auto;\n  padding: 8px;\n  padding-bottom: 14px; /* resize handle을 위한 여유 공간 */\n`;\n\nconst ResizeHandle = styled.div`\n  position: absolute;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  height: 6px;\n  cursor: ns-resize;\n  background: rgba(108, 117, 125, 0.3);\n  z-index: 10;\n  border-top: 1px solid #ddd;\n  \n  &:hover {\n    background: #6c757d;\n    border-top-color: #5a6268;\n  }\n  \n  &:active {\n    background: #5a6268;\n    border-top-color: #495057;\n  }\n  \n  /* 더 넓은 클릭 영역을 위한 가상 요소 */\n  &::before {\n    content: '';\n    position: absolute;\n    top: -3px;\n    left: 0;\n    right: 0;\n    height: 12px;\n    cursor: ns-resize;\n  }\n`;\n\nconst RecordThreadItem = styled.div<{ $isSelected: boolean }>`\n  padding: 8px 12px;\n  cursor: pointer;\n  color: ${props => props.$isSelected ? '#6c757d' : '#666'};\n  font-size: 13px;\n  border-left: 2px solid ${props => props.$isSelected ? '#6c757d' : 'transparent'};\n  background: ${props => props.$isSelected ? '#f0f0f0' : 'transparent'};\n  transition: all 0.2s ease;\n  margin: 2px 0;\n  border-radius: 4px;\n  border: 1px solid #e0e0e0;\n  \n  &:hover {\n    background: #f0f0f0;\n    color: #6c757d;\n    border-color: #6c757d;\n  }\n`;\n\nconst ThreadTypeTag = styled.span<{ type: string }>`\n  display: inline-block;\n  padding: 2px 6px;\n  border-radius: 3px;\n  font-size: 9px;\n  font-weight: 600;\n  text-transform: uppercase;\n  margin-right: 6px;\n  background-color: #6c757d;\n  color: white;\n`;\n\nconst ThreadItem = styled.div<{ $isSelected: boolean }>`\n  padding: 8px 32px 8px 32px;\n  cursor: pointer;\n  color: ${props => props.$isSelected ? '#6c757d' : '#666'};\n  font-size: 14px;\n  border-left: 3px solid ${props => props.$isSelected ? '#6c757d' : 'transparent'};\n  background: ${props => props.$isSelected ? '#f8f9fa' : 'transparent'};\n  transition: all 0.2s ease;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  \n  &:hover {\n    background: #f8f9fa;\n    color: #6c757d;\n  }\n`;\n\nconst ThreadItemContent = styled.div`\n  flex: 1;\n`;\n\nconst DeleteThreadButton = styled.button`\n  background: none;\n  border: none;\n  cursor: pointer;\n  color: #999;\n  font-size: 14px;\n  padding: 4px;\n  border-radius: 4px;\n  opacity: 0;\n  transition: all 0.2s ease;\n  \n  &:hover {\n    background: #e9ecef;\n    color: #dc3545;\n  }\n\n  ${ThreadItem}:hover & {\n    opacity: 1;\n  }\n`;\n\nconst ThreadTitle = styled.div`\n  font-weight: 500;\n  margin-bottom: 2px;\n`;\n\nconst ThreadTime = styled.div`\n  font-size: 12px;\n  opacity: 0.7;\n`;\n\nconst HeaderContent = styled.div`\n  display: flex;\n  align-items: center;\n  gap: 8px;\n`;\n\nconst SubTitle = styled.div`\n  font-size: 12px;\n  opacity: 0.7;\n`;\n\nconst ConversationSidebar: React.FC<ConversationSidebarProps> = ({\n  selectedItem,\n  onSelectItem,\n  isCollapsed = false,\n  onToggle,\n  selectedPersonaName,\n  selectedPersonaId,\n  refreshTrigger,\n  mode,\n  personas,\n  verbalizationThreads,\n  onSelectVerbalizationThread,\n  onRefreshTrigger,\n}) => {\n  const [expandedItems, setExpandedItems] = useState<Set<string>>(new Set());\n  const [threads, setThreads] = useState<Record<string, TrainingThread[]>>({\n    interpretation: [],\n    proceed: [],\n    sentence: []\n  });\n  const [interactionRecords, setInteractionRecords] = useState<InteractionRecord[]>([]);\n  const [allRecentThreads, setAllRecentThreads] = useState<Array<TrainingThread & { persona_id: string; persona_name: string }>>([]);\n  const [selectedThreadId, setSelectedThreadId] = useState<string | null>(null);\n  const [interactionHeight, setInteractionHeight] = useState(300);\n  const [isResizing, setIsResizing] = useState(false);\n\n  const menuItems = mode === 'recent' \n    ? [] // 최근 상호작용 모드에서는 메뉴 아이템 없음\n    : [\n    { id: 'interpretation', name: '해석' },\n    { id: 'proceed', name: '나아가기' },\n    { id: 'sentence', name: '문장' },\n    { id: 'interaction_history', name: '상호작용 기록' },\n  ];\n\n  useEffect(() => {\n    const loadData = async () => {\n      if (mode === 'recent' && personas) {\n        // 최근 상호작용 모드: 모든 페르소나의 스레드 + 언어화 스레드 로드\n        try {\n          const allPersonaThreads: Array<TrainingThread & { persona_id: string; persona_name: string }> = [];\n          \n          // 일반 페르소나 스레드 로드\n          for (const [personaId, persona] of Object.entries(personas)) {\n            try {\n              const response = await chatApi.getPersonaThreads(personaId);\n              if (response.data) {\n                const threadsWithPersonaInfo = response.data.map((thread: TrainingThread) => ({\n                  ...thread,\n                  persona_id: personaId,\n                  persona_name: persona.name,\n                }));\n                allPersonaThreads.push(...threadsWithPersonaInfo);\n              }\n            } catch (error) {\n              console.error(`페르소나 ${personaId} 스레드 로드 실패:`, error);\n            }\n          }\n          \n          // 언어화 스레드 로드\n          try {\n            const verbalizationResponse = await chatApi.getVerbalizationThreads();\n            if (verbalizationResponse.data) {\n              const verbalizationThreadsWithInfo = verbalizationResponse.data.map((thread: TrainingThread) => ({\n                ...thread,\n                persona_id: \"verbalization\",\n                persona_name: \"언어화\",\n              }));\n              allPersonaThreads.push(...verbalizationThreadsWithInfo);\n            }\n          } catch (error) {\n            console.error('언어화 스레드 로드 실패:', error);\n          }\n          \n          // 최신순으로 정렬 (updated_at이 있으면 우선, 없으면 created_at 사용)\n          const sortedThreads = allPersonaThreads.sort((a, b) => {\n            const timeA = a.updated_at ? new Date(a.updated_at).getTime() : new Date(a.created_at).getTime();\n            const timeB = b.updated_at ? new Date(b.updated_at).getTime() : new Date(b.created_at).getTime();\n            return timeB - timeA;\n          });\n          \n          setAllRecentThreads(sortedThreads);\n        } catch (error) {\n          console.error('전체 스레드 로드 실패:', error);\n        }\n        return;\n      }\n\n      if (!selectedPersonaId) return;\n\n      try {\n        // 기존 페르소나 모드 로직\n        const threadsResponse = await chatApi.getPersonaThreads(selectedPersonaId);\n        if (threadsResponse.data) {\n          const threadsByType = {\n            interpretation: threadsResponse.data\n              .filter((t: any) => t.thread_type === 'interpretation')\n              .sort((a: any, b: any) => {\n                const timeA = a.updated_at ? new Date(a.updated_at).getTime() : new Date(a.created_at).getTime();\n                const timeB = b.updated_at ? new Date(b.updated_at).getTime() : new Date(b.created_at).getTime();\n                return timeB - timeA;\n              }),\n            proceed: threadsResponse.data\n              .filter((t: any) => t.thread_type === 'proceed')\n              .sort((a: any, b: any) => {\n                const timeA = a.updated_at ? new Date(a.updated_at).getTime() : new Date(a.created_at).getTime();\n                const timeB = b.updated_at ? new Date(b.updated_at).getTime() : new Date(b.created_at).getTime();\n                return timeB - timeA;\n              }),\n            sentence: threadsResponse.data\n              .filter((t: any) => t.thread_type === 'sentence')\n              .sort((a: any, b: any) => {\n                const timeA = a.updated_at ? new Date(a.updated_at).getTime() : new Date(a.created_at).getTime();\n                const timeB = b.updated_at ? new Date(b.updated_at).getTime() : new Date(b.created_at).getTime();\n                return timeB - timeA;\n              })\n          };\n          setThreads(threadsByType);\n        }\n\n        // 상호작용 기록 로드\n        const recordsResponse = await chatApi.getAllInteractionRecords();\n        if (recordsResponse.data) {\n          const sortedRecords = recordsResponse.data.map((record: any) => ({\n            ...record,\n            threads: record.threads.sort((a: any, b: any) => {\n              const timeA = a.updated_at ? new Date(a.updated_at).getTime() : new Date(a.created_at).getTime();\n              const timeB = b.updated_at ? new Date(b.updated_at).getTime() : new Date(b.created_at).getTime();\n              return timeB - timeA;\n            })\n          }));\n          setInteractionRecords(sortedRecords);\n        }\n      } catch (error) {\n        console.error('데이터 로드 실패:', error);\n      }\n    };\n\n    loadData();\n  }, [selectedPersonaId, refreshTrigger, mode, personas]);\n\n  const handleAccordionToggle = (itemId: string) => {\n    const newExpanded = new Set(expandedItems);\n    if (newExpanded.has(itemId)) {\n      newExpanded.delete(itemId);\n    } else {\n      newExpanded.add(itemId);\n    }\n    setExpandedItems(newExpanded);\n    \n    if (itemId === 'interaction_history') {\n      onSelectItem(itemId);\n    } else {\n    const itemThreads = threads[itemId as keyof typeof threads] || [];\n    if (itemThreads.length === 0) {\n      onSelectItem(itemId);\n      } else {\n        const latestThread = itemThreads[0];\n        setSelectedThreadId(latestThread.id);\n        onSelectItem(`${itemId}-thread-${latestThread.id}`);\n      }\n    }\n  };\n\n  const handleRecordThreadSelect = (thread: TrainingThread) => {\n    setSelectedThreadId(thread.id);\n    onSelectItem(`${thread.thread_type}-thread-${thread.id}`);\n  };\n\n  const handleMouseDown = (e: React.MouseEvent) => {\n    e.preventDefault();\n    e.stopPropagation();\n    setIsResizing(true);\n    \n    const startY = e.clientY;\n    const startHeight = interactionHeight;\n    \n    const handleMouseMove = (e: MouseEvent) => {\n      const deltaY = e.clientY - startY;\n      const newHeight = Math.max(100, Math.min(600, startHeight + deltaY));\n      setInteractionHeight(newHeight);\n    };\n    \n    const handleMouseUp = () => {\n      setIsResizing(false);\n      document.removeEventListener('mousemove', handleMouseMove);\n      document.removeEventListener('mouseup', handleMouseUp);\n    };\n    \n    document.addEventListener('mousemove', handleMouseMove);\n    document.addEventListener('mouseup', handleMouseUp);\n  };\n\n  const formatTime = (timestamp: string) => {\n    return new Date(timestamp).toLocaleTimeString('ko-KR', {\n      hour: '2-digit',\n      minute: '2-digit',\n    });\n  };\n\n  const formatDate = (timestamp: string) => {\n    return new Date(timestamp).toLocaleDateString('ko-KR', {\n      month: 'short',\n      day: 'numeric',\n    });\n  };\n\n  const handleThreadSelect = (threadId: string, itemType: string) => {\n    setSelectedThreadId(threadId);\n    onSelectItem(`${itemType}-thread-${threadId}`);\n  };\n\n  const handleDeleteThread = async (threadId: string, e: React.MouseEvent) => {\n    e.stopPropagation();\n    if (window.confirm('이 스레드를 삭제하시겠습니까?')) {\n      try {\n        console.log('=== 스레드 삭제 시작 ===');\n        console.log('삭제할 threadId:', threadId);\n        console.log('현재 mode:', mode);\n        \n        const result = await chatApi.deleteThread(threadId);\n        console.log('API 응답:', result);\n        console.log('result.data:', result.data);\n        console.log('result.error:', result.error);\n        \n        if (result.data && result.data.success) {\n          console.log('삭제 성공');\n          if (mode === 'verbalization') {\n            // 언어화 모드인 경우: 부모 컴포넌트에 업데이트 요청\n            // verbalizationThreads는 props로 받아오므로 직접 수정하지 않고 부모에게 알림\n            // 삭제된 스레드가 현재 선택된 스레드인 경우 선택 해제\n            if (selectedThreadId === threadId) {\n              setSelectedThreadId(null);\n              if (onSelectVerbalizationThread) {\n                onSelectVerbalizationThread(null);\n              }\n            }\n            // refreshTrigger를 통해 부모 컴포넌트에 업데이트 요청\n            // (App.tsx에서 verbalizationThreads를 다시 로드하게 됨)\n            if (onRefreshTrigger) {\n              onRefreshTrigger();\n            }\n          } else {\n            // 일반 페르소나 모드인 경우: 기존 로직 유지\n          const updatedThreads = { ...threads };\n          Object.keys(updatedThreads).forEach(key => {\n              updatedThreads[key as keyof typeof threads] = updatedThreads[key as keyof typeof threads].filter((t: any) => t.id !== threadId);\n          });\n          setThreads(updatedThreads);\n          \n          if (selectedThreadId === threadId) {\n            setSelectedThreadId(null);\n          }\n          }\n          console.log('UI 업데이트 완료');\n        } else {\n          console.error('삭제 실패:', result.error || result.data?.message);\n          let errorMessage = '스레드 삭제에 실패했습니다';\n          \n          if (result.error) {\n            if (result.error.includes('네트워크 오류') || result.error.includes('Failed to fetch')) {\n              errorMessage += ': 백엔드 서버에 연결할 수 없습니다. 서버가 실행 중인지 확인해주세요.';\n            } else {\n              errorMessage += ': ' + result.error;\n            }\n          } else if (result.data?.message) {\n            errorMessage += ': ' + result.data.message;\n          }\n          \n          alert(errorMessage);\n        }\n      } catch (error) {\n        console.error('스레드 삭제 실패:', error);\n        alert('스레드 삭제 중 예상치 못한 오류가 발생했습니다: ' + (error instanceof Error ? error.message : String(error)));\n      }\n    }\n  };\n\n  const getThreadTypeLabel = (type: string) => {\n    switch (type) {\n      case 'interpretation': return '해석';\n      case 'proceed': return '나아가기';\n      case 'sentence': return '문장';\n      case 'verbalization': return '언어화';\n      default: return type;\n    }\n  };\n\n  const getThreadContent = (thread: TrainingThread) => {\n    if (thread.messages && thread.messages.length > 0) {\n      const firstMessage = thread.messages[0];\n      return firstMessage.content.length > 30 \n        ? firstMessage.content.substring(0, 30) + '...' \n        : firstMessage.content;\n    }\n    return thread.content?.length > 30 \n      ? thread.content.substring(0, 30) + '...' \n      : thread.content || '내용 없음';\n  };\n\n  const renderThreads = (itemId: string) => {\n    const itemThreads = threads[itemId as keyof typeof threads] || [];\n    const isExpanded = expandedItems.has(itemId);\n\n    return (\n      <ThreadsList $isExpanded={isExpanded}>\n        {itemThreads.map((thread: any, index: number) => (\n          <ThreadItem\n            key={thread.id}\n            $isSelected={selectedThreadId === thread.id}\n            onClick={() => handleThreadSelect(thread.id, itemId)}\n          >\n            <ThreadItemContent>\n              <ThreadTitle>\n                {itemId === 'interpretation' && `해석 #${itemThreads.length - index}`}\n                {itemId === 'proceed' && `나아가기 #${itemThreads.length - index}`}\n                {itemId === 'sentence' && `문장 #${itemThreads.length - index}`}\n              </ThreadTitle>\n              <ThreadTime>\n                {formatTime(thread.created_at)} • {thread.messages.length}개 메시지\n              </ThreadTime>\n            </ThreadItemContent>\n            <DeleteThreadButton\n              onClick={(e) => handleDeleteThread(thread.id, e)}\n              title=\"스레드 삭제\"\n            >\n              🗑️\n            </DeleteThreadButton>\n          </ThreadItem>\n        ))}\n        {itemThreads.length === 0 && (\n          <div style={{ padding: '16px 32px', fontSize: '14px', color: '#999' }}>\n            스레드가 없습니다\n          </div>\n        )}\n      </ThreadsList>\n    );\n  };\n\n  const renderInteractionRecords = () => {\n    const isExpanded = expandedItems.has('interaction_history');\n    \n    // 현재 선택된 페르소나의 기록만 필터링\n    const currentPersonaRecord = interactionRecords.find(\n      record => record.persona_id === selectedPersonaId\n    );\n\n    return (\n      <ResizableContainer \n        $isExpanded={isExpanded}\n        $height={interactionHeight}\n      >\n        {isExpanded && (\n          <>\n            <InteractionRecordsList $isExpanded={isExpanded}>\n              {currentPersonaRecord ? (\n                currentPersonaRecord.threads.map((thread) => (\n                  <RecordThreadItem\n                    key={thread.id}\n                    $isSelected={selectedThreadId === thread.id}\n                    onClick={() => handleRecordThreadSelect(thread)}\n                  >\n                    <div>\n                      <ThreadTypeTag type={thread.thread_type}>\n                        {getThreadTypeLabel(thread.thread_type)}\n                      </ThreadTypeTag>\n                      {getThreadContent(thread)}\n                    </div>\n                    <div style={{ fontSize: '11px', opacity: 0.7, marginTop: '2px' }}>\n                      {formatTime(thread.created_at)}\n                    </div>\n                  </RecordThreadItem>\n                ))\n              ) : (\n                <div style={{ padding: '16px', fontSize: '14px', color: '#999', textAlign: 'center' }}>\n                  이 페르소나의 상호작용 기록이 없습니다\n                </div>\n              )}\n            </InteractionRecordsList>\n            <ResizeHandle onMouseDown={handleMouseDown} />\n          </>\n        )}\n      </ResizableContainer>\n    );\n  };\n\n  const getThreadTitle = (thread: TrainingThread) => {\n    let content = '';\n    \n    if (thread.messages && thread.messages.length > 0) {\n      const firstUserMessage = thread.messages.find(m => m.role === 'user');\n      if (firstUserMessage) {\n        content = firstUserMessage.content;\n      } else if (thread.messages[0]) {\n        content = thread.messages[0].content;\n      }\n    } else if (thread.content) {\n      content = thread.content;\n    }\n    \n    if (content.length > 50) {\n      return content.substring(0, 50) + '...';\n    }\n    return content || '내용 없음';\n  };\n\n  const renderRecentInteractions = () => {\n    return (\n      <div style={{ padding: '16px 0' }}>\n        {allRecentThreads.map((thread) => (\n          <ThreadItem\n            key={`${thread.persona_id}-${thread.id}`}\n            $isSelected={selectedThreadId === thread.id}\n            onClick={() => {\n              setSelectedThreadId(thread.id);\n              onSelectItem(`recent-thread-${thread.id}-${thread.persona_id}`);\n            }}\n          >\n            <ThreadItemContent>\n              <div style={{ display: 'flex', alignItems: 'center', gap: '8px', marginBottom: '4px' }}>\n                <span style={{\n                  padding: '2px 6px',\n                  background: '#ffffff',\n                  color: '#000000',\n                  border: '1px solid #000000',\n                  borderRadius: '4px',\n                  fontSize: '10px',\n                  fontWeight: '600',\n                }}>\n                  {thread.persona_name}\n                </span>\n                <ThreadTypeTag type={thread.thread_type}>\n                  {getThreadTypeLabel(thread.thread_type)}\n                </ThreadTypeTag>\n              </div>\n              <ThreadTitle>\n                {getThreadTitle(thread)}\n              </ThreadTitle>\n              <ThreadTime>\n                {formatTime(thread.created_at)} • {thread.messages?.length || 0}개 메시지\n              </ThreadTime>\n            </ThreadItemContent>\n          </ThreadItem>\n        ))}\n        {allRecentThreads.length === 0 && (\n          <div style={{ padding: '16px 32px', fontSize: '14px', color: '#999', textAlign: 'center' }}>\n            상호작용 기록이 없습니다\n          </div>\n        )}\n      </div>\n    );\n  };\n\n  const renderVerbalizationThreads = () => {\n    return (\n      <div style={{ padding: '16px 0' }}>\n        {verbalizationThreads && [...verbalizationThreads]\n          .sort((a, b) => {\n            const timeA = a.updated_at ? new Date(a.updated_at).getTime() : new Date(a.created_at).getTime();\n            const timeB = b.updated_at ? new Date(b.updated_at).getTime() : new Date(b.created_at).getTime();\n            return timeB - timeA;\n          })\n          .map((thread, index) => (\n          <ThreadItem\n            key={thread.id}\n            $isSelected={selectedThreadId === thread.id}\n            onClick={() => {\n              setSelectedThreadId(thread.id);\n              if (onSelectVerbalizationThread) {\n                onSelectVerbalizationThread(thread);\n              }\n            }}\n          >\n            <ThreadItemContent>\n              <div style={{ display: 'flex', alignItems: 'center', gap: '8px', marginBottom: '4px' }}>\n                <span style={{\n                  padding: '2px 6px',\n                  background: '#ffffff',\n                  color: '#000000',\n                  border: '1px solid #000000',\n                  borderRadius: '4px',\n                  fontSize: '10px',\n                  fontWeight: '600',\n                }}>\n                  언어화\n                </span>\n              </div>\n              <ThreadTitle>\n                언어화 #{verbalizationThreads.length - index}\n              </ThreadTitle>\n              <ThreadTime>\n                {formatTime(thread.created_at)} • {thread.messages?.length || 0}개 메시지\n              </ThreadTime>\n            </ThreadItemContent>\n            <DeleteThreadButton\n              onClick={(e) => handleDeleteThread(thread.id, e)}\n              title=\"스레드 삭제\"\n            >\n              🗑️\n            </DeleteThreadButton>\n          </ThreadItem>\n        ))}\n        {(!verbalizationThreads || verbalizationThreads.length === 0) && (\n          <div style={{ padding: '16px 32px', fontSize: '14px', color: '#999', textAlign: 'center' }}>\n            언어화 대화가 없습니다.<br />\n            새 대화를 시작해보세요!\n          </div>\n        )}\n      </div>\n    );\n  };\n\n  return (\n    <Sidebar width=\"250px\" $isCollapsed={isCollapsed} $variant=\"conversation\">\n      {onToggle && (\n        <SidebarToggleButton onClick={onToggle}>\n        </SidebarToggleButton>\n      )}\n\n      <SidebarHeader $isCollapsed={isCollapsed}>\n        <HeaderContent>\n          {mode === 'recent' && <SidebarTitle>최근 상호작용</SidebarTitle>}\n          {mode === 'verbalization' && <SidebarTitle>언어화</SidebarTitle>}\n          {mode === 'vault' && <SidebarTitle>저장고</SidebarTitle>}\n          {mode === 'persona' && (\n            <>\n              <SidebarTitle>{selectedPersonaName || '페르소나'}</SidebarTitle>\n              <SubTitle>대화 목록</SubTitle>\n            </>\n          )}\n        </HeaderContent>\n      </SidebarHeader>\n\n      <SidebarContent $isCollapsed={isCollapsed}>\n        <SidebarMenuContent $variant=\"conversation\">\n          {mode === 'recent' && renderRecentInteractions()}\n          {mode === 'verbalization' && renderVerbalizationThreads()}\n          {mode === 'vault' && (\n            <div style={{ padding: '15px', color: '#868e96', fontSize: '13px' }}>\n              메인 화면에서 저장고의 세부 메뉴를 확인하세요.\n            </div>\n          )}\n          {mode === 'persona' && (\n            <AccordionContainer>\n              {menuItems.map((item) => (\n                <AccordionItem key={item.id}>\n                  <AccordionHeader\n                      $isSelected={selectedItem === item.id}\n                      $isExpanded={expandedItems.has(item.id)}\n                    onClick={() => handleAccordionToggle(item.id)}\n                  >\n                      <span>{item.name}</span>\n                  </AccordionHeader>\n                  \n                    {item.id === 'interaction_history' \n                      ? renderInteractionRecords()\n                      : renderThreads(item.id)\n                    }\n                </AccordionItem>\n              ))}\n            </AccordionContainer>\n          )}\n        </SidebarMenuContent>\n      </SidebarContent>\n    </Sidebar>\n  );\n};\n\nexport default ConversationSidebar; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}