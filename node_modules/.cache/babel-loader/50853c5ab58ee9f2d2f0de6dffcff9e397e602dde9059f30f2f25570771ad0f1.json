{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\sungh\\\\Desktop\\\\chat_work\\\\frontend\\\\src\\\\components\\\\MessageInput.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useRef, useEffect } from 'react';\nimport { InputContainer, InputWrapper, MessageInput as StyledMessageInput, SendButton } from '../styles/GlobalStyle';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst MessageInput = ({\n  onSendMessage,\n  disabled = false,\n  placeholder = \"메시지를 입력하세요...\"\n}) => {\n  _s();\n  const [message, setMessage] = useState('');\n  const [isSending, setIsSending] = useState(false);\n  const textareaRef = useRef(null);\n  const handleSubmit = async () => {\n    if (!message.trim() || disabled || isSending) return;\n    setIsSending(true);\n    const success = await onSendMessage(message.trim());\n    if (success) {\n      setMessage('');\n      // 텍스트영역 높이 초기화\n      if (textareaRef.current) {\n        textareaRef.current.style.height = 'auto';\n      }\n    }\n    setIsSending(false);\n  };\n  const handleKeyPress = e => {\n    if (e.key === 'Enter' && !e.shiftKey) {\n      e.preventDefault();\n      handleSubmit();\n    }\n  };\n  const handleChange = e => {\n    setMessage(e.target.value);\n\n    // 자동 높이 조절\n    if (textareaRef.current) {\n      textareaRef.current.style.height = 'auto';\n      textareaRef.current.style.height = `${textareaRef.current.scrollHeight}px`;\n    }\n  };\n\n  // 컴포넌트가 마운트될 때 포커스\n  useEffect(() => {\n    if (textareaRef.current && !disabled) {\n      textareaRef.current.focus();\n    }\n  }, [disabled]);\n  const isButtonDisabled = disabled || isSending || !message.trim();\n  return /*#__PURE__*/_jsxDEV(InputContainer, {\n    children: /*#__PURE__*/_jsxDEV(InputWrapper, {\n      children: [/*#__PURE__*/_jsxDEV(StyledMessageInput, {\n        ref: textareaRef,\n        value: message,\n        onChange: handleChange,\n        onKeyPress: handleKeyPress,\n        placeholder: placeholder,\n        disabled: disabled || isSending,\n        rows: 1\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(SendButton, {\n        onClick: handleSubmit,\n        disabled: isButtonDisabled,\n        title: isSending ? '전송 중...' : '전송',\n        children: isSending ? '⏳' : '↑'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 72,\n    columnNumber: 5\n  }, this);\n};\n_s(MessageInput, \"dGvP+CQWE0CEcwEzyYeo3+f08CQ=\");\n_c = MessageInput;\nexport default MessageInput;\nvar _c;\n$RefreshReg$(_c, \"MessageInput\");","map":{"version":3,"names":["React","useState","useRef","useEffect","InputContainer","InputWrapper","MessageInput","StyledMessageInput","SendButton","jsxDEV","_jsxDEV","onSendMessage","disabled","placeholder","_s","message","setMessage","isSending","setIsSending","textareaRef","handleSubmit","trim","success","current","style","height","handleKeyPress","e","key","shiftKey","preventDefault","handleChange","target","value","scrollHeight","focus","isButtonDisabled","children","ref","onChange","onKeyPress","rows","fileName","_jsxFileName","lineNumber","columnNumber","onClick","title","_c","$RefreshReg$"],"sources":["C:/Users/sungh/Desktop/chat_work/frontend/src/components/MessageInput.tsx"],"sourcesContent":["import React, { useState, useRef, useEffect, useImperativeHandle, forwardRef } from 'react';\r\nimport {\r\n  InputContainer,\r\n  InputWrapper,\r\n  MessageInput as StyledMessageInput,\r\n  SendButton,\r\n} from '../styles/GlobalStyle';\r\n\r\ninterface MessageInputProps {\r\n  onSendMessage: (message: string) => Promise<boolean>;\r\n  disabled?: boolean;\r\n  placeholder?: string;\r\n}\r\n\r\nexport interface MessageInputRef {\r\n  insertText: (text: string) => void;\r\n}\r\n\r\nconst MessageInput: React.FC<MessageInputProps> = ({\r\n  onSendMessage,\r\n  disabled = false,\r\n  placeholder = \"메시지를 입력하세요...\",\r\n}) => {\r\n  const [message, setMessage] = useState('');\r\n  const [isSending, setIsSending] = useState(false);\r\n  const textareaRef = useRef<HTMLTextAreaElement>(null);\r\n\r\n  const handleSubmit = async () => {\r\n    if (!message.trim() || disabled || isSending) return;\r\n\r\n    setIsSending(true);\r\n    const success = await onSendMessage(message.trim());\r\n    \r\n    if (success) {\r\n      setMessage('');\r\n      // 텍스트영역 높이 초기화\r\n      if (textareaRef.current) {\r\n        textareaRef.current.style.height = 'auto';\r\n      }\r\n    }\r\n    \r\n    setIsSending(false);\r\n  };\r\n\r\n  const handleKeyPress = (e: React.KeyboardEvent) => {\r\n    if (e.key === 'Enter' && !e.shiftKey) {\r\n      e.preventDefault();\r\n      handleSubmit();\r\n    }\r\n  };\r\n\r\n  const handleChange = (e: React.ChangeEvent<HTMLTextAreaElement>) => {\r\n    setMessage(e.target.value);\r\n    \r\n    // 자동 높이 조절\r\n    if (textareaRef.current) {\r\n      textareaRef.current.style.height = 'auto';\r\n      textareaRef.current.style.height = `${textareaRef.current.scrollHeight}px`;\r\n    }\r\n  };\r\n\r\n  // 컴포넌트가 마운트될 때 포커스\r\n  useEffect(() => {\r\n    if (textareaRef.current && !disabled) {\r\n      textareaRef.current.focus();\r\n    }\r\n  }, [disabled]);\r\n\r\n  const isButtonDisabled = disabled || isSending || !message.trim();\r\n\r\n  return (\r\n    <InputContainer>\r\n      <InputWrapper>\r\n        <StyledMessageInput\r\n          ref={textareaRef}\r\n          value={message}\r\n          onChange={handleChange}\r\n          onKeyPress={handleKeyPress}\r\n          placeholder={placeholder}\r\n          disabled={disabled || isSending}\r\n          rows={1}\r\n        />\r\n        <SendButton\r\n          onClick={handleSubmit}\r\n          disabled={isButtonDisabled}\r\n          title={isSending ? '전송 중...' : '전송'}\r\n        >\r\n          {isSending ? '⏳' : '↑'}\r\n        </SendButton>\r\n      </InputWrapper>\r\n    </InputContainer>\r\n  );\r\n};\r\n\r\nexport default MessageInput; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}