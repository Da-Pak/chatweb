{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\sungh\\\\Desktop\\\\chat_work_ver2\\\\frontend\\\\src\\\\features\\\\vault\\\\components\\\\SentenceVaultView.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport styled from 'styled-components';\nimport { sentenceApi } from '../../training/api/sentenceApi';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Container = styled.div`\n  display: flex;\n  flex-direction: column;\n  height: 100vh;\n`;\n_c = Container;\nconst Header = styled.div`\n  padding: 20px;\n  border-bottom: 1px solid #e9ecef;\n  background: #fff;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  gap: 10px;\n`;\n_c2 = Header;\nconst FilterDropdownButton = styled.button`\n  background: linear-gradient(135deg, #fff 0%, #f8f9fa 100%);\n  border: 1px solid #dee2e6;\n  border-radius: 8px;\n  padding: 8px 16px;\n  cursor: pointer;\n  font-size: 14px;\n  color: #333;\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  min-width: 120px;\n  justify-content: space-between;\n  \n  &:hover {\n    background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);\n  }\n  \n  .arrow {\n    font-size: 12px;\n    transition: transform 0.2s;\n    transform: ${props => props.$isOpen ? 'rotate(180deg)' : 'rotate(0deg)'};\n  }\n`;\n_c3 = FilterDropdownButton;\nconst FilterDropdownMenu = styled.div`\n  position: absolute;\n  top: 100%;\n  left: 50%;\n  transform: translateX(-50%);\n  background: #f8f9fa;\n  border: 1px solid #dee2e6;\n  border-radius: 8px;\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);\n  z-index: 1000;\n  max-height: 200px;\n  overflow-y: auto;\n  display: ${props => props.$isOpen ? 'block' : 'none'};\n  margin-top: 4px;\n  min-width: 150px;\n`;\n_c4 = FilterDropdownMenu;\nconst FilterDropdownItem = styled.div`\n  padding: 8px 16px;\n  cursor: pointer;\n  color: #333;\n  background: ${props => props.$isSelected ? '#e9ecef' : 'transparent'};\n  font-weight: ${props => props.$isSelected ? '500' : 'normal'};\n  \n  &:hover {\n    background: #e9ecef;\n  }\n  \n  &:first-child {\n    border-radius: 8px 8px 0 0;\n  }\n  \n  &:last-child {\n    border-radius: 0 0 8px 8px;\n  }\n`;\n_c5 = FilterDropdownItem;\nconst FilterContainer = styled.div`\n  position: relative;\n  display: flex;\n  align-items: center;\n  gap: 10px;\n`;\n_c6 = FilterContainer;\nconst NavigationButton = styled.button`\n  background: linear-gradient(135deg, #fff 0%, #f8f9fa 100%);\n  border: 1px solid #dee2e6;\n  border-radius: 50%;\n  width: 32px;\n  height: 32px;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 14px;\n  color: #333;\n  \n  &:hover {\n    background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);\n  }\n  \n  &:disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n  }\n`;\n_c7 = NavigationButton;\nconst ContentArea = styled.div`\n  flex: 1;\n  padding: 20px;\n  overflow-y: auto;\n  background: #ffffff;\n`;\n_c8 = ContentArea;\nconst SentenceGrid = styled.div`\n  display: flex;\n  flex-direction: column;\n  gap: 12px;\n`;\n_c9 = SentenceGrid;\nconst SentenceContainer = styled.div`\n  display: flex;\n  flex-direction: column;\n  gap: 8px;\n`;\n_c0 = SentenceContainer;\nconst SentenceRow = styled.div`\n  width: 100%;\n  background: ${props => props.$isHighlighted ? 'linear-gradient(135deg, #fff9c4 0%, #ffeaa7 100%)' : 'linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%)'};\n  border: 1px solid ${props => props.$isHighlighted ? '#ffc107' : '#dee2e6'};\n  border-radius: 16px;\n  padding: 16px 20px;\n  cursor: pointer;\n  position: relative;\n  transition: all 0.2s ease;\n  min-height: 60px;\n  display: flex;\n  align-items: center;\n  \n  &:hover {\n    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);\n    transform: translateY(-1px);\n    border-color: ${props => props.$isHighlighted ? '#ffb300' : '#adb5bd'};\n    background: ${props => props.$isHighlighted ? 'linear-gradient(135deg, #fff3cd 0%, #ffd60a 100%)' : 'linear-gradient(135deg, #e9ecef 0%, #dee2e6 100%)'};\n  }\n  \n  ${props => props.$isPinned && `\n    background: ${props.$isHighlighted ? 'linear-gradient(135deg, #fff9c4 0%, #ffeaa7 100%)' : 'linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%)'};\n    border-color: ${props.$isHighlighted ? '#ffc107' : '#dee2e6'};\n    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\n    \n    &:hover {\n      background: ${props.$isHighlighted ? 'linear-gradient(135deg, #fff3cd 0%, #ffd60a 100%)' : 'linear-gradient(135deg, #e9ecef 0%, #dee2e6 100%)'};\n      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);\n      border-color: ${props.$isHighlighted ? '#ffb300' : '#adb5bd'};\n    }\n  `}\n`;\n_c1 = SentenceRow;\nconst SentenceContent = styled.div`\n  flex: 1;\n  padding-bottom: ${props =>\n// ë©”ëª¨ê°€ ìžˆìœ¼ë©´ í•˜ë‹¨ ì—¬ë°± ì¶”ê°€\n'var(--has-memo, 0px)'};\n`;\n_c10 = SentenceContent;\nconst SentenceText = styled.div`\n  font-size: 15px;\n  line-height: 1.6;\n  color: #333;\n  word-break: break-word;\n  font-weight: 500;\n`;\n_c11 = SentenceText;\nconst SentenceMetaExternal = styled.div`\n  display: flex;\n  justify-content: flex-end;\n  align-items: center;\n  font-size: 12px;\n  color: #6c757d;\n  gap: 8px;\n`;\n_c12 = SentenceMetaExternal;\nconst PersonaLabel = styled.span`\n  background: #e9ecef;\n  padding: 3px 8px;\n  border-radius: 6px;\n  font-weight: 500;\n  color: #495057;\n`;\n_c13 = PersonaLabel;\nconst DateLabel = styled.span`\n  font-style: italic;\n  opacity: 0.8;\n`;\n_c14 = DateLabel;\nconst PinIcon = styled.div`\n  position: absolute;\n  top: 12px;\n  right: 16px;\n  width: 24px;\n  height: 24px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 14px;\n  color: ${props => props.$isPinned ? '#333' : 'transparent'};\n  cursor: pointer;\n  z-index: 2;\n  border-radius: 50%;\n  transition: all 0.2s ease;\n  \n  &:hover {\n    color: #333;\n    background: rgba(0, 0, 0, 0.1);\n  }\n  \n  ${SentenceRow}:hover & {\n    color: ${props => props.$isPinned ? '#333' : '#666'};\n  }\n  \n  &::before {\n    content: \"ðŸ“Œ\";\n    filter: grayscale(100%);\n  }\n`;\n_c15 = PinIcon;\nconst EmptyState = styled.div`\n  text-align: center;\n  padding: 60px 20px;\n  color: #6c757d;\n  \n  .icon {\n    font-size: 48px;\n    margin-bottom: 16px;\n  }\n  \n  .title {\n    font-size: 18px;\n    font-weight: 500;\n    margin-bottom: 8px;\n  }\n  \n  .description {\n    font-size: 14px;\n  }\n`;\n_c16 = EmptyState;\nconst ContextMenuContainer = styled.div`\n  position: fixed;\n  top: ${props => props.$y}px;\n  left: ${props => props.$x}px;\n  background: white;\n  border: 1px solid #dee2e6;\n  border-radius: 8px;\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);\n  z-index: 1000;\n  min-width: 160px;\n  overflow: hidden;\n`;\n_c17 = ContextMenuContainer;\nconst ContextMenuItem = styled.div`\n  padding: 12px 16px;\n  cursor: pointer;\n  font-size: 14px;\n  color: #333;\n  \n  &:hover {\n    background-color: #f8f9fa;\n  }\n  \n  &:not(:last-child) {\n    border-bottom: 1px solid #f1f3f4;\n  }\n`;\n_c18 = ContextMenuItem;\nconst ModalOverlay = styled.div`\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: rgba(0, 0, 0, 0.5);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: 2000;\n`;\n_c19 = ModalOverlay;\nconst ModalContent = styled.div`\n  background: white;\n  border-radius: 12px;\n  padding: 24px;\n  max-width: 400px;\n  width: 90%;\n  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);\n`;\n_c20 = ModalContent;\nconst ModalTitle = styled.h3`\n  margin: 0 0 16px 0;\n  font-size: 18px;\n  font-weight: 600;\n  color: #333;\n`;\n_c21 = ModalTitle;\nconst ModalMessage = styled.p`\n  margin: 0 0 24px 0;\n  font-size: 14px;\n  color: #666;\n  line-height: 1.5;\n`;\n_c22 = ModalMessage;\nconst ModalButtons = styled.div`\n  display: flex;\n  gap: 12px;\n  justify-content: flex-end;\n`;\n_c23 = ModalButtons;\nconst ModalButton = styled.button`\n  padding: 10px 20px;\n  border-radius: 6px;\n  font-size: 14px;\n  font-weight: 500;\n  cursor: pointer;\n  border: 1px solid;\n  \n  ${props => props.$variant === 'primary' ? `\n    background: #007bff;\n    color: white;\n    border-color: #007bff;\n    \n    &:hover {\n      background: #0056b3;\n      border-color: #0056b3;\n    }\n  ` : `\n    background: white;\n    color: #6c757d;\n    border-color: #dee2e6;\n    \n    &:hover {\n      background: #f8f9fa;\n    }\n  `}\n`;\n_c24 = ModalButton;\nconst StatusIndicators = styled.div`\n  position: absolute;\n  top: 8px;\n  right: 40px;\n  display: flex;\n  gap: 4px;\n  z-index: 1;\n`;\n_c25 = StatusIndicators;\nconst StatusIndicator = styled.div`\n  width: 20px;\n  height: 20px;\n  border-radius: 50%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 10px;\n  color: white;\n  font-weight: bold;\n  background: ${props => {\n  if (props.$type === 'highlight') {\n    return props.$color === 'yellow' ? '#ffc107' : props.$color === 'green' ? '#28a745' : props.$color === 'blue' ? '#007bff' : '#ffc107';\n  }\n  return '#6c757d'; // ë©”ëª¨ ìƒ‰ìƒ\n}};\n  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.2);\n  \n  &::before {\n    content: ${props => props.$type === 'highlight' ? '\"H\"' : '\"M\"'};\n  }\n`;\n_c26 = StatusIndicator;\nconst MemoPreview = styled.div`\n  position: absolute;\n  bottom: 8px;\n  left: 20px;\n  right: 60px;\n  background: rgba(108, 117, 125, 0.1);\n  border-radius: 8px;\n  padding: 6px 10px;\n  font-size: 12px;\n  color: #6c757d;\n  font-style: italic;\n  max-height: 40px;\n  overflow: hidden;\n  display: -webkit-box;\n  -webkit-line-clamp: 2;\n  -webkit-box-orient: vertical;\n`;\n_c27 = MemoPreview;\nconst SentenceVaultView = ({\n  personas,\n  onNavigateToPersona,\n  onNavigateToThread,\n  onNavigateToPersonaWithSentence\n}) => {\n  _s();\n  const [sentences, setSentences] = useState([]);\n  const [filteredSentences, setFilteredSentences] = useState([]);\n  const [currentFilter, setCurrentFilter] = useState('ì „ì²´');\n  const [loading, setLoading] = useState(true);\n  const [pinnedSentences, setPinnedSentences] = useState(new Set());\n  const [contextMenu, setContextMenu] = useState(null);\n  const [confirmationModal, setConfirmationModal] = useState(null);\n  const [showFilterDropdown, setShowFilterDropdown] = useState(false);\n\n  // í•„í„° ì˜µì…˜ë“¤\n  const [filterOptions, setFilterOptions] = useState(['ì „ì²´', 'ì–¸ì–´í™”', 'íŽ¸ì§€']);\n  const [currentFilterIndex, setCurrentFilterIndex] = useState(0);\n  useEffect(() => {\n    loadData();\n  }, []);\n  useEffect(() => {\n    applyFilter();\n  }, [sentences, currentFilter, pinnedSentences]);\n\n  // ì»¨í…ìŠ¤íŠ¸ ë©”ë‰´ ì™¸ë¶€ í´ë¦­ ê°ì§€\n  useEffect(() => {\n    const handleClickOutside = () => {\n      console.log('ì™¸ë¶€ í´ë¦­ ê°ì§€, ì»¨í…ìŠ¤íŠ¸ ë©”ë‰´ ë‹«ê¸°');\n      setContextMenu(null);\n    };\n    if (contextMenu) {\n      document.addEventListener('click', handleClickOutside);\n      return () => document.removeEventListener('click', handleClickOutside);\n    }\n  }, [contextMenu]);\n\n  // ë“œë¡­ë‹¤ìš´ ì™¸ë¶€ í´ë¦­ ê°ì§€\n  useEffect(() => {\n    const handleClickOutside = event => {\n      const target = event.target;\n      if (!target.closest('.filter-dropdown')) {\n        setShowFilterDropdown(false);\n      }\n    };\n    if (showFilterDropdown) {\n      document.addEventListener('click', handleClickOutside);\n      return () => document.removeEventListener('click', handleClickOutside);\n    }\n  }, [showFilterDropdown]);\n  const loadData = async () => {\n    setLoading(true);\n    try {\n      // ì €ìž¥ê³  ë¬¸ìž¥ë“¤ ë¡œë“œ\n      const sentenceData = await sentenceApi.getVaultSentences();\n      console.log('ì €ìž¥ê³  ë°ì´í„°:', sentenceData);\n      setSentences(sentenceData);\n\n      // í•„í„° ì˜µì…˜ì— íŽ˜ë¥´ì†Œë‚˜ë“¤ ì¶”ê°€ (propsë¡œ ë°›ì€ personas ì‚¬ìš©)\n      const personaNames = Object.values(personas).map(p => p.name);\n      setFilterOptions(['ì „ì²´', 'ì–¸ì–´í™”', 'íŽ¸ì§€', ...personaNames]);\n    } catch (error) {\n      console.error('ë°ì´í„° ë¡œë”© ì‹¤íŒ¨:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n  const applyFilter = () => {\n    let filtered = [...sentences];\n    if (currentFilter !== 'ì „ì²´') {\n      if (currentFilter === 'ì–¸ì–´í™”') {\n        filtered = filtered.filter(s => {\n          var _s$source_message_id;\n          return s.tags.includes('verbalization') || s.tags.includes('ì–¸ì–´í™”') || ((_s$source_message_id = s.source_message_id) === null || _s$source_message_id === void 0 ? void 0 : _s$source_message_id.includes('verbalization'));\n        });\n      } else if (currentFilter === 'íŽ¸ì§€') {\n        filtered = filtered.filter(s => s.tags.includes('letter'));\n      } else {\n        // íŽ˜ë¥´ì†Œë‚˜ ì´ë¦„ìœ¼ë¡œ í•„í„°ë§\n        const personaId = Object.keys(personas).find(id => personas[id].name === currentFilter);\n        if (personaId) {\n          filtered = filtered.filter(s => s.tags.includes(personaId) || s.source_message_id.includes(personaId));\n        }\n      }\n    }\n\n    // ê³ ì •ëœ ë¬¸ìž¥ë“¤ì„ ë§¨ ìœ„ë¡œ\n    const pinned = filtered.filter(s => pinnedSentences.has(s.id));\n    const unpinned = filtered.filter(s => !pinnedSentences.has(s.id));\n\n    // ë‚ ì§œìˆœ ì •ë ¬ (ìµœì‹ ìˆœ)\n    pinned.sort((a, b) => new Date(b.created_at).getTime() - new Date(a.created_at).getTime());\n    unpinned.sort((a, b) => new Date(b.created_at).getTime() - new Date(a.created_at).getTime());\n    setFilteredSentences([...pinned, ...unpinned]);\n  };\n  const handleFilterChange = filter => {\n    setCurrentFilter(filter);\n    setCurrentFilterIndex(filterOptions.indexOf(filter));\n    setShowFilterDropdown(false);\n  };\n  const handleNavigateFilter = direction => {\n    const newIndex = direction === 'prev' ? Math.max(0, currentFilterIndex - 1) : Math.min(filterOptions.length - 1, currentFilterIndex + 1);\n    setCurrentFilterIndex(newIndex);\n    setCurrentFilter(filterOptions[newIndex]);\n  };\n  const handleSentenceClick = (event, sentence) => {\n    event.preventDefault();\n    event.stopPropagation();\n    console.log('ë¬¸ìž¥ í´ë¦­ë¨:', sentence.sentence.substring(0, 50));\n    console.log('í´ë¦­ ìœ„ì¹˜:', event.clientX, event.clientY);\n    setContextMenu({\n      x: event.clientX,\n      y: event.clientY,\n      sentence\n    });\n    console.log('ì»¨í…ìŠ¤íŠ¸ ë©”ë‰´ ì„¤ì •ë¨');\n  };\n  const handleContextMenuAction = (action, sentence) => {\n    console.log('ì»¨í…ìŠ¤íŠ¸ ë©”ë‰´ ì•¡ì…˜:', action);\n    setContextMenu(null);\n    switch (action) {\n      case 'interact':\n      case 'delete':\n        setConfirmationModal({\n          type: action,\n          sentence\n        });\n        break;\n      case 'pin':\n        togglePin(sentence.id);\n        break;\n    }\n  };\n  const handleConfirmAction = async () => {\n    var _sentence$source_mess;\n    if (!confirmationModal) return;\n    const {\n      type,\n      sentence\n    } = confirmationModal;\n    try {\n      switch (type) {\n        case 'interact':\n          console.log('=== ìƒí˜¸ìž‘ìš© í•˜ê¸° ì‹œìž‘ ===');\n          console.log('ë¬¸ìž¥ ë°ì´í„°:', sentence);\n          console.log('tags:', sentence.tags);\n          console.log('source_message_id:', sentence.source_message_id);\n          console.log('source_conversation_id:', sentence.source_conversation_id);\n\n          // í•´ë‹¹ ë¬¸ìž¥ì˜ ì¶œì²˜ ìŠ¤ë ˆë“œë¡œ ì´ë™í•˜ë©´ì„œ ìž…ë ¥ì°½ì— \\\"ë¬¸ìž¥ì— ëŒ€í•´\\\" í˜•íƒœë¡œ ì„¤ì •\n          if (sentence.tags.includes('verbalization') || sentence.tags.includes('ì–¸ì–´í™”') || (_sentence$source_mess = sentence.source_message_id) !== null && _sentence$source_mess !== void 0 && _sentence$source_mess.includes('verbalization')) {\n            console.log('ì–¸ì–´í™” ë¬¸ìž¥ìœ¼ë¡œ ì¸ì‹ë¨');\n            // ì–¸ì–´í™”ì—ì„œ ì˜¨ ë¬¸ìž¥ì¸ ê²½ìš° - ì–¸ì–´í™” ìŠ¤ë ˆë“œë¡œ ì´ë™\n            if (sentence.source_conversation_id && sentence.source_conversation_id !== 'verbalization_chat') {\n              console.log('ì–¸ì–´í™” ìŠ¤ë ˆë“œ IDê°€ ìžˆìŒ:', sentence.source_conversation_id);\n              sessionStorage.setItem('selectedSentenceForInput', `\"${sentence.sentence}\"ì— ëŒ€í•´ `);\n              if (onNavigateToThread) {\n                console.log('ì–¸ì–´í™” ìŠ¤ë ˆë“œë¡œ ì´ë™ ì¤‘...');\n                onNavigateToThread(sentence.source_conversation_id, 'verbalization');\n              }\n            } else {\n              console.log('ì–¸ì–´í™” ìŠ¤ë ˆë“œ IDê°€ ì—†ì–´ì„œ ì–¸ì–´í™” ëª¨ë“œë¡œë§Œ ì „í™˜');\n              // source_conversation_idê°€ ì—†ìœ¼ë©´ ì–¸ì–´í™” ëª¨ë“œë¡œë§Œ ì „í™˜\n              sessionStorage.setItem('selectedSentenceForInput', `\"${sentence.sentence}\"ì— ëŒ€í•´ `);\n              if (onNavigateToPersona) {\n                console.log('ì–¸ì–´í™” íŽ˜ë¥´ì†Œë‚˜ë¡œ ì´ë™ ì¤‘...');\n                // ì–¸ì–´í™”ëŠ” verbalization ID ì‚¬ìš©\n                onNavigateToPersona('verbalization', 'sentence');\n              }\n            }\n          } else {\n            var _sentence$source_mess2, _sentence$source_mess3, _sentence$source_mess4;\n            console.log('í›ˆìŠµ ë¬¸ìž¥ìœ¼ë¡œ ì¸ì‹ë¨');\n            // í›ˆìŠµì—ì„œ ì˜¨ ë¬¸ìž¥ì¸ ê²½ìš° - source_message_idì—ì„œ ìŠ¤ë ˆë“œ íƒ€ìž… ì‹ë³„\n            let threadType = 'interpretation'; // ê¸°ë³¸ê°’\n\n            if ((_sentence$source_mess2 = sentence.source_message_id) !== null && _sentence$source_mess2 !== void 0 && _sentence$source_mess2.includes('sentence_') || sentence.tags.includes('sentence')) {\n              threadType = 'sentence';\n            } else if ((_sentence$source_mess3 = sentence.source_message_id) !== null && _sentence$source_mess3 !== void 0 && _sentence$source_mess3.includes('proceed_') || sentence.tags.includes('proceed')) {\n              threadType = 'proceed';\n            } else if ((_sentence$source_mess4 = sentence.source_message_id) !== null && _sentence$source_mess4 !== void 0 && _sentence$source_mess4.includes('interpretation_') || sentence.tags.includes('interpretation')) {\n              threadType = 'interpretation';\n            }\n            console.log('ì‹ë³„ëœ ìŠ¤ë ˆë“œ íƒ€ìž…:', threadType);\n            if (sentence.source_conversation_id) {\n              console.log('í›ˆìŠµ ìŠ¤ë ˆë“œ IDê°€ ìžˆìŒ:', sentence.source_conversation_id);\n              sessionStorage.setItem('selectedSentenceForInput', `\"${sentence.sentence}\"ì— ëŒ€í•´ `);\n              if (onNavigateToThread) {\n                console.log('í›ˆìŠµ ìŠ¤ë ˆë“œë¡œ ì´ë™ ì¤‘...');\n                onNavigateToThread(sentence.source_conversation_id, threadType);\n              }\n            } else {\n              console.log('í›ˆìŠµ ìŠ¤ë ˆë“œ IDê°€ ì—†ìŒ');\n              // source_conversation_idê°€ ì—†ìœ¼ë©´ íŽ˜ë¥´ì†Œë‚˜ ì •ë³´ë¼ë„ ì¶”ì¶œí•´ì„œ í•´ë‹¹ íŽ˜ë¥´ì†Œë‚˜ë¡œ ì´ë™\n              const personaId = sentence.tags.find(tag => tag !== threadType && tag !== 'sentence' && tag !== 'proceed' && tag !== 'interpretation');\n              if (personaId && personas && personas[personaId]) {\n                console.log('íŽ˜ë¥´ì†Œë‚˜ ID ì°¾ìŒ:', personaId);\n                sessionStorage.setItem('selectedSentenceForInput', `\"${sentence.sentence}\"ì— ëŒ€í•´ `);\n                if (onNavigateToPersona) {\n                  console.log('íŽ˜ë¥´ì†Œë‚˜ë¡œ ì´ë™ ì¤‘...');\n\n                  // í•´ì„ íƒ€ìž…ì¸ ê²½ìš° interpretation ëª¨ë“œë¡œ, ê·¸ ì™¸ëŠ” sentence ëª¨ë“œë¡œ\n                  if (threadType === 'interpretation') {\n                    console.log('í•´ì„ ëª¨ë“œë¡œ ì´ë™');\n                    // í•´ì„ ëª¨ë“œëŠ” ì§ì ‘ ì§€ì›í•˜ì§€ ì•Šìœ¼ë¯€ë¡œ sentence ëª¨ë“œë¡œ ëŒ€ì²´\n                    onNavigateToPersona(personaId, 'sentence');\n                  } else {\n                    console.log('ë¬¸ìž¥ ëª¨ë“œë¡œ ì´ë™');\n                    onNavigateToPersona(personaId, 'sentence');\n                  }\n                }\n              } else {\n                console.log('íŽ˜ë¥´ì†Œë‚˜ ì •ë³´ë„ ì°¾ì„ ìˆ˜ ì—†ìŒ');\n                console.log('ì‚¬ìš© ê°€ëŠ¥í•œ íƒœê·¸ë“¤:', sentence.tags);\n                console.log('ì‚¬ìš© ê°€ëŠ¥í•œ íŽ˜ë¥´ì†Œë‚˜ë“¤:', Object.keys(personas));\n                alert('í•´ë‹¹ ë¬¸ìž¥ì˜ ì¶œì²˜ ì •ë³´ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');\n              }\n            }\n          }\n          break;\n        case 'delete':\n          // ë¬¸ìž¥ ì‚­ì œ\n          await sentenceApi.deleteVaultSentence(sentence.id);\n          setSentences(prev => prev.filter(s => s.id !== sentence.id));\n          break;\n      }\n    } catch (error) {\n      console.error('ì•¡ì…˜ ì‹¤í–‰ ì‹¤íŒ¨:', error);\n      alert('ìž‘ì—… ì‹¤í–‰ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: ' + error);\n    }\n    setConfirmationModal(null);\n  };\n  const togglePin = sentenceId => {\n    setPinnedSentences(prev => {\n      const newSet = new Set(prev);\n      if (newSet.has(sentenceId)) {\n        newSet.delete(sentenceId);\n      } else {\n        newSet.add(sentenceId);\n      }\n      return newSet;\n    });\n  };\n  const extractPersonaIdFromSentence = sentence => {\n    console.log('ë¼ë²¨ ì¶”ì¶œ ì¤‘:', sentence);\n    console.log('tags:', sentence.tags);\n    console.log('source_message_id:', sentence.source_message_id);\n    console.log('ì‚¬ìš© ê°€ëŠ¥í•œ íŽ˜ë¥´ì†Œë‚˜ë“¤:', Object.keys(personas));\n\n    // tagsì—ì„œ íŽ˜ë¥´ì†Œë‚˜ ID ì°¾ê¸°\n    for (const tag of sentence.tags) {\n      if (personas[tag]) {\n        console.log('íƒœê·¸ì—ì„œ íŽ˜ë¥´ì†Œë‚˜ ë°œê²¬:', tag, personas[tag].name);\n        return tag;\n      }\n    }\n    return null;\n  };\n  const getPersonaName = sentence => {\n    var _sentence$source_mess5;\n    // ì–¸ì–´í™” íƒœê·¸ ì²´í¬\n    if (sentence.tags.includes('ì–¸ì–´í™”') || sentence.tags.includes('verbalization') || (_sentence$source_mess5 = sentence.source_message_id) !== null && _sentence$source_mess5 !== void 0 && _sentence$source_mess5.includes('verbalization')) {\n      return 'ì–¸ì–´í™”';\n    }\n\n    // íŽ¸ì§€ íƒœê·¸ ì²´í¬\n    if (sentence.tags.includes('letter')) {\n      return 'íŽ¸ì§€';\n    }\n\n    // íŽ˜ë¥´ì†Œë‚˜ ì´ë¦„ ì°¾ê¸°\n    for (const tag of sentence.tags) {\n      const persona = personas[tag];\n      if (persona) {\n        return persona.name;\n      }\n    }\n    return 'ì‹œìŠ¤í…œ';\n  };\n  const getThreadTypeLabel = sentence => {\n    var _sentence$source_mess6, _sentence$source_mess7, _sentence$source_mess8, _sentence$source_mess9;\n    // source_message_idë‚˜ tagsì—ì„œ ìŠ¤ë ˆë“œ íƒ€ìž… ì¶”ì¶œ\n    if ((_sentence$source_mess6 = sentence.source_message_id) !== null && _sentence$source_mess6 !== void 0 && _sentence$source_mess6.includes('interpretation_') || sentence.tags.includes('interpretation')) {\n      return 'í•´ì„';\n    } else if ((_sentence$source_mess7 = sentence.source_message_id) !== null && _sentence$source_mess7 !== void 0 && _sentence$source_mess7.includes('proceed_') || sentence.tags.includes('proceed')) {\n      return 'ë‚˜ì•„ê°€ê¸°';\n    } else if ((_sentence$source_mess8 = sentence.source_message_id) !== null && _sentence$source_mess8 !== void 0 && _sentence$source_mess8.includes('sentence_') || sentence.tags.includes('sentence')) {\n      return 'ë¬¸ìž¥';\n    } else if ((_sentence$source_mess9 = sentence.source_message_id) !== null && _sentence$source_mess9 !== void 0 && _sentence$source_mess9.includes('verbalization') || sentence.tags.includes('verbalization')) {\n      return 'ì–¸ì–´í™”';\n    }\n    return 'ì•Œìˆ˜ì—†ìŒ';\n  };\n  const getModalContent = () => {\n    if (!confirmationModal) return null;\n    const {\n      type,\n      sentence\n    } = confirmationModal;\n    const personaName = getPersonaName(sentence);\n    switch (type) {\n      case 'interact':\n        return {\n          title: 'ìƒí˜¸ìž‘ìš© í•˜ê¸°',\n          message: `í•´ë‹¹ ë¬¸ìž¥ì´ ì˜¨ ìŠ¤ë ˆë“œë¡œ ì´ë™í•˜ì—¬ ì´ ë¬¸ìž¥ì— ëŒ€í•´ ìƒí˜¸ìž‘ìš©ì„ ì‹œìž‘í•˜ì‹œê² ìŠµë‹ˆê¹Œ?`,\n          confirmText: 'ìƒí˜¸ìž‘ìš©',\n          cancelText: 'ì·¨ì†Œ'\n        };\n      case 'delete':\n        return {\n          title: 'ë¬¸ìž¥ ì‚­ì œ',\n          message: 'ì´ ë¬¸ìž¥ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ? ì´ ìž‘ì—…ì€ ë˜ëŒë¦´ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.',\n          confirmText: 'ì‚­ì œ',\n          cancelText: 'ì·¨ì†Œ'\n        };\n      default:\n        return null;\n    }\n  };\n  const toggleFilterDropdown = () => {\n    setShowFilterDropdown(!showFilterDropdown);\n  };\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(Container, {\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          padding: '40px',\n          textAlign: 'center'\n        },\n        children: \"\\uB85C\\uB529 \\uC911...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 790,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 789,\n      columnNumber: 7\n    }, this);\n  }\n  const modalContent = getModalContent();\n  return /*#__PURE__*/_jsxDEV(Container, {\n    children: [/*#__PURE__*/_jsxDEV(Header, {\n      children: [/*#__PURE__*/_jsxDEV(NavigationButton, {\n        onClick: () => handleNavigateFilter('prev'),\n        disabled: currentFilterIndex === 0,\n        children: \"\\u2039\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 802,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(FilterContainer, {\n        className: \"filter-dropdown\",\n        children: [/*#__PURE__*/_jsxDEV(FilterDropdownButton, {\n          $isOpen: showFilterDropdown,\n          onClick: toggleFilterDropdown,\n          children: [currentFilter, /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"arrow\",\n            children: \"\\u25BC\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 815,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 810,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(FilterDropdownMenu, {\n          $isOpen: showFilterDropdown,\n          children: filterOptions.map(option => /*#__PURE__*/_jsxDEV(FilterDropdownItem, {\n            $isSelected: option === currentFilter,\n            onClick: () => handleFilterChange(option),\n            children: option\n          }, option, false, {\n            fileName: _jsxFileName,\n            lineNumber: 819,\n            columnNumber: 15\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 817,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 809,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(NavigationButton, {\n        onClick: () => handleNavigateFilter('next'),\n        disabled: currentFilterIndex === filterOptions.length - 1,\n        children: \"\\u203A\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 830,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 801,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(ContentArea, {\n      children: filteredSentences.length === 0 ? /*#__PURE__*/_jsxDEV(EmptyState, {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"icon\",\n          children: \"\\uD83D\\uDCDD\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 841,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"title\",\n          children: \"\\uC800\\uC7A5\\uB41C \\uBB38\\uC7A5\\uC774 \\uC5C6\\uC2B5\\uB2C8\\uB2E4\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 842,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"description\",\n          children: \"\\uD6C8\\uC2B5 \\uD398\\uC774\\uC9C0\\uC5D0\\uC11C \\uBB38\\uC7A5\\uC744 \\uC800\\uC7A5\\uACE0\\uC5D0 \\uC800\\uC7A5\\uD574\\uBCF4\\uC138\\uC694\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 843,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 840,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(SentenceGrid, {\n        children: filteredSentences.map(sentence => /*#__PURE__*/_jsxDEV(SentenceContainer, {\n          children: [/*#__PURE__*/_jsxDEV(SentenceRow, {\n            $isPinned: pinnedSentences.has(sentence.id),\n            $isHighlighted: sentence.is_highlighted,\n            onClick: e => handleSentenceClick(e, sentence),\n            style: {\n              '--has-memo': sentence.memo_content ? '50px' : '0px'\n            },\n            children: [/*#__PURE__*/_jsxDEV(SentenceContent, {\n              children: [/*#__PURE__*/_jsxDEV(SentenceText, {\n                children: sentence.sentence\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 860,\n                columnNumber: 21\n              }, this), sentence.memo_content && /*#__PURE__*/_jsxDEV(MemoPreview, {\n                children: [\"\\uD83D\\uDCDD \", sentence.memo_content]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 862,\n                columnNumber: 23\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 859,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(StatusIndicators, {\n              children: [sentence.is_highlighted && /*#__PURE__*/_jsxDEV(StatusIndicator, {\n                $type: \"highlight\",\n                $color: sentence.highlight_color || 'yellow',\n                title: `í•˜ì´ë¼ì´íŠ¸ (${sentence.highlight_color || 'yellow'})`\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 870,\n                columnNumber: 23\n              }, this), sentence.memo_content && /*#__PURE__*/_jsxDEV(StatusIndicator, {\n                $type: \"memo\",\n                title: \"\\uBA54\\uBAA8 \\uC788\\uC74C\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 877,\n                columnNumber: 23\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 868,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(PinIcon, {\n              $isPinned: pinnedSentences.has(sentence.id),\n              onClick: e => {\n                e.stopPropagation();\n                togglePin(sentence.id);\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 884,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 851,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(SentenceMetaExternal, {\n            children: [/*#__PURE__*/_jsxDEV(PersonaLabel, {\n              children: getPersonaName(sentence)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 893,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(DateLabel, {\n              children: new Date(sentence.created_at).toLocaleDateString('ko-KR')\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 894,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 892,\n            columnNumber: 17\n          }, this)]\n        }, sentence.id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 850,\n          columnNumber: 15\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 848,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 838,\n      columnNumber: 7\n    }, this), contextMenu && /*#__PURE__*/_jsxDEV(ContextMenuContainer, {\n      $x: contextMenu.x,\n      $y: contextMenu.y,\n      children: [/*#__PURE__*/_jsxDEV(ContextMenuItem, {\n        onClick: () => handleContextMenuAction('interact', contextMenu.sentence),\n        children: \"\\uC0C1\\uD638\\uC791\\uC6A9 \\uD558\\uAE30\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 905,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(ContextMenuItem, {\n        onClick: () => handleContextMenuAction('delete', contextMenu.sentence),\n        children: \"\\uC0AD\\uC81C\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 908,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 904,\n      columnNumber: 9\n    }, this), confirmationModal && modalContent && /*#__PURE__*/_jsxDEV(ModalOverlay, {\n      onClick: () => setConfirmationModal(null),\n      children: /*#__PURE__*/_jsxDEV(ModalContent, {\n        onClick: e => e.stopPropagation(),\n        children: [/*#__PURE__*/_jsxDEV(ModalTitle, {\n          children: modalContent.title\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 918,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(ModalMessage, {\n          children: modalContent.message\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 919,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(ModalButtons, {\n          children: [/*#__PURE__*/_jsxDEV(ModalButton, {\n            $variant: \"secondary\",\n            onClick: () => setConfirmationModal(null),\n            children: modalContent.cancelText\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 921,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(ModalButton, {\n            $variant: \"primary\",\n            onClick: handleConfirmAction,\n            children: modalContent.confirmText\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 927,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 920,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 917,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 916,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 800,\n    columnNumber: 5\n  }, this);\n};\n_s(SentenceVaultView, \"SWzBFhNHZVqSSZ009aOAhMW4FRQ=\");\n_c28 = SentenceVaultView;\nexport default SentenceVaultView;\nvar _c, _c2, _c3, _c4, _c5, _c6, _c7, _c8, _c9, _c0, _c1, _c10, _c11, _c12, _c13, _c14, _c15, _c16, _c17, _c18, _c19, _c20, _c21, _c22, _c23, _c24, _c25, _c26, _c27, _c28;\n$RefreshReg$(_c, \"Container\");\n$RefreshReg$(_c2, \"Header\");\n$RefreshReg$(_c3, \"FilterDropdownButton\");\n$RefreshReg$(_c4, \"FilterDropdownMenu\");\n$RefreshReg$(_c5, \"FilterDropdownItem\");\n$RefreshReg$(_c6, \"FilterContainer\");\n$RefreshReg$(_c7, \"NavigationButton\");\n$RefreshReg$(_c8, \"ContentArea\");\n$RefreshReg$(_c9, \"SentenceGrid\");\n$RefreshReg$(_c0, \"SentenceContainer\");\n$RefreshReg$(_c1, \"SentenceRow\");\n$RefreshReg$(_c10, \"SentenceContent\");\n$RefreshReg$(_c11, \"SentenceText\");\n$RefreshReg$(_c12, \"SentenceMetaExternal\");\n$RefreshReg$(_c13, \"PersonaLabel\");\n$RefreshReg$(_c14, \"DateLabel\");\n$RefreshReg$(_c15, \"PinIcon\");\n$RefreshReg$(_c16, \"EmptyState\");\n$RefreshReg$(_c17, \"ContextMenuContainer\");\n$RefreshReg$(_c18, \"ContextMenuItem\");\n$RefreshReg$(_c19, \"ModalOverlay\");\n$RefreshReg$(_c20, \"ModalContent\");\n$RefreshReg$(_c21, \"ModalTitle\");\n$RefreshReg$(_c22, \"ModalMessage\");\n$RefreshReg$(_c23, \"ModalButtons\");\n$RefreshReg$(_c24, \"ModalButton\");\n$RefreshReg$(_c25, \"StatusIndicators\");\n$RefreshReg$(_c26, \"StatusIndicator\");\n$RefreshReg$(_c27, \"MemoPreview\");\n$RefreshReg$(_c28, \"SentenceVaultView\");","map":{"version":3,"names":["React","useState","useEffect","styled","sentenceApi","jsxDEV","_jsxDEV","Container","div","_c","Header","_c2","FilterDropdownButton","button","props","$isOpen","_c3","FilterDropdownMenu","_c4","FilterDropdownItem","$isSelected","_c5","FilterContainer","_c6","NavigationButton","_c7","ContentArea","_c8","SentenceGrid","_c9","SentenceContainer","_c0","SentenceRow","$isHighlighted","$isPinned","_c1","SentenceContent","_c10","SentenceText","_c11","SentenceMetaExternal","_c12","PersonaLabel","span","_c13","DateLabel","_c14","PinIcon","_c15","EmptyState","_c16","ContextMenuContainer","$y","$x","_c17","ContextMenuItem","_c18","ModalOverlay","_c19","ModalContent","_c20","ModalTitle","h3","_c21","ModalMessage","p","_c22","ModalButtons","_c23","ModalButton","$variant","_c24","StatusIndicators","_c25","StatusIndicator","$type","$color","_c26","MemoPreview","_c27","SentenceVaultView","personas","onNavigateToPersona","onNavigateToThread","onNavigateToPersonaWithSentence","_s","sentences","setSentences","filteredSentences","setFilteredSentences","currentFilter","setCurrentFilter","loading","setLoading","pinnedSentences","setPinnedSentences","Set","contextMenu","setContextMenu","confirmationModal","setConfirmationModal","showFilterDropdown","setShowFilterDropdown","filterOptions","setFilterOptions","currentFilterIndex","setCurrentFilterIndex","loadData","applyFilter","handleClickOutside","console","log","document","addEventListener","removeEventListener","event","target","closest","sentenceData","getVaultSentences","personaNames","Object","values","map","name","error","filtered","filter","s","_s$source_message_id","tags","includes","source_message_id","personaId","keys","find","id","pinned","has","unpinned","sort","a","b","Date","created_at","getTime","handleFilterChange","indexOf","handleNavigateFilter","direction","newIndex","Math","max","min","length","handleSentenceClick","sentence","preventDefault","stopPropagation","substring","clientX","clientY","x","y","handleContextMenuAction","action","type","togglePin","handleConfirmAction","_sentence$source_mess","source_conversation_id","sessionStorage","setItem","_sentence$source_mess2","_sentence$source_mess3","_sentence$source_mess4","threadType","tag","alert","deleteVaultSentence","prev","sentenceId","newSet","delete","add","extractPersonaIdFromSentence","getPersonaName","_sentence$source_mess5","persona","getThreadTypeLabel","_sentence$source_mess6","_sentence$source_mess7","_sentence$source_mess8","_sentence$source_mess9","getModalContent","personaName","title","message","confirmText","cancelText","toggleFilterDropdown","children","style","padding","textAlign","fileName","_jsxFileName","lineNumber","columnNumber","modalContent","onClick","disabled","className","option","is_highlighted","e","memo_content","highlight_color","toLocaleDateString","_c28","$RefreshReg$"],"sources":["C:/Users/sungh/Desktop/chat_work_ver2/frontend/src/features/vault/components/SentenceVaultView.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport styled from 'styled-components';\nimport { sentenceApi, SentenceVaultItem } from '../../training/api/sentenceApi';\nimport { chatApi } from '../../shared/api/chatApi';\nimport { Persona } from '../../shared/types';\n\ninterface SentenceVaultViewProps {\n  personas: Record<string, Persona>;\n  onNavigateToPersona: (personaId: string, mode: 'sentence') => void;\n  onNavigateToThread: (threadId: string, threadType: string) => void;\n  onNavigateToPersonaWithSentence?: (personaId: string, mode: 'sentence', selectedSentence: string) => void;\n}\n\ninterface ContextMenu {\n  x: number;\n  y: number;\n  sentence: SentenceVaultItem;\n}\n\ninterface ConfirmationModalData {\n  type: 'interact' | 'delete';\n  sentence: SentenceVaultItem;\n}\n\nconst Container = styled.div`\n  display: flex;\n  flex-direction: column;\n  height: 100vh;\n`;\n\nconst Header = styled.div`\n  padding: 20px;\n  border-bottom: 1px solid #e9ecef;\n  background: #fff;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  gap: 10px;\n`;\n\nconst FilterDropdownButton = styled.button<{ $isOpen: boolean }>`\n  background: linear-gradient(135deg, #fff 0%, #f8f9fa 100%);\n  border: 1px solid #dee2e6;\n  border-radius: 8px;\n  padding: 8px 16px;\n  cursor: pointer;\n  font-size: 14px;\n  color: #333;\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  min-width: 120px;\n  justify-content: space-between;\n  \n  &:hover {\n    background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);\n  }\n  \n  .arrow {\n    font-size: 12px;\n    transition: transform 0.2s;\n    transform: ${props => props.$isOpen ? 'rotate(180deg)' : 'rotate(0deg)'};\n  }\n`;\n\nconst FilterDropdownMenu = styled.div<{ $isOpen: boolean }>`\n  position: absolute;\n  top: 100%;\n  left: 50%;\n  transform: translateX(-50%);\n  background: #f8f9fa;\n  border: 1px solid #dee2e6;\n  border-radius: 8px;\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);\n  z-index: 1000;\n  max-height: 200px;\n  overflow-y: auto;\n  display: ${props => props.$isOpen ? 'block' : 'none'};\n  margin-top: 4px;\n  min-width: 150px;\n`;\n\nconst FilterDropdownItem = styled.div<{ $isSelected: boolean }>`\n  padding: 8px 16px;\n  cursor: pointer;\n  color: #333;\n  background: ${props => props.$isSelected ? '#e9ecef' : 'transparent'};\n  font-weight: ${props => props.$isSelected ? '500' : 'normal'};\n  \n  &:hover {\n    background: #e9ecef;\n  }\n  \n  &:first-child {\n    border-radius: 8px 8px 0 0;\n  }\n  \n  &:last-child {\n    border-radius: 0 0 8px 8px;\n  }\n`;\n\nconst FilterContainer = styled.div`\n  position: relative;\n  display: flex;\n  align-items: center;\n  gap: 10px;\n`;\n\nconst NavigationButton = styled.button`\n  background: linear-gradient(135deg, #fff 0%, #f8f9fa 100%);\n  border: 1px solid #dee2e6;\n  border-radius: 50%;\n  width: 32px;\n  height: 32px;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 14px;\n  color: #333;\n  \n  &:hover {\n    background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);\n  }\n  \n  &:disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n  }\n`;\n\nconst ContentArea = styled.div`\n  flex: 1;\n  padding: 20px;\n  overflow-y: auto;\n  background: #ffffff;\n`;\n\nconst SentenceGrid = styled.div`\n  display: flex;\n  flex-direction: column;\n  gap: 12px;\n`;\n\nconst SentenceContainer = styled.div`\n  display: flex;\n  flex-direction: column;\n  gap: 8px;\n`;\n\nconst SentenceRow = styled.div<{ $isPinned: boolean; $isHighlighted?: boolean }>`\n  width: 100%;\n  background: ${props => props.$isHighlighted \n    ? 'linear-gradient(135deg, #fff9c4 0%, #ffeaa7 100%)' \n    : 'linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%)'\n  };\n  border: 1px solid ${props => props.$isHighlighted ? '#ffc107' : '#dee2e6'};\n  border-radius: 16px;\n  padding: 16px 20px;\n  cursor: pointer;\n  position: relative;\n  transition: all 0.2s ease;\n  min-height: 60px;\n  display: flex;\n  align-items: center;\n  \n  &:hover {\n    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);\n    transform: translateY(-1px);\n    border-color: ${props => props.$isHighlighted ? '#ffb300' : '#adb5bd'};\n    background: ${props => props.$isHighlighted\n      ? 'linear-gradient(135deg, #fff3cd 0%, #ffd60a 100%)'\n      : 'linear-gradient(135deg, #e9ecef 0%, #dee2e6 100%)'\n    };\n  }\n  \n  ${props => props.$isPinned && `\n    background: ${props.$isHighlighted \n      ? 'linear-gradient(135deg, #fff9c4 0%, #ffeaa7 100%)' \n      : 'linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%)'\n    };\n    border-color: ${props.$isHighlighted ? '#ffc107' : '#dee2e6'};\n    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\n    \n    &:hover {\n      background: ${props.$isHighlighted\n        ? 'linear-gradient(135deg, #fff3cd 0%, #ffd60a 100%)'\n        : 'linear-gradient(135deg, #e9ecef 0%, #dee2e6 100%)'\n      };\n      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);\n      border-color: ${props.$isHighlighted ? '#ffb300' : '#adb5bd'};\n    }\n  `}\n`;\n\nconst SentenceContent = styled.div`\n  flex: 1;\n  padding-bottom: ${props => \n    // ë©”ëª¨ê°€ ìžˆìœ¼ë©´ í•˜ë‹¨ ì—¬ë°± ì¶”ê°€\n    'var(--has-memo, 0px)'\n  };\n`;\n\nconst SentenceText = styled.div`\n  font-size: 15px;\n  line-height: 1.6;\n  color: #333;\n  word-break: break-word;\n  font-weight: 500;\n`;\n\nconst SentenceMetaExternal = styled.div`\n  display: flex;\n  justify-content: flex-end;\n  align-items: center;\n  font-size: 12px;\n  color: #6c757d;\n  gap: 8px;\n`;\n\nconst PersonaLabel = styled.span`\n  background: #e9ecef;\n  padding: 3px 8px;\n  border-radius: 6px;\n  font-weight: 500;\n  color: #495057;\n`;\n\nconst DateLabel = styled.span`\n  font-style: italic;\n  opacity: 0.8;\n`;\n\nconst PinIcon = styled.div<{ $isPinned: boolean }>`\n  position: absolute;\n  top: 12px;\n  right: 16px;\n  width: 24px;\n  height: 24px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 14px;\n  color: ${props => props.$isPinned ? '#333' : 'transparent'};\n  cursor: pointer;\n  z-index: 2;\n  border-radius: 50%;\n  transition: all 0.2s ease;\n  \n  &:hover {\n    color: #333;\n    background: rgba(0, 0, 0, 0.1);\n  }\n  \n  ${SentenceRow}:hover & {\n    color: ${props => props.$isPinned ? '#333' : '#666'};\n  }\n  \n  &::before {\n    content: \"ðŸ“Œ\";\n    filter: grayscale(100%);\n  }\n`;\n\nconst EmptyState = styled.div`\n  text-align: center;\n  padding: 60px 20px;\n  color: #6c757d;\n  \n  .icon {\n    font-size: 48px;\n    margin-bottom: 16px;\n  }\n  \n  .title {\n    font-size: 18px;\n    font-weight: 500;\n    margin-bottom: 8px;\n  }\n  \n  .description {\n    font-size: 14px;\n  }\n`;\n\nconst ContextMenuContainer = styled.div<{ $x: number; $y: number }>`\n  position: fixed;\n  top: ${props => props.$y}px;\n  left: ${props => props.$x}px;\n  background: white;\n  border: 1px solid #dee2e6;\n  border-radius: 8px;\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);\n  z-index: 1000;\n  min-width: 160px;\n  overflow: hidden;\n`;\n\nconst ContextMenuItem = styled.div`\n  padding: 12px 16px;\n  cursor: pointer;\n  font-size: 14px;\n  color: #333;\n  \n  &:hover {\n    background-color: #f8f9fa;\n  }\n  \n  &:not(:last-child) {\n    border-bottom: 1px solid #f1f3f4;\n  }\n`;\n\nconst ModalOverlay = styled.div`\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: rgba(0, 0, 0, 0.5);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: 2000;\n`;\n\nconst ModalContent = styled.div`\n  background: white;\n  border-radius: 12px;\n  padding: 24px;\n  max-width: 400px;\n  width: 90%;\n  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);\n`;\n\nconst ModalTitle = styled.h3`\n  margin: 0 0 16px 0;\n  font-size: 18px;\n  font-weight: 600;\n  color: #333;\n`;\n\nconst ModalMessage = styled.p`\n  margin: 0 0 24px 0;\n  font-size: 14px;\n  color: #666;\n  line-height: 1.5;\n`;\n\nconst ModalButtons = styled.div`\n  display: flex;\n  gap: 12px;\n  justify-content: flex-end;\n`;\n\nconst ModalButton = styled.button<{ $variant: 'primary' | 'secondary' }>`\n  padding: 10px 20px;\n  border-radius: 6px;\n  font-size: 14px;\n  font-weight: 500;\n  cursor: pointer;\n  border: 1px solid;\n  \n  ${props => props.$variant === 'primary' ? `\n    background: #007bff;\n    color: white;\n    border-color: #007bff;\n    \n    &:hover {\n      background: #0056b3;\n      border-color: #0056b3;\n    }\n  ` : `\n    background: white;\n    color: #6c757d;\n    border-color: #dee2e6;\n    \n    &:hover {\n      background: #f8f9fa;\n    }\n  `}\n`;\n\nconst StatusIndicators = styled.div`\n  position: absolute;\n  top: 8px;\n  right: 40px;\n  display: flex;\n  gap: 4px;\n  z-index: 1;\n`;\n\nconst StatusIndicator = styled.div<{ $type: 'highlight' | 'memo'; $color?: string }>`\n  width: 20px;\n  height: 20px;\n  border-radius: 50%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 10px;\n  color: white;\n  font-weight: bold;\n  background: ${props => {\n    if (props.$type === 'highlight') {\n      return props.$color === 'yellow' ? '#ffc107' : \n             props.$color === 'green' ? '#28a745' :\n             props.$color === 'blue' ? '#007bff' : '#ffc107';\n    }\n    return '#6c757d'; // ë©”ëª¨ ìƒ‰ìƒ\n  }};\n  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.2);\n  \n  &::before {\n    content: ${props => props.$type === 'highlight' ? '\"H\"' : '\"M\"'};\n  }\n`;\n\nconst MemoPreview = styled.div`\n  position: absolute;\n  bottom: 8px;\n  left: 20px;\n  right: 60px;\n  background: rgba(108, 117, 125, 0.1);\n  border-radius: 8px;\n  padding: 6px 10px;\n  font-size: 12px;\n  color: #6c757d;\n  font-style: italic;\n  max-height: 40px;\n  overflow: hidden;\n  display: -webkit-box;\n  -webkit-line-clamp: 2;\n  -webkit-box-orient: vertical;\n`;\n\nconst SentenceVaultView: React.FC<SentenceVaultViewProps> = ({\n  personas,\n  onNavigateToPersona,\n  onNavigateToThread,\n  onNavigateToPersonaWithSentence\n}) => {\n  const [sentences, setSentences] = useState<SentenceVaultItem[]>([]);\n  const [filteredSentences, setFilteredSentences] = useState<SentenceVaultItem[]>([]);\n  const [currentFilter, setCurrentFilter] = useState<string>('ì „ì²´');\n  const [loading, setLoading] = useState(true);\n  const [pinnedSentences, setPinnedSentences] = useState<Set<string>>(new Set());\n  const [contextMenu, setContextMenu] = useState<ContextMenu | null>(null);\n  const [confirmationModal, setConfirmationModal] = useState<ConfirmationModalData | null>(null);\n  const [showFilterDropdown, setShowFilterDropdown] = useState(false);\n\n  // í•„í„° ì˜µì…˜ë“¤\n  const [filterOptions, setFilterOptions] = useState<string[]>(['ì „ì²´', 'ì–¸ì–´í™”', 'íŽ¸ì§€']);\n  const [currentFilterIndex, setCurrentFilterIndex] = useState(0);\n\n  useEffect(() => {\n    loadData();\n  }, []);\n\n  useEffect(() => {\n    applyFilter();\n  }, [sentences, currentFilter, pinnedSentences]);\n\n  // ì»¨í…ìŠ¤íŠ¸ ë©”ë‰´ ì™¸ë¶€ í´ë¦­ ê°ì§€\n  useEffect(() => {\n    const handleClickOutside = () => {\n      console.log('ì™¸ë¶€ í´ë¦­ ê°ì§€, ì»¨í…ìŠ¤íŠ¸ ë©”ë‰´ ë‹«ê¸°');\n      setContextMenu(null);\n    };\n\n    if (contextMenu) {\n      document.addEventListener('click', handleClickOutside);\n      return () => document.removeEventListener('click', handleClickOutside);\n    }\n  }, [contextMenu]);\n\n  // ë“œë¡­ë‹¤ìš´ ì™¸ë¶€ í´ë¦­ ê°ì§€\n  useEffect(() => {\n    const handleClickOutside = (event: MouseEvent) => {\n      const target = event.target as Element;\n      if (!target.closest('.filter-dropdown')) {\n        setShowFilterDropdown(false);\n      }\n    };\n\n    if (showFilterDropdown) {\n      document.addEventListener('click', handleClickOutside);\n      return () => document.removeEventListener('click', handleClickOutside);\n    }\n  }, [showFilterDropdown]);\n\n  const loadData = async () => {\n    setLoading(true);\n    try {\n      // ì €ìž¥ê³  ë¬¸ìž¥ë“¤ ë¡œë“œ\n      const sentenceData = await sentenceApi.getVaultSentences();\n      console.log('ì €ìž¥ê³  ë°ì´í„°:', sentenceData);\n      setSentences(sentenceData);\n\n      // í•„í„° ì˜µì…˜ì— íŽ˜ë¥´ì†Œë‚˜ë“¤ ì¶”ê°€ (propsë¡œ ë°›ì€ personas ì‚¬ìš©)\n      const personaNames = Object.values(personas).map(p => p.name);\n      setFilterOptions(['ì „ì²´', 'ì–¸ì–´í™”', 'íŽ¸ì§€', ...personaNames]);\n    } catch (error) {\n      console.error('ë°ì´í„° ë¡œë”© ì‹¤íŒ¨:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const applyFilter = () => {\n    let filtered = [...sentences];\n\n    if (currentFilter !== 'ì „ì²´') {\n      if (currentFilter === 'ì–¸ì–´í™”') {\n        filtered = filtered.filter(s => \n          s.tags.includes('verbalization') || \n          s.tags.includes('ì–¸ì–´í™”') ||\n          s.source_message_id?.includes('verbalization')\n        );\n      } else if (currentFilter === 'íŽ¸ì§€') {\n        filtered = filtered.filter(s => s.tags.includes('letter'));\n      } else {\n        // íŽ˜ë¥´ì†Œë‚˜ ì´ë¦„ìœ¼ë¡œ í•„í„°ë§\n        const personaId = Object.keys(personas).find(id => personas[id].name === currentFilter);\n        if (personaId) {\n          filtered = filtered.filter(s => s.tags.includes(personaId) || s.source_message_id.includes(personaId));\n        }\n      }\n    }\n\n    // ê³ ì •ëœ ë¬¸ìž¥ë“¤ì„ ë§¨ ìœ„ë¡œ\n    const pinned = filtered.filter(s => pinnedSentences.has(s.id));\n    const unpinned = filtered.filter(s => !pinnedSentences.has(s.id));\n    \n    // ë‚ ì§œìˆœ ì •ë ¬ (ìµœì‹ ìˆœ)\n    pinned.sort((a, b) => new Date(b.created_at).getTime() - new Date(a.created_at).getTime());\n    unpinned.sort((a, b) => new Date(b.created_at).getTime() - new Date(a.created_at).getTime());\n\n    setFilteredSentences([...pinned, ...unpinned]);\n  };\n\n  const handleFilterChange = (filter: string) => {\n    setCurrentFilter(filter);\n    setCurrentFilterIndex(filterOptions.indexOf(filter));\n    setShowFilterDropdown(false);\n  };\n\n  const handleNavigateFilter = (direction: 'prev' | 'next') => {\n    const newIndex = direction === 'prev' \n      ? Math.max(0, currentFilterIndex - 1)\n      : Math.min(filterOptions.length - 1, currentFilterIndex + 1);\n    \n    setCurrentFilterIndex(newIndex);\n    setCurrentFilter(filterOptions[newIndex]);\n  };\n\n  const handleSentenceClick = (event: React.MouseEvent, sentence: SentenceVaultItem) => {\n    event.preventDefault();\n    event.stopPropagation();\n    \n    console.log('ë¬¸ìž¥ í´ë¦­ë¨:', sentence.sentence.substring(0, 50));\n    console.log('í´ë¦­ ìœ„ì¹˜:', event.clientX, event.clientY);\n    \n    setContextMenu({\n      x: event.clientX,\n      y: event.clientY,\n      sentence\n    });\n    \n    console.log('ì»¨í…ìŠ¤íŠ¸ ë©”ë‰´ ì„¤ì •ë¨');\n  };\n\n  const handleContextMenuAction = (action: string, sentence: SentenceVaultItem) => {\n    console.log('ì»¨í…ìŠ¤íŠ¸ ë©”ë‰´ ì•¡ì…˜:', action);\n    setContextMenu(null);\n    \n    switch (action) {\n      case 'interact':\n      case 'delete':\n        setConfirmationModal({ type: action as any, sentence });\n        break;\n      case 'pin':\n        togglePin(sentence.id);\n        break;\n    }\n  };\n\n  const handleConfirmAction = async () => {\n    if (!confirmationModal) return;\n    \n    const { type, sentence } = confirmationModal;\n    \n    try {\n      switch (type) {\n        case 'interact':\n          console.log('=== ìƒí˜¸ìž‘ìš© í•˜ê¸° ì‹œìž‘ ===');\n          console.log('ë¬¸ìž¥ ë°ì´í„°:', sentence);\n          console.log('tags:', sentence.tags);\n          console.log('source_message_id:', sentence.source_message_id);\n          console.log('source_conversation_id:', sentence.source_conversation_id);\n          \n          // í•´ë‹¹ ë¬¸ìž¥ì˜ ì¶œì²˜ ìŠ¤ë ˆë“œë¡œ ì´ë™í•˜ë©´ì„œ ìž…ë ¥ì°½ì— \\\"ë¬¸ìž¥ì— ëŒ€í•´\\\" í˜•íƒœë¡œ ì„¤ì •\n          if (sentence.tags.includes('verbalization') || sentence.tags.includes('ì–¸ì–´í™”') || sentence.source_message_id?.includes('verbalization')) {\n            console.log('ì–¸ì–´í™” ë¬¸ìž¥ìœ¼ë¡œ ì¸ì‹ë¨');\n            // ì–¸ì–´í™”ì—ì„œ ì˜¨ ë¬¸ìž¥ì¸ ê²½ìš° - ì–¸ì–´í™” ìŠ¤ë ˆë“œë¡œ ì´ë™\n            if (sentence.source_conversation_id && sentence.source_conversation_id !== 'verbalization_chat') {\n              console.log('ì–¸ì–´í™” ìŠ¤ë ˆë“œ IDê°€ ìžˆìŒ:', sentence.source_conversation_id);\n              sessionStorage.setItem('selectedSentenceForInput', `\"${sentence.sentence}\"ì— ëŒ€í•´ `);\n              if (onNavigateToThread) {\n                console.log('ì–¸ì–´í™” ìŠ¤ë ˆë“œë¡œ ì´ë™ ì¤‘...');\n                onNavigateToThread(sentence.source_conversation_id, 'verbalization');\n              }\n            } else {\n              console.log('ì–¸ì–´í™” ìŠ¤ë ˆë“œ IDê°€ ì—†ì–´ì„œ ì–¸ì–´í™” ëª¨ë“œë¡œë§Œ ì „í™˜');\n              // source_conversation_idê°€ ì—†ìœ¼ë©´ ì–¸ì–´í™” ëª¨ë“œë¡œë§Œ ì „í™˜\n              sessionStorage.setItem('selectedSentenceForInput', `\"${sentence.sentence}\"ì— ëŒ€í•´ `);\n              if (onNavigateToPersona) {\n                console.log('ì–¸ì–´í™” íŽ˜ë¥´ì†Œë‚˜ë¡œ ì´ë™ ì¤‘...');\n                // ì–¸ì–´í™”ëŠ” verbalization ID ì‚¬ìš©\n                onNavigateToPersona('verbalization', 'sentence');\n              }\n            }\n          } else {\n            console.log('í›ˆìŠµ ë¬¸ìž¥ìœ¼ë¡œ ì¸ì‹ë¨');\n            // í›ˆìŠµì—ì„œ ì˜¨ ë¬¸ìž¥ì¸ ê²½ìš° - source_message_idì—ì„œ ìŠ¤ë ˆë“œ íƒ€ìž… ì‹ë³„\n            let threadType = 'interpretation'; // ê¸°ë³¸ê°’\n            \n            if (sentence.source_message_id?.includes('sentence_') || sentence.tags.includes('sentence')) {\n              threadType = 'sentence';\n            } else if (sentence.source_message_id?.includes('proceed_') || sentence.tags.includes('proceed')) {\n              threadType = 'proceed';\n            } else if (sentence.source_message_id?.includes('interpretation_') || sentence.tags.includes('interpretation')) {\n              threadType = 'interpretation';\n            }\n            \n            console.log('ì‹ë³„ëœ ìŠ¤ë ˆë“œ íƒ€ìž…:', threadType);\n            \n            if (sentence.source_conversation_id) {\n              console.log('í›ˆìŠµ ìŠ¤ë ˆë“œ IDê°€ ìžˆìŒ:', sentence.source_conversation_id);\n              sessionStorage.setItem('selectedSentenceForInput', `\"${sentence.sentence}\"ì— ëŒ€í•´ `);\n              if (onNavigateToThread) {\n                console.log('í›ˆìŠµ ìŠ¤ë ˆë“œë¡œ ì´ë™ ì¤‘...');\n                onNavigateToThread(sentence.source_conversation_id, threadType);\n              }\n            } else {\n              console.log('í›ˆìŠµ ìŠ¤ë ˆë“œ IDê°€ ì—†ìŒ');\n              // source_conversation_idê°€ ì—†ìœ¼ë©´ íŽ˜ë¥´ì†Œë‚˜ ì •ë³´ë¼ë„ ì¶”ì¶œí•´ì„œ í•´ë‹¹ íŽ˜ë¥´ì†Œë‚˜ë¡œ ì´ë™\n              const personaId = sentence.tags.find(tag => tag !== threadType && tag !== 'sentence' && tag !== 'proceed' && tag !== 'interpretation');\n              \n              if (personaId && personas && personas[personaId]) {\n                console.log('íŽ˜ë¥´ì†Œë‚˜ ID ì°¾ìŒ:', personaId);\n                sessionStorage.setItem('selectedSentenceForInput', `\"${sentence.sentence}\"ì— ëŒ€í•´ `);\n                if (onNavigateToPersona) {\n                  console.log('íŽ˜ë¥´ì†Œë‚˜ë¡œ ì´ë™ ì¤‘...');\n                  \n                  // í•´ì„ íƒ€ìž…ì¸ ê²½ìš° interpretation ëª¨ë“œë¡œ, ê·¸ ì™¸ëŠ” sentence ëª¨ë“œë¡œ\n                  if (threadType === 'interpretation') {\n                    console.log('í•´ì„ ëª¨ë“œë¡œ ì´ë™');\n                    // í•´ì„ ëª¨ë“œëŠ” ì§ì ‘ ì§€ì›í•˜ì§€ ì•Šìœ¼ë¯€ë¡œ sentence ëª¨ë“œë¡œ ëŒ€ì²´\n                    onNavigateToPersona(personaId, 'sentence');\n                  } else {\n                    console.log('ë¬¸ìž¥ ëª¨ë“œë¡œ ì´ë™');\n                    onNavigateToPersona(personaId, 'sentence');\n                  }\n                }\n              } else {\n                console.log('íŽ˜ë¥´ì†Œë‚˜ ì •ë³´ë„ ì°¾ì„ ìˆ˜ ì—†ìŒ');\n                console.log('ì‚¬ìš© ê°€ëŠ¥í•œ íƒœê·¸ë“¤:', sentence.tags);\n                console.log('ì‚¬ìš© ê°€ëŠ¥í•œ íŽ˜ë¥´ì†Œë‚˜ë“¤:', Object.keys(personas));\n                alert('í•´ë‹¹ ë¬¸ìž¥ì˜ ì¶œì²˜ ì •ë³´ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');\n              }\n            }\n          }\n          \n          break;\n        case 'delete':\n          // ë¬¸ìž¥ ì‚­ì œ\n          await sentenceApi.deleteVaultSentence(sentence.id);\n          setSentences(prev => prev.filter(s => s.id !== sentence.id));\n          break;\n      }\n    } catch (error) {\n      console.error('ì•¡ì…˜ ì‹¤í–‰ ì‹¤íŒ¨:', error);\n      alert('ìž‘ì—… ì‹¤í–‰ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: ' + error);\n    }\n    \n    setConfirmationModal(null);\n  };\n\n  const togglePin = (sentenceId: string) => {\n    setPinnedSentences(prev => {\n      const newSet = new Set(prev);\n      if (newSet.has(sentenceId)) {\n        newSet.delete(sentenceId);\n      } else {\n        newSet.add(sentenceId);\n      }\n      return newSet;\n    });\n  };\n\n  const extractPersonaIdFromSentence = (sentence: SentenceVaultItem): string | null => {\n    console.log('ë¼ë²¨ ì¶”ì¶œ ì¤‘:', sentence);\n    console.log('tags:', sentence.tags);\n    console.log('source_message_id:', sentence.source_message_id);\n    console.log('ì‚¬ìš© ê°€ëŠ¥í•œ íŽ˜ë¥´ì†Œë‚˜ë“¤:', Object.keys(personas));\n    \n    // tagsì—ì„œ íŽ˜ë¥´ì†Œë‚˜ ID ì°¾ê¸°\n    for (const tag of sentence.tags) {\n      if (personas[tag]) {\n        console.log('íƒœê·¸ì—ì„œ íŽ˜ë¥´ì†Œë‚˜ ë°œê²¬:', tag, personas[tag].name);\n        return tag;\n      }\n    }\n    return null;\n  };\n\n  const getPersonaName = (sentence: SentenceVaultItem): string => {\n    // ì–¸ì–´í™” íƒœê·¸ ì²´í¬\n    if (sentence.tags.includes('ì–¸ì–´í™”') || \n        sentence.tags.includes('verbalization') ||\n        sentence.source_message_id?.includes('verbalization')) {\n      return 'ì–¸ì–´í™”';\n    }\n    \n    // íŽ¸ì§€ íƒœê·¸ ì²´í¬\n    if (sentence.tags.includes('letter')) {\n      return 'íŽ¸ì§€';\n    }\n    \n    // íŽ˜ë¥´ì†Œë‚˜ ì´ë¦„ ì°¾ê¸°\n    for (const tag of sentence.tags) {\n      const persona = personas[tag];\n      if (persona) {\n        return persona.name;\n      }\n    }\n    \n    return 'ì‹œìŠ¤í…œ';\n  };\n\n  const getThreadTypeLabel = (sentence: SentenceVaultItem): string => {\n    // source_message_idë‚˜ tagsì—ì„œ ìŠ¤ë ˆë“œ íƒ€ìž… ì¶”ì¶œ\n    if (sentence.source_message_id?.includes('interpretation_') || sentence.tags.includes('interpretation')) {\n      return 'í•´ì„';\n    } else if (sentence.source_message_id?.includes('proceed_') || sentence.tags.includes('proceed')) {\n      return 'ë‚˜ì•„ê°€ê¸°';\n    } else if (sentence.source_message_id?.includes('sentence_') || sentence.tags.includes('sentence')) {\n      return 'ë¬¸ìž¥';\n    } else if (sentence.source_message_id?.includes('verbalization') || sentence.tags.includes('verbalization')) {\n      return 'ì–¸ì–´í™”';\n    }\n    \n    return 'ì•Œìˆ˜ì—†ìŒ';\n  };\n\n  const getModalContent = () => {\n    if (!confirmationModal) return null;\n    \n    const { type, sentence } = confirmationModal;\n    const personaName = getPersonaName(sentence);\n    \n    switch (type) {\n      case 'interact':\n        return {\n          title: 'ìƒí˜¸ìž‘ìš© í•˜ê¸°',\n          message: `í•´ë‹¹ ë¬¸ìž¥ì´ ì˜¨ ìŠ¤ë ˆë“œë¡œ ì´ë™í•˜ì—¬ ì´ ë¬¸ìž¥ì— ëŒ€í•´ ìƒí˜¸ìž‘ìš©ì„ ì‹œìž‘í•˜ì‹œê² ìŠµë‹ˆê¹Œ?`,\n          confirmText: 'ìƒí˜¸ìž‘ìš©',\n          cancelText: 'ì·¨ì†Œ'\n        };\n      case 'delete':\n        return {\n          title: 'ë¬¸ìž¥ ì‚­ì œ',\n          message: 'ì´ ë¬¸ìž¥ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ? ì´ ìž‘ì—…ì€ ë˜ëŒë¦´ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.',\n          confirmText: 'ì‚­ì œ',\n          cancelText: 'ì·¨ì†Œ'\n        };\n      default:\n        return null;\n    }\n  };\n\n  const toggleFilterDropdown = () => {\n    setShowFilterDropdown(!showFilterDropdown);\n  };\n\n  if (loading) {\n    return (\n      <Container>\n        <div style={{ padding: '40px', textAlign: 'center' }}>\n          ë¡œë”© ì¤‘...\n        </div>\n      </Container>\n    );\n  }\n\n  const modalContent = getModalContent();\n\n  return (\n    <Container>\n      <Header>\n        <NavigationButton\n          onClick={() => handleNavigateFilter('prev')}\n          disabled={currentFilterIndex === 0}\n        >\n          â€¹\n        </NavigationButton>\n        \n        <FilterContainer className=\"filter-dropdown\">\n          <FilterDropdownButton\n            $isOpen={showFilterDropdown}\n            onClick={toggleFilterDropdown}\n          >\n            {currentFilter}\n            <span className=\"arrow\">â–¼</span>\n          </FilterDropdownButton>\n          <FilterDropdownMenu $isOpen={showFilterDropdown}>\n            {filterOptions.map(option => (\n              <FilterDropdownItem\n                key={option}\n                $isSelected={option === currentFilter}\n                onClick={() => handleFilterChange(option)}\n              >\n                {option}\n              </FilterDropdownItem>\n            ))}\n          </FilterDropdownMenu>\n        </FilterContainer>\n        \n        <NavigationButton\n          onClick={() => handleNavigateFilter('next')}\n          disabled={currentFilterIndex === filterOptions.length - 1}\n        >\n          â€º\n        </NavigationButton>\n      </Header>\n\n      <ContentArea>\n        {filteredSentences.length === 0 ? (\n          <EmptyState>\n            <div className=\"icon\">ðŸ“</div>\n            <div className=\"title\">ì €ìž¥ëœ ë¬¸ìž¥ì´ ì—†ìŠµë‹ˆë‹¤</div>\n            <div className=\"description\">\n              í›ˆìŠµ íŽ˜ì´ì§€ì—ì„œ ë¬¸ìž¥ì„ ì €ìž¥ê³ ì— ì €ìž¥í•´ë³´ì„¸ìš”\n            </div>\n          </EmptyState>\n        ) : (\n          <SentenceGrid>\n            {filteredSentences.map(sentence => (\n              <SentenceContainer key={sentence.id}>\n                <SentenceRow\n                  $isPinned={pinnedSentences.has(sentence.id)}\n                  $isHighlighted={sentence.is_highlighted}\n                  onClick={(e) => handleSentenceClick(e, sentence)}\n                  style={{\n                    '--has-memo': sentence.memo_content ? '50px' : '0px'\n                  } as any}\n                >\n                  <SentenceContent>\n                    <SentenceText>{sentence.sentence}</SentenceText>\n                    {sentence.memo_content && (\n                      <MemoPreview>\n                        ðŸ“ {sentence.memo_content}\n                      </MemoPreview>\n                    )}\n                  </SentenceContent>\n                  \n                  <StatusIndicators>\n                    {sentence.is_highlighted && (\n                      <StatusIndicator \n                        $type=\"highlight\" \n                        $color={sentence.highlight_color || 'yellow'}\n                        title={`í•˜ì´ë¼ì´íŠ¸ (${sentence.highlight_color || 'yellow'})`}\n                      />\n                    )}\n                    {sentence.memo_content && (\n                      <StatusIndicator \n                        $type=\"memo\" \n                        title=\"ë©”ëª¨ ìžˆìŒ\"\n                      />\n                    )}\n                  </StatusIndicators>\n                  \n                  <PinIcon\n                    $isPinned={pinnedSentences.has(sentence.id)}\n                    onClick={(e) => {\n                      e.stopPropagation();\n                      togglePin(sentence.id);\n                    }}\n                  />\n                </SentenceRow>\n                <SentenceMetaExternal>\n                  <PersonaLabel>{getPersonaName(sentence)}</PersonaLabel>\n                  <DateLabel>{new Date(sentence.created_at).toLocaleDateString('ko-KR')}</DateLabel>\n                </SentenceMetaExternal>\n              </SentenceContainer>\n            ))}\n          </SentenceGrid>\n        )}\n      </ContentArea>\n\n      {/* ì»¨í…ìŠ¤íŠ¸ ë©”ë‰´ */}\n      {contextMenu && (\n        <ContextMenuContainer $x={contextMenu.x} $y={contextMenu.y}>\n          <ContextMenuItem onClick={() => handleContextMenuAction('interact', contextMenu.sentence)}>\n            ìƒí˜¸ìž‘ìš© í•˜ê¸°\n          </ContextMenuItem>\n          <ContextMenuItem onClick={() => handleContextMenuAction('delete', contextMenu.sentence)}>\n            ì‚­ì œ\n          </ContextMenuItem>\n        </ContextMenuContainer>\n      )}\n\n      {/* í™•ì¸ ëª¨ë‹¬ */}\n      {confirmationModal && modalContent && (\n        <ModalOverlay onClick={() => setConfirmationModal(null)}>\n          <ModalContent onClick={(e) => e.stopPropagation()}>\n            <ModalTitle>{modalContent.title}</ModalTitle>\n            <ModalMessage>{modalContent.message}</ModalMessage>\n            <ModalButtons>\n              <ModalButton \n                $variant=\"secondary\" \n                onClick={() => setConfirmationModal(null)}\n              >\n                {modalContent.cancelText}\n              </ModalButton>\n              <ModalButton \n                $variant=\"primary\" \n                onClick={handleConfirmAction}\n              >\n                {modalContent.confirmText}\n              </ModalButton>\n            </ModalButtons>\n          </ModalContent>\n        </ModalOverlay>\n      )}\n    </Container>\n  );\n};\n\nexport default SentenceVaultView; "],"mappings":"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AAC1B,CACC;AAACuB,IAAA,GANID,eAAe;AAQrB,MAAME,YAAY,GAAGnC,MAAM,CAACK,GAAG;AAC/B;AACA;AACA;AACA;AACA;AACA,CAAC;AAAC+B,IAAA,GANID,YAAY;AAQlB,MAAME,oBAAoB,GAAGrC,MAAM,CAACK,GAAG;AACvC;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAACiC,IAAA,GAPID,oBAAoB;AAS1B,MAAME,YAAY,GAAGvC,MAAM,CAACwC,IAAI;AAChC;AACA;AACA;AACA;AACA;AACA,CAAC;AAACC,IAAA,GANIF,YAAY;AAQlB,MAAMG,SAAS,GAAG1C,MAAM,CAACwC,IAAI;AAC7B;AACA;AACA,CAAC;AAACG,IAAA,GAHID,SAAS;AAKf,MAAME,OAAO,GAAG5C,MAAM,CAACK,GAA2B;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAWM,KAAK,IAAIA,KAAK,CAACoB,SAAS,GAAG,MAAM,GAAG,aAAa;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAIF,WAAW;AACf,aAAalB,KAAK,IAAIA,KAAK,CAACoB,SAAS,GAAG,MAAM,GAAG,MAAM;AACvD;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAACc,IAAA,GA7BID,OAAO;AA+Bb,MAAME,UAAU,GAAG9C,MAAM,CAACK,GAAG;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAAC0C,IAAA,GAnBID,UAAU;AAqBhB,MAAME,oBAAoB,GAAGhD,MAAM,CAACK,GAA+B;AACnE;AACA,SAASM,KAAK,IAAIA,KAAK,CAACsC,EAAE;AAC1B,UAAUtC,KAAK,IAAIA,KAAK,CAACuC,EAAE;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAACC,IAAA,GAXIH,oBAAoB;AAa1B,MAAMI,eAAe,GAAGpD,MAAM,CAACK,GAAG;AAClC;AACA;AACA;AACA;AACA;AACA;AACA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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}