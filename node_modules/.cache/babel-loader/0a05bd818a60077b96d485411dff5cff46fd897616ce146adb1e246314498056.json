{"ast":null,"code":"import _taggedTemplateLiteral from\"C:/Users/sungh/Desktop/chat_work_ver2/frontend/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js\";var _templateObject,_templateObject2,_templateObject3,_templateObject4,_templateObject5,_templateObject6,_templateObject7,_templateObject8,_templateObject9,_templateObject0,_templateObject1,_templateObject10,_templateObject11,_templateObject12,_templateObject13,_templateObject14,_templateObject15,_templateObject16,_templateObject17,_templateObject18,_templateObject19,_templateObject20,_templateObject21,_templateObject22,_templateObject23,_templateObject24,_templateObject25,_templateObject26,_templateObject27;import React,{useState,useEffect,useCallback}from'react';import styled from'styled-components';import{sentenceApi}from'../../training/api/sentenceApi';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Container=styled.div(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n  display: flex;\\n  flex-direction: column;\\n  height: 100vh;\\n\"])));const Header=styled.div(_templateObject2||(_templateObject2=_taggedTemplateLiteral([\"\\n  padding: 20px;\\n  border-bottom: 1px solid #e9ecef;\\n  background: #fff;\\n  display: flex;\\n  justify-content: center;\\n  align-items: center;\\n  gap: 10px;\\n\"])));const FilterDropdownButton=styled.button(_templateObject3||(_templateObject3=_taggedTemplateLiteral([\"\\n  background: linear-gradient(135deg, #fff 0%, #f8f9fa 100%);\\n  border: 1px solid #dee2e6;\\n  border-radius: 8px;\\n  padding: 8px 16px;\\n  cursor: pointer;\\n  font-size: 14px;\\n  color: #333;\\n  display: flex;\\n  align-items: center;\\n  gap: 8px;\\n  min-width: 120px;\\n  justify-content: space-between;\\n  \\n  &:hover {\\n    background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);\\n  }\\n  \\n  .arrow {\\n    font-size: 12px;\\n    transition: transform 0.2s;\\n    transform: \",\";\\n  }\\n\"])),props=>props.$isOpen?'rotate(180deg)':'rotate(0deg)');const FilterDropdownMenu=styled.div(_templateObject4||(_templateObject4=_taggedTemplateLiteral([\"\\n  position: absolute;\\n  top: 100%;\\n  left: 50%;\\n  transform: translateX(-50%);\\n  background: #f8f9fa;\\n  border: 1px solid #dee2e6;\\n  border-radius: 8px;\\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);\\n  z-index: 1000;\\n  max-height: 200px;\\n  overflow-y: auto;\\n  display: \",\";\\n  margin-top: 4px;\\n  min-width: 150px;\\n\"])),props=>props.$isOpen?'block':'none');const FilterDropdownItem=styled.div(_templateObject5||(_templateObject5=_taggedTemplateLiteral([\"\\n  padding: 8px 16px;\\n  cursor: pointer;\\n  color: #333;\\n  background: \",\";\\n  font-weight: \",\";\\n  \\n  &:hover {\\n    background: #e9ecef;\\n  }\\n  \\n  &:first-child {\\n    border-radius: 8px 8px 0 0;\\n  }\\n  \\n  &:last-child {\\n    border-radius: 0 0 8px 8px;\\n  }\\n\"])),props=>props.$isSelected?'#e9ecef':'transparent',props=>props.$isSelected?'500':'normal');const FilterContainer=styled.div(_templateObject6||(_templateObject6=_taggedTemplateLiteral([\"\\n  position: relative;\\n  display: flex;\\n  align-items: center;\\n  gap: 10px;\\n\"])));const NavigationButton=styled.button(_templateObject7||(_templateObject7=_taggedTemplateLiteral([\"\\n  background: linear-gradient(135deg, #fff 0%, #f8f9fa 100%);\\n  border: 1px solid #dee2e6;\\n  border-radius: 50%;\\n  width: 32px;\\n  height: 32px;\\n  cursor: pointer;\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n  font-size: 14px;\\n  color: #333;\\n  \\n  &:hover {\\n    background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);\\n  }\\n  \\n  &:disabled {\\n    opacity: 0.5;\\n    cursor: not-allowed;\\n  }\\n\"])));const ContentArea=styled.div(_templateObject8||(_templateObject8=_taggedTemplateLiteral([\"\\n  flex: 1;\\n  padding: 20px;\\n  overflow-y: auto;\\n  background: #ffffff;\\n\"])));const MemoGrid=styled.div(_templateObject9||(_templateObject9=_taggedTemplateLiteral([\"\\n  display: flex;\\n  flex-direction: column;\\n  gap: 12px;\\n\"])));const MemoContainer=styled.div(_templateObject0||(_templateObject0=_taggedTemplateLiteral([\"\\n  display: flex;\\n  flex-direction: column;\\n  gap: 8px;\\n\"])));const MemoRow=styled.div(_templateObject1||(_templateObject1=_taggedTemplateLiteral([\"\\n  width: 100%;\\n  background: \",\";\\n  border: 1px solid \",\";\\n  border-radius: 16px;\\n  padding: 16px 20px;\\n  cursor: pointer;\\n  position: relative;\\n  transition: all 0.2s ease;\\n  min-height: 60px;\\n  display: flex;\\n  align-items: center;\\n  \\n  &:hover {\\n    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);\\n    transform: translateY(-1px);\\n    border-color: \",\";\\n    background: \",\";\\n  }\\n  \\n  \",\"\\n\"])),props=>props.$isHighlighted?'linear-gradient(135deg, #fff9c4 0%, #ffeaa7 100%)':'linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%)',props=>props.$isHighlighted?'#ffc107':'#dee2e6',props=>props.$isHighlighted?'#ffb300':'#adb5bd',props=>props.$isHighlighted?'linear-gradient(135deg, #fff3cd 0%, #ffd60a 100%)':'linear-gradient(135deg, #e9ecef 0%, #dee2e6 100%)',props=>props.$isPinned&&\"\\n    background: \".concat(props.$isHighlighted?'linear-gradient(135deg, #fff9c4 0%, #ffeaa7 100%)':'linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%)',\";\\n    border-color: \").concat(props.$isHighlighted?'#ffc107':'#dee2e6',\";\\n    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\\n    \\n    &:hover {\\n      background: \").concat(props.$isHighlighted?'linear-gradient(135deg, #fff3cd 0%, #ffd60a 100%)':'linear-gradient(135deg, #e9ecef 0%, #dee2e6 100%)',\";\\n      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);\\n      border-color: \").concat(props.$isHighlighted?'#ffb300':'#adb5bd',\";\\n    }\\n  \"));const MemoContent=styled.div(_templateObject10||(_templateObject10=_taggedTemplateLiteral([\"\\n  flex: 1;\\n  display: flex;\\n  flex-direction: column;\\n  gap: 8px;\\n\"])));const UserMemoContent=styled.div(_templateObject11||(_templateObject11=_taggedTemplateLiteral([\"\\n  font-size: 15px;\\n  line-height: 1.6;\\n  color: #333;\\n  word-break: break-word;\\n  font-weight: 600;\\n  background: rgba(108, 117, 125, 0.1);\\n  border-radius: 8px;\\n  padding: 8px 12px;\\n  border-left: 3px solid #6c757d;\\n\"])));const SentenceContent=styled.div(_templateObject12||(_templateObject12=_taggedTemplateLiteral([\"\\n  font-size: 14px;\\n  line-height: 1.5;\\n  color: #666;\\n  word-break: break-word;\\n  font-style: italic;\\n\"])));const MemoMeta=styled.div(_templateObject13||(_templateObject13=_taggedTemplateLiteral([\"\\n  display: flex;\\n  justify-content: flex-end;\\n  align-items: center;\\n  font-size: 12px;\\n  color: #6c757d;\\n  gap: 8px;\\n\"])));const ThreadTypeLabel=styled.span(_templateObject14||(_templateObject14=_taggedTemplateLiteral([\"\\n  background: #e9ecef;\\n  padding: 3px 8px;\\n  border-radius: 6px;\\n  font-weight: 500;\\n  color: #495057;\\n\"])));const DateLabel=styled.span(_templateObject15||(_templateObject15=_taggedTemplateLiteral([\"\\n  font-style: italic;\\n  opacity: 0.8;\\n\"])));const PinIcon=styled.div(_templateObject16||(_templateObject16=_taggedTemplateLiteral([\"\\n  position: absolute;\\n  top: 12px;\\n  right: 16px;\\n  width: 24px;\\n  height: 24px;\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n  font-size: 14px;\\n  color: \",\";\\n  cursor: pointer;\\n  z-index: 2;\\n  border-radius: 50%;\\n  transition: all 0.2s ease;\\n  \\n  &:hover {\\n    color: #333;\\n    background: rgba(0, 0, 0, 0.1);\\n  }\\n  \\n  \",\":hover & {\\n    color: \",\";\\n  }\\n  \\n  &::before {\\n    content: \\\"\\uD83D\\uDCCC\\\";\\n    filter: grayscale(100%);\\n  }\\n\"])),props=>props.$isPinned?'#333':'transparent',MemoRow,props=>props.$isPinned?'#333':'#666');const StatusIndicators=styled.div(_templateObject17||(_templateObject17=_taggedTemplateLiteral([\"\\n  position: absolute;\\n  top: 8px;\\n  right: 40px;\\n  display: flex;\\n  gap: 4px;\\n  z-index: 1;\\n\"])));const StatusIndicator=styled.div(_templateObject18||(_templateObject18=_taggedTemplateLiteral([\"\\n  width: 20px;\\n  height: 20px;\\n  border-radius: 50%;\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n  font-size: 10px;\\n  color: white;\\n  font-weight: bold;\\n  background: #6c757d;\\n  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.2);\\n  \\n  &::before {\\n    content: \\\"M\\\";\\n  }\\n\"])));const EmptyState=styled.div(_templateObject19||(_templateObject19=_taggedTemplateLiteral([\"\\n  text-align: center;\\n  padding: 60px 20px;\\n  color: #6c757d;\\n  \\n  .icon {\\n    font-size: 48px;\\n    margin-bottom: 16px;\\n  }\\n  \\n  .title {\\n    font-size: 18px;\\n    font-weight: 500;\\n    margin-bottom: 8px;\\n  }\\n  \\n  .description {\\n    font-size: 14px;\\n  }\\n\"])));const ContextMenuContainer=styled.div(_templateObject20||(_templateObject20=_taggedTemplateLiteral([\"\\n  position: fixed;\\n  top: \",\"px;\\n  left: \",\"px;\\n  background: white;\\n  border: 1px solid #dee2e6;\\n  border-radius: 8px;\\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);\\n  z-index: 1000;\\n  min-width: 160px;\\n  overflow: hidden;\\n\"])),props=>props.$y,props=>props.$x);const ContextMenuItem=styled.div(_templateObject21||(_templateObject21=_taggedTemplateLiteral([\"\\n  padding: 12px 16px;\\n  cursor: pointer;\\n  font-size: 14px;\\n  color: #333;\\n  \\n  &:hover {\\n    background-color: #f8f9fa;\\n  }\\n  \\n  &:not(:last-child) {\\n    border-bottom: 1px solid #f1f3f4;\\n  }\\n\"])));const ModalOverlay=styled.div(_templateObject22||(_templateObject22=_taggedTemplateLiteral([\"\\n  position: fixed;\\n  top: 0;\\n  left: 0;\\n  right: 0;\\n  bottom: 0;\\n  background: rgba(0, 0, 0, 0.5);\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n  z-index: 2000;\\n\"])));const ModalContent=styled.div(_templateObject23||(_templateObject23=_taggedTemplateLiteral([\"\\n  background: white;\\n  border-radius: 12px;\\n  padding: 24px;\\n  max-width: 400px;\\n  width: 90%;\\n  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);\\n\"])));const ModalTitle=styled.h3(_templateObject24||(_templateObject24=_taggedTemplateLiteral([\"\\n  margin: 0 0 16px 0;\\n  font-size: 18px;\\n  font-weight: 600;\\n  color: #333;\\n\"])));const ModalMessage=styled.p(_templateObject25||(_templateObject25=_taggedTemplateLiteral([\"\\n  margin: 0 0 24px 0;\\n  font-size: 14px;\\n  color: #666;\\n  line-height: 1.5;\\n\"])));const ModalButtons=styled.div(_templateObject26||(_templateObject26=_taggedTemplateLiteral([\"\\n  display: flex;\\n  gap: 12px;\\n  justify-content: flex-end;\\n\"])));const ModalButton=styled.button(_templateObject27||(_templateObject27=_taggedTemplateLiteral([\"\\n  padding: 10px 20px;\\n  border-radius: 6px;\\n  font-size: 14px;\\n  font-weight: 500;\\n  cursor: pointer;\\n  border: 1px solid;\\n  \\n  \",\"\\n\"])),props=>props.$variant==='primary'?\"\\n    background: #007bff;\\n    color: white;\\n    border-color: #007bff;\\n    \\n    &:hover {\\n      background: #0056b3;\\n      border-color: #0056b3;\\n    }\\n  \":\"\\n    background: white;\\n    color: #6c757d;\\n    border-color: #dee2e6;\\n    \\n    &:hover {\\n      background: #f8f9fa;\\n    }\\n  \");const MemoVaultView=_ref=>{let{personas,onNavigateToThread}=_ref;const[memos,setMemos]=useState([]);const[filteredMemos,setFilteredMemos]=useState([]);const[currentFilter,setCurrentFilter]=useState('전체');const[loading,setLoading]=useState(true);const[pinnedMemos,setPinnedMemos]=useState(new Set());const[contextMenu,setContextMenu]=useState(null);const[confirmationModal,setConfirmationModal]=useState(null);const[showFilterDropdown,setShowFilterDropdown]=useState(false);// 필터 옵션들\nconst[filterOptions,setFilterOptions]=useState(['전체','해석','나아가기','문장','언어화']);const[currentFilterIndex,setCurrentFilterIndex]=useState(0);const loadMemos=useCallback(async()=>{try{setLoading(true);const data=await sentenceApi.getVaultMemos();setMemos(data);// 필터 옵션에 페르소나들 추가\nconst personaNames=Object.values(personas).map(p=>p.name);setFilterOptions(['전체','해석','나아가기','문장','언어화',...personaNames]);}catch(error){console.error('메모 저장고 로딩 실패:',error);}finally{setLoading(false);}},[personas]);const applyFilter=useCallback(()=>{let filtered=[...memos];if(currentFilter!=='전체'){if(currentFilter==='해석'){filtered=filtered.filter(m=>m.source_thread_type==='interpretation');}else if(currentFilter==='나아가기'){filtered=filtered.filter(m=>m.source_thread_type==='proceed');}else if(currentFilter==='문장'){filtered=filtered.filter(m=>m.source_thread_type==='sentence');}else if(currentFilter==='언어화'){filtered=filtered.filter(m=>m.source_thread_type==='verbalization');}else{// 페르소나 이름으로 필터링\nconst personaId=Object.keys(personas).find(id=>personas[id].name===currentFilter);if(personaId){filtered=filtered.filter(m=>{var _m$source_message_id;return m.tags.includes(personaId)||((_m$source_message_id=m.source_message_id)===null||_m$source_message_id===void 0?void 0:_m$source_message_id.includes(personaId));});}}}// 고정된 메모들을 맨 위로\nconst pinned=filtered.filter(m=>pinnedMemos.has(m.id));const unpinned=filtered.filter(m=>!pinnedMemos.has(m.id));// 날짜순 정렬 (최신순)\npinned.sort((a,b)=>new Date(b.created_at).getTime()-new Date(a.created_at).getTime());unpinned.sort((a,b)=>new Date(b.created_at).getTime()-new Date(a.created_at).getTime());setFilteredMemos([...pinned,...unpinned]);},[memos,currentFilter,personas,pinnedMemos]);useEffect(()=>{loadMemos();},[loadMemos]);useEffect(()=>{applyFilter();},[memos,currentFilter,applyFilter]);// 드롭다운 외부 클릭 감지\nuseEffect(()=>{const handleClickOutside=event=>{const target=event.target;if(!target.closest('.filter-dropdown')){setShowFilterDropdown(false);}};if(showFilterDropdown){document.addEventListener('click',handleClickOutside);return()=>document.removeEventListener('click',handleClickOutside);}},[showFilterDropdown]);// 컨텍스트 메뉴 외부 클릭 감지\nuseEffect(()=>{const handleClickOutside=()=>{setContextMenu(null);};if(contextMenu){document.addEventListener('click',handleClickOutside);return()=>document.removeEventListener('click',handleClickOutside);}},[contextMenu]);const handleFilterChange=filter=>{setCurrentFilter(filter);setCurrentFilterIndex(filterOptions.indexOf(filter));setShowFilterDropdown(false);};const handleNavigateFilter=direction=>{const newIndex=direction==='prev'?Math.max(0,currentFilterIndex-1):Math.min(filterOptions.length-1,currentFilterIndex+1);setCurrentFilterIndex(newIndex);setCurrentFilter(filterOptions[newIndex]);};const toggleFilterDropdown=()=>{setShowFilterDropdown(!showFilterDropdown);};const handleMemoClick=(e,memo)=>{e.preventDefault();if(e.type==='contextmenu'){setContextMenu({x:e.pageX,y:e.pageY,memo});return;}// 일반 클릭 시 상호작용 확인 모달\nsetConfirmationModal({type:'interact',memo});};const handleContextMenuAction=async(action,memo)=>{setContextMenu(null);if(action==='interact'){setConfirmationModal({type:'interact',memo});}else if(action==='delete'){setConfirmationModal({type:'delete',memo});}else if(action==='pin'){togglePin(memo.id);}};const togglePin=memoId=>{setPinnedMemos(prev=>{const newSet=new Set(prev);if(newSet.has(memoId)){newSet.delete(memoId);}else{newSet.add(memoId);}return newSet;});};const handleConfirmAction=async()=>{if(!confirmationModal)return;try{if(confirmationModal.type==='interact'){const response=await sentenceApi.interactWithVaultMemo(confirmationModal.memo.id);if(response.success&&response.source_thread_id&&response.source_thread_type){// 원본 스레드로 이동하면서 상호작용 메시지 전달\nonNavigateToThread(response.source_thread_id,response.source_thread_type,response.interaction_message);}}else if(confirmationModal.type==='delete'){await sentenceApi.deleteVaultMemo(confirmationModal.memo.id);await loadMemos();// 목록 새로고침\n}}catch(error){console.error('메모 액션 실패:',error);}finally{setConfirmationModal(null);}};const formatDate=dateString=>{const date=new Date(dateString);return date.toLocaleDateString('ko-KR',{month:'short',day:'numeric',hour:'2-digit',minute:'2-digit'});};const getThreadTypeLabel=threadType=>{switch(threadType){case'interpretation':return'해석';case'proceed':return'나아가기';case'sentence':return'문장';case'verbalization':return'언어화';default:return threadType||'알수없음';}};const getPersonaName=memo=>{// source_message_id에서 페르소나 ID 추출 시도\nif(memo.source_message_id){const parts=memo.source_message_id.split('_');if(parts.length>1){const personaId=parts[1];const persona=personas[personaId];if(persona){return persona.name;}}}// tags에서 페르소나 찾기 (thread_type이 아닌 것들만)\nconst excludeTypes=['interpretation','proceed','sentence','verbalization'];for(const tag of memo.tags){if(!excludeTypes.includes(tag)){const persona=personas[tag];if(persona){return persona.name;}}}// 언어화 특별 처리\nif(memo.source_message_id==='verbalization_chat'||memo.source_thread_type==='verbalization'||memo.tags.includes('verbalization')){return'언어화';}return'알수없음';};if(loading){return/*#__PURE__*/_jsx(Container,{children:/*#__PURE__*/_jsx(\"div\",{style:{textAlign:'center',padding:'60px 20px',color:'#6c757d'},children:\"\\uB85C\\uB529 \\uC911...\"})});}return/*#__PURE__*/_jsxs(Container,{children:[/*#__PURE__*/_jsxs(Header,{children:[/*#__PURE__*/_jsx(NavigationButton,{onClick:()=>handleNavigateFilter('prev'),disabled:currentFilterIndex===0,children:\"\\u2039\"}),/*#__PURE__*/_jsxs(FilterContainer,{className:\"filter-dropdown\",children:[/*#__PURE__*/_jsxs(FilterDropdownButton,{$isOpen:showFilterDropdown,onClick:toggleFilterDropdown,children:[currentFilter,/*#__PURE__*/_jsx(\"span\",{className:\"arrow\",children:\"\\u25BC\"})]}),/*#__PURE__*/_jsx(FilterDropdownMenu,{$isOpen:showFilterDropdown,children:filterOptions.map(option=>/*#__PURE__*/_jsx(FilterDropdownItem,{$isSelected:option===currentFilter,onClick:()=>handleFilterChange(option),children:option},option))})]}),/*#__PURE__*/_jsx(NavigationButton,{onClick:()=>handleNavigateFilter('next'),disabled:currentFilterIndex===filterOptions.length-1,children:\"\\u203A\"})]}),/*#__PURE__*/_jsx(ContentArea,{children:filteredMemos.length===0?/*#__PURE__*/_jsxs(EmptyState,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"icon\",children:\"\\uD83D\\uDCDD\"}),/*#__PURE__*/_jsx(\"div\",{className:\"title\",children:\"\\uC800\\uC7A5\\uB41C \\uBA54\\uBAA8\\uAC00 \\uC5C6\\uC2B5\\uB2C8\\uB2E4\"}),/*#__PURE__*/_jsx(\"div\",{className:\"description\",children:\"\\uD6C8\\uC2B5\\uC774\\uB098 \\uC5B8\\uC5B4\\uD654 \\uD398\\uC774\\uC9C0\\uC5D0\\uC11C \\uBA54\\uBAA8\\uB97C \\uC0DD\\uC131\\uD558\\uBA74 \\uC790\\uB3D9\\uC73C\\uB85C \\uC800\\uC7A5\\uB429\\uB2C8\\uB2E4\"})]}):/*#__PURE__*/_jsx(MemoGrid,{children:filteredMemos.map(memo=>/*#__PURE__*/_jsxs(MemoContainer,{children:[/*#__PURE__*/_jsxs(MemoRow,{$isPinned:pinnedMemos.has(memo.id),$isHighlighted:true,onClick:e=>handleMemoClick(e,memo),onContextMenu:e=>handleMemoClick(e,memo),children:[/*#__PURE__*/_jsxs(MemoContent,{children:[/*#__PURE__*/_jsx(UserMemoContent,{children:memo.memo_content}),/*#__PURE__*/_jsx(SentenceContent,{children:memo.sentence_content})]}),/*#__PURE__*/_jsx(StatusIndicators,{children:/*#__PURE__*/_jsx(StatusIndicator,{$type:\"memo\",title:\"\\uBA54\\uBAA8\"})}),/*#__PURE__*/_jsx(PinIcon,{$isPinned:pinnedMemos.has(memo.id),onClick:e=>{e.stopPropagation();togglePin(memo.id);}})]}),/*#__PURE__*/_jsxs(MemoMeta,{children:[/*#__PURE__*/_jsxs(ThreadTypeLabel,{children:[getPersonaName(memo),\" - \",getThreadTypeLabel(memo.source_thread_type)]}),/*#__PURE__*/_jsx(DateLabel,{children:formatDate(memo.created_at)})]})]},memo.id))})}),contextMenu&&/*#__PURE__*/_jsxs(ContextMenuContainer,{$x:contextMenu.x,$y:contextMenu.y,children:[/*#__PURE__*/_jsx(ContextMenuItem,{onClick:()=>handleContextMenuAction('interact',contextMenu.memo),children:\"\\uD83D\\uDD04 \\uC0C1\\uD638\\uC791\\uC6A9 \\uD558\\uAE30\"}),/*#__PURE__*/_jsxs(ContextMenuItem,{onClick:()=>handleContextMenuAction('pin',contextMenu.memo),children:[\"\\uD83D\\uDCCC \",pinnedMemos.has(contextMenu.memo.id)?'고정 해제':'고정하기']}),/*#__PURE__*/_jsx(ContextMenuItem,{onClick:()=>handleContextMenuAction('delete',contextMenu.memo),children:\"\\uD83D\\uDDD1\\uFE0F \\uC0AD\\uC81C\\uD558\\uAE30\"})]}),confirmationModal&&/*#__PURE__*/_jsx(ModalOverlay,{onClick:()=>setConfirmationModal(null),children:/*#__PURE__*/_jsxs(ModalContent,{onClick:e=>e.stopPropagation(),children:[/*#__PURE__*/_jsx(ModalTitle,{children:confirmationModal.type==='interact'?'메모 상호작용':'메모 삭제'}),/*#__PURE__*/_jsx(ModalMessage,{children:confirmationModal.type==='interact'?\"\\uC774 \\uBA54\\uBAA8\\uC640 \\uC0C1\\uD638\\uC791\\uC6A9\\uD558\\uC2DC\\uACA0\\uC2B5\\uB2C8\\uAE4C? \\uC6D0\\uBCF8 \\uC704\\uCE58\\uB85C \\uC774\\uB3D9\\uD558\\uC5EC \\\"\".concat(confirmationModal.memo.sentence_content,\" - \").concat(confirmationModal.memo.memo_content,\"\\\" \\uD615\\uC2DD\\uC73C\\uB85C \\uC785\\uB825\\uCC3D\\uC5D0 \\uC0BD\\uC785\\uB429\\uB2C8\\uB2E4.\"):'이 메모를 삭제하시겠습니까? 삭제된 메모는 복구할 수 없습니다.'}),/*#__PURE__*/_jsxs(ModalButtons,{children:[/*#__PURE__*/_jsx(ModalButton,{$variant:\"secondary\",onClick:()=>setConfirmationModal(null),children:\"\\uCDE8\\uC18C\"}),/*#__PURE__*/_jsx(ModalButton,{$variant:\"primary\",onClick:handleConfirmAction,children:confirmationModal.type==='interact'?'상호작용':'삭제'})]})]})})]});};export default MemoVaultView;","map":{"version":3,"names":["React","useState","useEffect","useCallback","styled","sentenceApi","jsx","_jsx","jsxs","_jsxs","Container","div","_templateObject","_taggedTemplateLiteral","Header","_templateObject2","FilterDropdownButton","button","_templateObject3","props","$isOpen","FilterDropdownMenu","_templateObject4","FilterDropdownItem","_templateObject5","$isSelected","FilterContainer","_templateObject6","NavigationButton","_templateObject7","ContentArea","_templateObject8","MemoGrid","_templateObject9","MemoContainer","_templateObject0","MemoRow","_templateObject1","$isHighlighted","$isPinned","concat","MemoContent","_templateObject10","UserMemoContent","_templateObject11","SentenceContent","_templateObject12","MemoMeta","_templateObject13","ThreadTypeLabel","span","_templateObject14","DateLabel","_templateObject15","PinIcon","_templateObject16","StatusIndicators","_templateObject17","StatusIndicator","_templateObject18","EmptyState","_templateObject19","ContextMenuContainer","_templateObject20","$y","$x","ContextMenuItem","_templateObject21","ModalOverlay","_templateObject22","ModalContent","_templateObject23","ModalTitle","h3","_templateObject24","ModalMessage","p","_templateObject25","ModalButtons","_templateObject26","ModalButton","_templateObject27","$variant","MemoVaultView","_ref","personas","onNavigateToThread","memos","setMemos","filteredMemos","setFilteredMemos","currentFilter","setCurrentFilter","loading","setLoading","pinnedMemos","setPinnedMemos","Set","contextMenu","setContextMenu","confirmationModal","setConfirmationModal","showFilterDropdown","setShowFilterDropdown","filterOptions","setFilterOptions","currentFilterIndex","setCurrentFilterIndex","loadMemos","data","getVaultMemos","personaNames","Object","values","map","name","error","console","applyFilter","filtered","filter","m","source_thread_type","personaId","keys","find","id","_m$source_message_id","tags","includes","source_message_id","pinned","has","unpinned","sort","a","b","Date","created_at","getTime","handleClickOutside","event","target","closest","document","addEventListener","removeEventListener","handleFilterChange","indexOf","handleNavigateFilter","direction","newIndex","Math","max","min","length","toggleFilterDropdown","handleMemoClick","e","memo","preventDefault","type","x","pageX","y","pageY","handleContextMenuAction","action","togglePin","memoId","prev","newSet","delete","add","handleConfirmAction","response","interactWithVaultMemo","success","source_thread_id","interaction_message","deleteVaultMemo","formatDate","dateString","date","toLocaleDateString","month","day","hour","minute","getThreadTypeLabel","threadType","getPersonaName","parts","split","persona","excludeTypes","tag","children","style","textAlign","padding","color","onClick","disabled","className","option","onContextMenu","memo_content","sentence_content","$type","title","stopPropagation"],"sources":["C:/Users/sungh/Desktop/chat_work_ver2/frontend/src/features/vault/components/MemoVaultView.tsx"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\nimport styled from 'styled-components';\nimport { sentenceApi, MemoVaultItem } from '../../training/api/sentenceApi';\nimport { Persona } from '../../shared/types';\n\ninterface MemoVaultViewProps {\n  personas: Record<string, Persona>;\n  onNavigateToThread: (threadId: string, threadType: string, interactionMessage?: string) => void;\n}\n\ninterface ContextMenu {\n  x: number;\n  y: number;\n  memo: MemoVaultItem;\n}\n\ninterface ConfirmationModalData {\n  type: 'interact' | 'delete';\n  memo: MemoVaultItem;\n}\n\nconst Container = styled.div`\n  display: flex;\n  flex-direction: column;\n  height: 100vh;\n`;\n\nconst Header = styled.div`\n  padding: 20px;\n  border-bottom: 1px solid #e9ecef;\n  background: #fff;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  gap: 10px;\n`;\n\nconst FilterDropdownButton = styled.button<{ $isOpen: boolean }>`\n  background: linear-gradient(135deg, #fff 0%, #f8f9fa 100%);\n  border: 1px solid #dee2e6;\n  border-radius: 8px;\n  padding: 8px 16px;\n  cursor: pointer;\n  font-size: 14px;\n  color: #333;\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  min-width: 120px;\n  justify-content: space-between;\n  \n  &:hover {\n    background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);\n  }\n  \n  .arrow {\n    font-size: 12px;\n    transition: transform 0.2s;\n    transform: ${props => props.$isOpen ? 'rotate(180deg)' : 'rotate(0deg)'};\n  }\n`;\n\nconst FilterDropdownMenu = styled.div<{ $isOpen: boolean }>`\n  position: absolute;\n  top: 100%;\n  left: 50%;\n  transform: translateX(-50%);\n  background: #f8f9fa;\n  border: 1px solid #dee2e6;\n  border-radius: 8px;\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);\n  z-index: 1000;\n  max-height: 200px;\n  overflow-y: auto;\n  display: ${props => props.$isOpen ? 'block' : 'none'};\n  margin-top: 4px;\n  min-width: 150px;\n`;\n\nconst FilterDropdownItem = styled.div<{ $isSelected: boolean }>`\n  padding: 8px 16px;\n  cursor: pointer;\n  color: #333;\n  background: ${props => props.$isSelected ? '#e9ecef' : 'transparent'};\n  font-weight: ${props => props.$isSelected ? '500' : 'normal'};\n  \n  &:hover {\n    background: #e9ecef;\n  }\n  \n  &:first-child {\n    border-radius: 8px 8px 0 0;\n  }\n  \n  &:last-child {\n    border-radius: 0 0 8px 8px;\n  }\n`;\n\nconst FilterContainer = styled.div`\n  position: relative;\n  display: flex;\n  align-items: center;\n  gap: 10px;\n`;\n\nconst NavigationButton = styled.button`\n  background: linear-gradient(135deg, #fff 0%, #f8f9fa 100%);\n  border: 1px solid #dee2e6;\n  border-radius: 50%;\n  width: 32px;\n  height: 32px;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 14px;\n  color: #333;\n  \n  &:hover {\n    background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);\n  }\n  \n  &:disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n  }\n`;\n\nconst ContentArea = styled.div`\n  flex: 1;\n  padding: 20px;\n  overflow-y: auto;\n  background: #ffffff;\n`;\n\nconst MemoGrid = styled.div`\n  display: flex;\n  flex-direction: column;\n  gap: 12px;\n`;\n\nconst MemoContainer = styled.div`\n  display: flex;\n  flex-direction: column;\n  gap: 8px;\n`;\n\nconst MemoRow = styled.div<{ $isPinned?: boolean; $isHighlighted?: boolean }>`\n  width: 100%;\n  background: ${props => props.$isHighlighted \n    ? 'linear-gradient(135deg, #fff9c4 0%, #ffeaa7 100%)' \n    : 'linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%)'\n  };\n  border: 1px solid ${props => props.$isHighlighted ? '#ffc107' : '#dee2e6'};\n  border-radius: 16px;\n  padding: 16px 20px;\n  cursor: pointer;\n  position: relative;\n  transition: all 0.2s ease;\n  min-height: 60px;\n  display: flex;\n  align-items: center;\n  \n  &:hover {\n    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);\n    transform: translateY(-1px);\n    border-color: ${props => props.$isHighlighted ? '#ffb300' : '#adb5bd'};\n    background: ${props => props.$isHighlighted\n      ? 'linear-gradient(135deg, #fff3cd 0%, #ffd60a 100%)'\n      : 'linear-gradient(135deg, #e9ecef 0%, #dee2e6 100%)'\n    };\n  }\n  \n  ${props => props.$isPinned && `\n    background: ${props.$isHighlighted \n      ? 'linear-gradient(135deg, #fff9c4 0%, #ffeaa7 100%)' \n      : 'linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%)'\n    };\n    border-color: ${props.$isHighlighted ? '#ffc107' : '#dee2e6'};\n    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\n    \n    &:hover {\n      background: ${props.$isHighlighted\n        ? 'linear-gradient(135deg, #fff3cd 0%, #ffd60a 100%)'\n        : 'linear-gradient(135deg, #e9ecef 0%, #dee2e6 100%)'\n      };\n      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);\n      border-color: ${props.$isHighlighted ? '#ffb300' : '#adb5bd'};\n    }\n  `}\n`;\n\nconst MemoContent = styled.div`\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  gap: 8px;\n`;\n\nconst UserMemoContent = styled.div`\n  font-size: 15px;\n  line-height: 1.6;\n  color: #333;\n  word-break: break-word;\n  font-weight: 600;\n  background: rgba(108, 117, 125, 0.1);\n  border-radius: 8px;\n  padding: 8px 12px;\n  border-left: 3px solid #6c757d;\n`;\n\nconst SentenceContent = styled.div`\n  font-size: 14px;\n  line-height: 1.5;\n  color: #666;\n  word-break: break-word;\n  font-style: italic;\n`;\n\nconst MemoMeta = styled.div`\n  display: flex;\n  justify-content: flex-end;\n  align-items: center;\n  font-size: 12px;\n  color: #6c757d;\n  gap: 8px;\n`;\n\nconst ThreadTypeLabel = styled.span`\n  background: #e9ecef;\n  padding: 3px 8px;\n  border-radius: 6px;\n  font-weight: 500;\n  color: #495057;\n`;\n\nconst DateLabel = styled.span`\n  font-style: italic;\n  opacity: 0.8;\n`;\n\nconst PinIcon = styled.div<{ $isPinned: boolean }>`\n  position: absolute;\n  top: 12px;\n  right: 16px;\n  width: 24px;\n  height: 24px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 14px;\n  color: ${props => props.$isPinned ? '#333' : 'transparent'};\n  cursor: pointer;\n  z-index: 2;\n  border-radius: 50%;\n  transition: all 0.2s ease;\n  \n  &:hover {\n    color: #333;\n    background: rgba(0, 0, 0, 0.1);\n  }\n  \n  ${MemoRow}:hover & {\n    color: ${props => props.$isPinned ? '#333' : '#666'};\n  }\n  \n  &::before {\n    content: \"📌\";\n    filter: grayscale(100%);\n  }\n`;\n\nconst StatusIndicators = styled.div`\n  position: absolute;\n  top: 8px;\n  right: 40px;\n  display: flex;\n  gap: 4px;\n  z-index: 1;\n`;\n\nconst StatusIndicator = styled.div<{ $type: 'memo'; $color?: string }>`\n  width: 20px;\n  height: 20px;\n  border-radius: 50%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 10px;\n  color: white;\n  font-weight: bold;\n  background: #6c757d;\n  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.2);\n  \n  &::before {\n    content: \"M\";\n  }\n`;\n\nconst EmptyState = styled.div`\n  text-align: center;\n  padding: 60px 20px;\n  color: #6c757d;\n  \n  .icon {\n    font-size: 48px;\n    margin-bottom: 16px;\n  }\n  \n  .title {\n    font-size: 18px;\n    font-weight: 500;\n    margin-bottom: 8px;\n  }\n  \n  .description {\n    font-size: 14px;\n  }\n`;\n\nconst ContextMenuContainer = styled.div<{ $x: number; $y: number }>`\n  position: fixed;\n  top: ${props => props.$y}px;\n  left: ${props => props.$x}px;\n  background: white;\n  border: 1px solid #dee2e6;\n  border-radius: 8px;\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);\n  z-index: 1000;\n  min-width: 160px;\n  overflow: hidden;\n`;\n\nconst ContextMenuItem = styled.div`\n  padding: 12px 16px;\n  cursor: pointer;\n  font-size: 14px;\n  color: #333;\n  \n  &:hover {\n    background-color: #f8f9fa;\n  }\n  \n  &:not(:last-child) {\n    border-bottom: 1px solid #f1f3f4;\n  }\n`;\n\nconst ModalOverlay = styled.div`\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: rgba(0, 0, 0, 0.5);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: 2000;\n`;\n\nconst ModalContent = styled.div`\n  background: white;\n  border-radius: 12px;\n  padding: 24px;\n  max-width: 400px;\n  width: 90%;\n  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);\n`;\n\nconst ModalTitle = styled.h3`\n  margin: 0 0 16px 0;\n  font-size: 18px;\n  font-weight: 600;\n  color: #333;\n`;\n\nconst ModalMessage = styled.p`\n  margin: 0 0 24px 0;\n  font-size: 14px;\n  color: #666;\n  line-height: 1.5;\n`;\n\nconst ModalButtons = styled.div`\n  display: flex;\n  gap: 12px;\n  justify-content: flex-end;\n`;\n\nconst ModalButton = styled.button<{ $variant: 'primary' | 'secondary' }>`\n  padding: 10px 20px;\n  border-radius: 6px;\n  font-size: 14px;\n  font-weight: 500;\n  cursor: pointer;\n  border: 1px solid;\n  \n  ${props => props.$variant === 'primary' ? `\n    background: #007bff;\n    color: white;\n    border-color: #007bff;\n    \n    &:hover {\n      background: #0056b3;\n      border-color: #0056b3;\n    }\n  ` : `\n    background: white;\n    color: #6c757d;\n    border-color: #dee2e6;\n    \n    &:hover {\n      background: #f8f9fa;\n    }\n  `}\n`;\n\nconst MemoVaultView: React.FC<MemoVaultViewProps> = ({\n  personas,\n  onNavigateToThread\n}) => {\n  const [memos, setMemos] = useState<MemoVaultItem[]>([]);\n  const [filteredMemos, setFilteredMemos] = useState<MemoVaultItem[]>([]);\n  const [currentFilter, setCurrentFilter] = useState<string>('전체');\n  const [loading, setLoading] = useState(true);\n  const [pinnedMemos, setPinnedMemos] = useState<Set<string>>(new Set());\n  const [contextMenu, setContextMenu] = useState<ContextMenu | null>(null);\n  const [confirmationModal, setConfirmationModal] = useState<ConfirmationModalData | null>(null);\n  const [showFilterDropdown, setShowFilterDropdown] = useState(false);\n  \n  // 필터 옵션들\n  const [filterOptions, setFilterOptions] = useState<string[]>(['전체', '해석', '나아가기', '문장', '언어화']);\n  const [currentFilterIndex, setCurrentFilterIndex] = useState(0);\n\n  const loadMemos = useCallback(async () => {\n    try {\n      setLoading(true);\n      const data = await sentenceApi.getVaultMemos();\n      setMemos(data);\n      \n      // 필터 옵션에 페르소나들 추가\n      const personaNames = Object.values(personas).map(p => p.name);\n      setFilterOptions(['전체', '해석', '나아가기', '문장', '언어화', ...personaNames]);\n    } catch (error) {\n      console.error('메모 저장고 로딩 실패:', error);\n    } finally {\n      setLoading(false);\n    }\n  }, [personas]);\n\n  const applyFilter = useCallback(() => {\n    let filtered = [...memos];\n\n    if (currentFilter !== '전체') {\n      if (currentFilter === '해석') {\n        filtered = filtered.filter(m => m.source_thread_type === 'interpretation');\n      } else if (currentFilter === '나아가기') {\n        filtered = filtered.filter(m => m.source_thread_type === 'proceed');\n      } else if (currentFilter === '문장') {\n        filtered = filtered.filter(m => m.source_thread_type === 'sentence');\n      } else if (currentFilter === '언어화') {\n        filtered = filtered.filter(m => m.source_thread_type === 'verbalization');\n      } else {\n        // 페르소나 이름으로 필터링\n        const personaId = Object.keys(personas).find(id => personas[id].name === currentFilter);\n        if (personaId) {\n          filtered = filtered.filter(m => m.tags.includes(personaId) || m.source_message_id?.includes(personaId));\n        }\n      }\n    }\n\n    // 고정된 메모들을 맨 위로\n    const pinned = filtered.filter(m => pinnedMemos.has(m.id));\n    const unpinned = filtered.filter(m => !pinnedMemos.has(m.id));\n\n    // 날짜순 정렬 (최신순)\n    pinned.sort((a, b) => new Date(b.created_at).getTime() - new Date(a.created_at).getTime());\n    unpinned.sort((a, b) => new Date(b.created_at).getTime() - new Date(a.created_at).getTime());\n\n    setFilteredMemos([...pinned, ...unpinned]);\n  }, [memos, currentFilter, personas, pinnedMemos]);\n\n  useEffect(() => {\n    loadMemos();\n  }, [loadMemos]);\n\n  useEffect(() => {\n    applyFilter();\n  }, [memos, currentFilter, applyFilter]);\n\n  // 드롭다운 외부 클릭 감지\n  useEffect(() => {\n    const handleClickOutside = (event: MouseEvent) => {\n      const target = event.target as Element;\n      if (!target.closest('.filter-dropdown')) {\n        setShowFilterDropdown(false);\n      }\n    };\n\n    if (showFilterDropdown) {\n      document.addEventListener('click', handleClickOutside);\n      return () => document.removeEventListener('click', handleClickOutside);\n    }\n  }, [showFilterDropdown]);\n\n  // 컨텍스트 메뉴 외부 클릭 감지\n  useEffect(() => {\n    const handleClickOutside = () => {\n      setContextMenu(null);\n    };\n\n    if (contextMenu) {\n      document.addEventListener('click', handleClickOutside);\n      return () => document.removeEventListener('click', handleClickOutside);\n    }\n  }, [contextMenu]);\n\n  const handleFilterChange = (filter: string) => {\n    setCurrentFilter(filter);\n    setCurrentFilterIndex(filterOptions.indexOf(filter));\n    setShowFilterDropdown(false);\n  };\n\n  const handleNavigateFilter = (direction: 'prev' | 'next') => {\n    const newIndex = direction === 'prev' \n      ? Math.max(0, currentFilterIndex - 1)\n      : Math.min(filterOptions.length - 1, currentFilterIndex + 1);\n    \n    setCurrentFilterIndex(newIndex);\n    setCurrentFilter(filterOptions[newIndex]);\n  };\n\n  const toggleFilterDropdown = () => {\n    setShowFilterDropdown(!showFilterDropdown);\n  };\n\n  const handleMemoClick = (e: React.MouseEvent, memo: MemoVaultItem) => {\n    e.preventDefault();\n    \n    if (e.type === 'contextmenu') {\n      setContextMenu({\n        x: e.pageX,\n        y: e.pageY,\n        memo\n      });\n      return;\n    }\n\n    // 일반 클릭 시 상호작용 확인 모달\n    setConfirmationModal({\n      type: 'interact',\n      memo\n    });\n  };\n\n  const handleContextMenuAction = async (action: 'interact' | 'delete' | 'pin', memo: MemoVaultItem) => {\n    setContextMenu(null);\n    \n    if (action === 'interact') {\n      setConfirmationModal({\n        type: 'interact',\n        memo\n      });\n    } else if (action === 'delete') {\n      setConfirmationModal({\n        type: 'delete',\n        memo\n      });\n    } else if (action === 'pin') {\n      togglePin(memo.id);\n    }\n  };\n\n  const togglePin = (memoId: string) => {\n    setPinnedMemos(prev => {\n      const newSet = new Set(prev);\n      if (newSet.has(memoId)) {\n        newSet.delete(memoId);\n      } else {\n        newSet.add(memoId);\n      }\n      return newSet;\n    });\n  };\n\n  const handleConfirmAction = async () => {\n    if (!confirmationModal) return;\n\n    try {\n      if (confirmationModal.type === 'interact') {\n        const response = await sentenceApi.interactWithVaultMemo(confirmationModal.memo.id);\n        \n        if (response.success && response.source_thread_id && response.source_thread_type) {\n          // 원본 스레드로 이동하면서 상호작용 메시지 전달\n          onNavigateToThread(\n            response.source_thread_id,\n            response.source_thread_type,\n            response.interaction_message\n          );\n        }\n      } else if (confirmationModal.type === 'delete') {\n        await sentenceApi.deleteVaultMemo(confirmationModal.memo.id);\n        await loadMemos(); // 목록 새로고침\n      }\n    } catch (error) {\n      console.error('메모 액션 실패:', error);\n    } finally {\n      setConfirmationModal(null);\n    }\n  };\n\n  const formatDate = (dateString: string) => {\n    const date = new Date(dateString);\n    return date.toLocaleDateString('ko-KR', {\n      month: 'short',\n      day: 'numeric',\n      hour: '2-digit',\n      minute: '2-digit'\n    });\n  };\n\n  const getThreadTypeLabel = (threadType?: string) => {\n    switch (threadType) {\n      case 'interpretation': return '해석';\n      case 'proceed': return '나아가기';\n      case 'sentence': return '문장';\n      case 'verbalization': return '언어화';\n      default: return threadType || '알수없음';\n    }\n  };\n\n  const getPersonaName = (memo: MemoVaultItem) => {\n    // source_message_id에서 페르소나 ID 추출 시도\n    if (memo.source_message_id) {\n      const parts = memo.source_message_id.split('_');\n      if (parts.length > 1) {\n        const personaId = parts[1];\n        const persona = personas[personaId];\n        if (persona) {\n          return persona.name;\n        }\n      }\n    }\n    \n    // tags에서 페르소나 찾기 (thread_type이 아닌 것들만)\n    const excludeTypes = ['interpretation', 'proceed', 'sentence', 'verbalization'];\n    for (const tag of memo.tags) {\n      if (!excludeTypes.includes(tag)) {\n        const persona = personas[tag];\n        if (persona) {\n          return persona.name;\n        }\n      }\n    }\n    \n    // 언어화 특별 처리\n    if (memo.source_message_id === 'verbalization_chat' || \n        memo.source_thread_type === 'verbalization' ||\n        memo.tags.includes('verbalization')) {\n      return '언어화';\n    }\n    \n    return '알수없음';\n  };\n\n  if (loading) {\n    return (\n      <Container>\n        <div style={{ textAlign: 'center', padding: '60px 20px', color: '#6c757d' }}>\n          로딩 중...\n        </div>\n      </Container>\n    );\n  }\n\n  return (\n    <Container>\n      <Header>\n        <NavigationButton\n          onClick={() => handleNavigateFilter('prev')}\n          disabled={currentFilterIndex === 0}\n        >\n          ‹\n        </NavigationButton>\n        \n        <FilterContainer className=\"filter-dropdown\">\n          <FilterDropdownButton\n            $isOpen={showFilterDropdown}\n            onClick={toggleFilterDropdown}\n          >\n            {currentFilter}\n            <span className=\"arrow\">▼</span>\n          </FilterDropdownButton>\n          <FilterDropdownMenu $isOpen={showFilterDropdown}>\n            {filterOptions.map(option => (\n              <FilterDropdownItem\n                key={option}\n                $isSelected={option === currentFilter}\n                onClick={() => handleFilterChange(option)}\n              >\n                {option}\n              </FilterDropdownItem>\n            ))}\n          </FilterDropdownMenu>\n        </FilterContainer>\n        \n        <NavigationButton\n          onClick={() => handleNavigateFilter('next')}\n          disabled={currentFilterIndex === filterOptions.length - 1}\n        >\n          ›\n        </NavigationButton>\n      </Header>\n\n      <ContentArea>\n        {filteredMemos.length === 0 ? (\n          <EmptyState>\n            <div className=\"icon\">📝</div>\n            <div className=\"title\">저장된 메모가 없습니다</div>\n            <div className=\"description\">\n              훈습이나 언어화 페이지에서 메모를 생성하면 자동으로 저장됩니다\n            </div>\n          </EmptyState>\n        ) : (\n          <MemoGrid>\n            {filteredMemos.map(memo => (\n              <MemoContainer key={memo.id}>\n                <MemoRow\n                  $isPinned={pinnedMemos.has(memo.id)}\n                  $isHighlighted={true}\n                  onClick={(e) => handleMemoClick(e, memo)}\n                  onContextMenu={(e) => handleMemoClick(e, memo)}\n                >\n                  <MemoContent>\n                    <UserMemoContent>{memo.memo_content}</UserMemoContent>\n                    <SentenceContent>\n                      {memo.sentence_content}\n                    </SentenceContent>\n                  </MemoContent>\n                  \n                  <StatusIndicators>\n                    <StatusIndicator \n                      $type=\"memo\" \n                      title=\"메모\"\n                    />\n                  </StatusIndicators>\n                  \n                  <PinIcon\n                    $isPinned={pinnedMemos.has(memo.id)}\n                    onClick={(e) => {\n                      e.stopPropagation();\n                      togglePin(memo.id);\n                    }}\n                  />\n                </MemoRow>\n                <MemoMeta>\n                  <ThreadTypeLabel>\n                    {getPersonaName(memo)} - {getThreadTypeLabel(memo.source_thread_type)}\n                  </ThreadTypeLabel>\n                  <DateLabel>\n                    {formatDate(memo.created_at)}\n                  </DateLabel>\n                </MemoMeta>\n              </MemoContainer>\n            ))}\n          </MemoGrid>\n        )}\n      </ContentArea>\n\n      {/* 컨텍스트 메뉴 */}\n      {contextMenu && (\n        <ContextMenuContainer $x={contextMenu.x} $y={contextMenu.y}>\n          <ContextMenuItem\n            onClick={() => handleContextMenuAction('interact', contextMenu.memo)}\n          >\n            🔄 상호작용 하기\n          </ContextMenuItem>\n          <ContextMenuItem\n            onClick={() => handleContextMenuAction('pin', contextMenu.memo)}\n          >\n            📌 {pinnedMemos.has(contextMenu.memo.id) ? '고정 해제' : '고정하기'}\n          </ContextMenuItem>\n          <ContextMenuItem\n            onClick={() => handleContextMenuAction('delete', contextMenu.memo)}\n          >\n            🗑️ 삭제하기\n          </ContextMenuItem>\n        </ContextMenuContainer>\n      )}\n\n      {/* 확인 모달 */}\n      {confirmationModal && (\n        <ModalOverlay onClick={() => setConfirmationModal(null)}>\n          <ModalContent onClick={(e) => e.stopPropagation()}>\n            <ModalTitle>\n              {confirmationModal.type === 'interact' ? '메모 상호작용' : '메모 삭제'}\n            </ModalTitle>\n            <ModalMessage>\n              {confirmationModal.type === 'interact' \n                ? `이 메모와 상호작용하시겠습니까? 원본 위치로 이동하여 \"${confirmationModal.memo.sentence_content} - ${confirmationModal.memo.memo_content}\" 형식으로 입력창에 삽입됩니다.`\n                : '이 메모를 삭제하시겠습니까? 삭제된 메모는 복구할 수 없습니다.'\n              }\n            </ModalMessage>\n            <ModalButtons>\n              <ModalButton \n                $variant=\"secondary\" \n                onClick={() => setConfirmationModal(null)}\n              >\n                취소\n              </ModalButton>\n              <ModalButton \n                $variant=\"primary\" \n                onClick={handleConfirmAction}\n              >\n                {confirmationModal.type === 'interact' ? '상호작용' : '삭제'}\n              </ModalButton>\n            </ModalButtons>\n          </ModalContent>\n        </ModalOverlay>\n      )}\n    </Container>\n  );\n};\n\nexport default MemoVaultView; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}